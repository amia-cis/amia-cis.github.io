(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{67741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return t(52470)}])},43370:function(e,n,t){"use strict";var r=t(85893),i=t(9008);n.Z=function(e){var n=e.title,t=e.ogDescription,o=e.ogImageURL,l=e.ogImgAlt,a=void 0===l?"Picture":l,s=e.ogSiteName,c=void 0===s?"ACAP-BICOL":s,u=e.ogURL;return(0,r.jsxs)(i.default,{children:[(0,r.jsx)("meta",{name:"description",content:t}),(0,r.jsx)("meta",{name:"og:description",content:t}),(0,r.jsx)("meta",{property:"og:title",content:n}),(0,r.jsx)("meta",{property:"og:site_name",content:c}),(0,r.jsx)("meta",{property:"og:image",content:o}),(0,r.jsx)("meta",{property:"og:image:width",content:"600"}),(0,r.jsx)("meta",{property:"og:image:height",content:"315"}),(0,r.jsx)("meta",{property:"og:image:alt",content:a}),(0,r.jsx)("meta",{property:"og:url",content:u}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:title",content:n}),(0,r.jsx)("meta",{name:"twitter:image",content:o}),(0,r.jsx)("title",{children:n})]})}},11427:function(e,n,t){"use strict";var r=t(85893),i=t(55113);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=(0,t(11496).ZP)((function(e){return(0,r.jsx)(i.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{padding:n.spacing(3),borderRadius:n.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}));n.Z=l},52470:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return ge},default:function(){return ve}});var r=t(34051),i=t.n(r),o=t(85893),l=t(67294),a=t(16327),s=t(11427),c=t(47426),u=t(59111),p=t(25675),d=t(45697),f=t.n(d),m=t(61903),g=t(76295),v=t(87357),b=t(11057),h=t(56863),y=t(67720),x=t(15861),_=t(86886),j=t(11829),w=t(26613),S={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-child(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:function(e){return e.spacing(2)},margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}};var O=function(e){var n=e.info,t=e.show,r=void 0===t||t,i=e.borderColor,l=void 0===i?"#cc00cc":i;return(0,o.jsxs)(v.Z,{sx:S.container,children:[(0,o.jsxs)(v.Z,{sx:S.cardContainer,style:{borderColor:l},children:[(0,o.jsx)(x.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===n.from?"crop stage":n.from)}),(0,o.jsx)(x.Z,{variant:"subtitle1",children:n.label})]}),r&&(0,o.jsx)(w.Z,{size:24,sx:S.arrowIcon,style:{color:l}})]})},Z=t(27692),C=t(26660),D=t(87784),P={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"},"& .toggleButton":{float:"right",width:"80px"}},autocomplete:{maxWidth:{xs:"100%",md:"300px"},paddingTop:function(e){return e.spacing(2)}},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:function(e){return e.spacing(10)},textAlign:"center","& h5":{marginTop:function(e){return e.spacing(2)}}}};function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){E(e,n,t[n])}))}return e}var k=["sel_province","sel_municipality","sel_crop","sel_month","sel_stage","sel_activity"];function I(e){var n=(0,l.useState)(!1),t=n[0],r=n[1],i=e.sel_options,a=e.optsprovinces,s=e.optsmunicipalities,u=e.optscrops,d=e.optsmonths,f=e.optscropstages,w=e.optsactivities,S=e.onSelectItemChange,E=e.onResetClick,I=e.recommendations,T=e.monthForecast,R=e.loading;(0,l.useEffect)((function(){null===i.sel_activity&&!0===t&&r(!1)}),[i.sel_activity,t]);var M=function(){var e="Loading...";return a.length>0&&(e=null===i.sel_province?"Select a province":"Province"),e};return(0,o.jsxs)(v.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,o.jsx)(x.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,o.jsx)(x.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,o.jsxs)(_.ZP,{container:!0,spacing:2,sx:P.container,children:[(0,o.jsxs)(_.ZP,{item:!0,xs:12,md:4,sx:P.selectContainer,children:[(0,o.jsxs)(v.Z,{sx:{paddingRight:function(e){return e.spacing(2)},wdith:"100%"},children:[(0,o.jsx)(g.Z,{disablePortal:!0,id:"province",value:i.sel_province,disabled:0===a.length||R,options:a,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,A({},e,{label:M()}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){return S(e,A({},n,{from:"province"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"municipality",value:i.sel_municipality,disabled:0===s.length||R,options:s,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,A({},e,{label:null===i.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},onChange:function(e,n){return S(e,A({},n,{from:"municipality"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"crop",value:i.sel_crop,disabled:0===u.length||R,options:u,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,A({},e,{label:null===i.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return S(e,A({},n,{from:"crop"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"month",value:i.sel_month,disabled:0===d.length||null===i.sel_crop||R,options:d,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,A({},e,{label:null===i.sel_month?"Select a Month":"Month"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return S(e,A({},n,{from:"month"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"cropstage",value:i.sel_stage,disabled:0===f.length||R||T.code===c.DD,options:f,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,A({},e,{label:null===i.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return S(e,A({},n,{from:"cropstage"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"activity",value:i.sel_activity,disabled:0===w.length||R||T.code===c.DD,options:w,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,A({},e,{label:null===i.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){S(e,A({},n,{from:"activity"})),r(!1)}}),(0,o.jsx)("div",{children:""!==i.error?(0,o.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:i.error}):(0,o.jsx)("div",{children:"\xa0"})}),(0,o.jsxs)(h.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,o.jsx)(b.Z,{size:"medium",disabled:R,onClick:E,children:"Clear"}),(0,o.jsx)(b.Z,{size:"medium",variant:"contained",onClick:function(){return r((function(e){return!e}))},disabled:null===i.sel_activity||t,children:"Finish"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)(y.Z,{}),(0,o.jsx)("br",{}),null!==i.sel_month&&(0,o.jsxs)(v.Z,{sx:P.conditionLegend,style:{backgroundColor:c.tN[T.forecast],color:[c.MW.ABOVE_NORMAL.label,c.MW.WAY_BELOW_NORMAL.label].includes(T.forecast)?"#fff":"#000"},children:[(0,o.jsx)(x.Z,{variant:"subtitle2",children:"Rainfall Forecast"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:i.sel_month.label})," ",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{children:[T.label," (",(0,D.aS)(T.value),"%)"]})]})]})]}),(0,o.jsx)(_.ZP,{item:!0,xs:12,md:8,sx:P.recsContainer,children:null!==i.sel_crop&&null!==i.sel_activity&&t?(0,o.jsx)(Z.Z,{recommendations:I,title:i.sel_crop,subtitle:T.label,recommendationsEng:"practice",recommendationsTag:"practice_tagalog"}):Object.values(i).filter((function(e){return e})).length>1?(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:k.map((function(e,n){var t,r,l={from:e.slice(e.indexOf("_")+1),label:["sel_month","sel_stage"].includes(e)?null!==(r=null===(t=i[e])||void 0===t?void 0:t.label)&&void 0!==r?r:"":i[e]};return null!==i[e]&&void 0!==i[e]?(0,o.jsx)(O,{info:l,show:n<k.length-1},"card-opt-".concat(n)):(0,o.jsx)("div",{},"card-opt-".concat(n))}))}):(0,o.jsxs)(v.Z,{sx:P.welcome,children:[(0,o.jsx)(p.default,{unoptimized:!0,src:(0,C.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:C.imageLoader,alt:"Empty data"}),(0,o.jsx)(x.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,o.jsx)(x.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}I.propTypes={sel_options:f().object,optsprovinces:f().array,optsmunicipalities:f().array,optscrops:f().array,optsmonths:f().array,optscropstages:f().array,optsactivities:f().array,recommendations:f().array,monthForecast:f().object,loading:f().bool,onSelectItemChange:f().func,onResetClick:f().func};var T=I,R=t(30560),M=t(23766),L=t(76490),W=t(15113),Y=t(33050),N=t(68193),F=t(99306),q=t(87682),B=t(16013);function V(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){V(e,n,t[n])}))}return e}var H={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_condition:{id:0,from:"weather_condition",label:c.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""};var U=function(e){var n,t,r=e.provinces,i=void 0===r?[]:r,a=(0,l.useState)(H),s=a[0],p=a[1],d=(0,l.useState)({}),f=d[0],m=d[1],g=(0,l.useState)({}),v=g[0],b=g[1],h=(0,l.useState)([]),y=h[0],x=h[1],_=(0,l.useState)([]),j=_[0],w=_[1],S=(0,l.useState)([]),O=S[0],Z=S[1],C=(0,l.useState)([]),D=C[0],P=C[1],E=(0,l.useState)(!0),A=E[0],k=E[1],I=(0,l.useRef)(!1),V=(0,q.m$)(R.M.WEATHER_FORECASTS,"bicol",R.M.SUB_SEASONAL,"name"),U=V.documents,G=V.loading,$=V.error,X=(0,F.Z)(v,s.sel_month).forecast,J=(0,Y.Z)(s.sel_province),K=J.cropcalendar,Q=J.loading,ee=J.error,ne=(0,N.Z)(null!==(t=null===(n=s.sel_stage)||void 0===n?void 0:n.code)&&void 0!==t?t:null,X,B.q.SEASONAL),te=ne.recommendations,re=ne.farmoperations,ie=ne.loading,oe=ne.error,le=(0,L.Z)(K,s.sel_municipality),ae=(0,W.Z)(f,y,s.sel_crop),se=ae.months,ce=ae.uniquecropstages,ue=ae.error,pe=(0,M.Z)(s.sel_province,i);return(0,l.useEffect)((function(){return I.current=!0,function(){I.current=!1}}),[]),(0,l.useEffect)((function(){i.length>0&&U.length>0&&!G&&(Z((0,u.m)(i)),x(U[0].mos.reduce((function(e,n){return e.push({id:c.re[n.toUpperCase()].code,label:c.re[n.toUpperCase()].format,disabled:!1}),e}),[])))}),[i,U,G]),(0,l.useEffect)((function(){k(Q||G||ie)}),[Q,G,ie]),(0,l.useEffect)((function(){if(""!==ue||""!==oe||""!==$||""!==ee){var e=ue||oe||$||ee;p((function(n){return z({},n,{error:e})}))}else p((function(e){return z({},e,{error:""})}))}),[ue,ee,oe,$]),(0,o.jsx)(T,{optsprovinces:O,optsmunicipalities:pe,optscrops:le,optsmonths:se,optscropstages:D,optsactivities:re,monthForecast:X,sel_options:s,recommendations:j,loading:A,onSelectItemChange:function(e,n){var t=n.from,r=n.label,i=n.id;if(j.length>0&&w([]),Object.keys(n).includes("id"))switch(t){case"province":P([]),b(U.find((function(e){return e.name===r}))),p(z({},H,{sel_province:r}));break;case"municipality":P([]),p(z({},s,{sel_municipality:r,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}));break;case"crop":m(K.find((function(e){return e.municipality===s.sel_municipality&&e.crop===r}))),p(z({},s,{sel_crop:r,sel_month:null,sel_stage:null,sel_activity:null}));break;case"month":P(ce[i]),p(z({},s,{sel_month:n,sel_stage:null,sel_activity:null}));break;case"cropstage":p(z({},s,{sel_stage:n,sel_activity:null}));break;case"activity":w(te.filter((function(e){return e.crop_stage===s.sel_stage.code&&e.farm_operation===r}))),p(z({},s,{sel_activity:r}))}else"province"===t?(p(H),P([])):"municipality"===t?(p(z({},s,{sel_municipality:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),P([])):"crop"===t?(p(z({},s,{sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),P([])):"month"===t?(p(z({},s,{sel_month:null,sel_stage:null,sel_activity:null})),P([])):"cropstage"===t?p(z({},s,{sel_stage:null,sel_activity:null})):"activity"===t&&p(z({},s,{sel_activity:null}))},onResetClick:function(){p(H),P([]),w([])}})},G=t(27484),$=t.n(G),X=t(26829),J=t(52359),K=t(96918);function Q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ee=function(e){var n=e.value,t=void 0===n?null:n,r=e.startDate,i=e.endDate,a=e.handleClick,s=e.disableCurrent,c=e.disabled,u=void 0!==c&&c,p=(0,l.useState)(null),d=p[0],f=p[1],g=new Date("".concat(r,", ").concat((new Date).getFullYear())),v=new Date("".concat(i,", ").concat((new Date).getFullYear()));if(g.getMonth()+1===12&&v.getMonth()+1===1){var b=new Date;b.getMonth()===v.getMonth()?g=new Date("".concat(r,", ").concat(b.getFullYear()-1)):v=new Date("".concat(i,", ").concat((new Date).getFullYear()+1))}return(0,l.useEffect)((function(){var e=t;null!==t&&(e=$()(function(){var e=new Date,n=new Date("".concat(t.label,", ").concat(e.getFullYear()));return e.getMonth()+1===12&&n.getMonth()+1===1&&(n=new Date("".concat(t.label,", ").concat((new Date).getFullYear()+1))),n}())),f(e)}),[t]),(0,o.jsx)(J._,{dateAdapter:X.y,children:(0,o.jsx)(K.M,{disabled:u,minDate:$()(g),maxDate:$()(v),label:"Date",value:d,disablePast:!0,openTo:"day",reduceAnimations:!0,shouldDisableDate:function(e){return!!s&&$()(e).format("YYYY/MM/DD")===$()().format("YYYY/MM/DD")},onChange:function(e){return function(e){var n=$()(e).format("YYYY/MM/DD");"Invalid Date"!==n&&($()(n).isBefore($()(g))||$()(n).isAfter($()(v))||a&&a(n))}(e)},renderInput:function(e){return(0,o.jsx)(m.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Q(e,n,t[n])}))}return e}({},e,{sx:{marginTop:"8px",width:"100%",maxWidth:{xs:"100%",md:"300px"}},onKeyDown:function(e){e.preventDefault()}}))}})})};function ne(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ne(e,n,t[n])}))}return e}var re=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];function ie(e){var n,t,r=(0,l.useState)(!1),i=r[0],a=r[1],s=e.sel_options,u=e.loading,d=e.recommendations,f=e.weathertoday,w=e.warning,S=e.optsprovinces,D=e.optsmunicipalities,E=e.optsdays,A=e.optscrops,k=e.optscropstages,I=e.optsactivities,T=e.onSelectItemChange,R=e.onClickDateSelector,M=e.onResetClick;(0,l.useEffect)((function(){null===s.sel_activity&&!0===i&&a(!1)}),[s.sel_activity,i]);var L=function(){var e="Loading...";return S.length>0&&(e=null===s.sel_province?"Select a province":"Province"),e};return(0,o.jsxs)(v.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,o.jsx)(x.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,o.jsx)(x.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,o.jsxs)(_.ZP,{container:!0,spacing:2,sx:P.container,children:[(0,o.jsxs)(_.ZP,{item:!0,xs:12,md:4,sx:P.selectContainer,children:[(0,o.jsxs)(v.Z,{sx:{minWidth:"100%",paddingRight:function(e){return e.spacing(2)}},children:[(0,o.jsx)(g.Z,{disablePortal:!0,id:"province",value:s.sel_province,disabled:0===S.length||u,options:S,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,te({},e,{label:L()}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){return T(e,te({},n,{from:"province"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"municipality",value:s.sel_municipality,disabled:0===D.length||u,options:D,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,te({},e,{label:null===s.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},onChange:function(e,n){return T(e,te({},n,{from:"municipality"}))}}),(0,o.jsx)(v.Z,{children:(0,o.jsx)(ee,{disabled:null===s.sel_municipality||""!==s.error||u,value:s.sel_day,startDate:(null===(n=E[0])||void 0===n?void 0:n.label)||new Date,endDate:(null===(t=E[9])||void 0===t?void 0:t.label)||new Date,handleClick:R})}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"crop",value:s.sel_crop,disabled:0===A.length||null===s.sel_day||u,options:A,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,te({},e,{label:null===s.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return T(e,te({},n,{from:"crop"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"cropstage",value:s.sel_stage,disabled:0===k.length||u,options:k,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,te({},e,{label:null===s.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return T(e,te({},n,{from:"cropstage"}))}}),(0,o.jsx)(g.Z,{disablePortal:!0,id:"activity",value:s.sel_activity,disabled:0===I.length||u,options:I,sx:P.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,te({},e,{label:null===s.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){T(e,te({},n,{from:"activity"})),a(!1)}}),(0,o.jsx)("div",{children:""!==s.error||""!==w?(0,o.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:s.error||w}):(0,o.jsx)("div",{children:"\xa0"})}),(0,o.jsxs)(h.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,o.jsx)(b.Z,{size:"medium",onClick:M,children:"Clear"}),(0,o.jsx)(b.Z,{size:"medium",variant:"contained",onClick:function(){return a((function(e){return!e}))},disabled:null===s.sel_activity||i,children:"Finish"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)(y.Z,{}),(0,o.jsx)("br",{}),null!==f&&(0,o.jsxs)(v.Z,{sx:P.conditionLegend,style:{backgroundColor:c.tN[f.code],color:[c.MW.ABOVE_NORMAL.label,c.MW.WAY_BELOW_NORMAL.label].includes(f.code)?"#fff":"#000"},children:[(0,o.jsx)(x.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:f.label_full}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{children:f.rainfall})]})]})]}),(0,o.jsx)(_.ZP,{item:!0,xs:12,md:8,sx:P.recsContainer,children:null!==s.sel_crop&&null!==s.sel_activity&&i?(0,o.jsx)(Z.Z,{recommendations:d,title:s.sel_crop,subtitle:"Climate Resilient Agriculture Practices",recommendationsEng:"practice",recommendationsTag:"practice_tagalog"}):Object.values(s).filter((function(e){return e})).length>1?(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:re.map((function(e,n){var t,r,i={from:e.slice(e.indexOf("_")+1),label:["sel_day","sel_stage"].includes(e)?null!==(r=null===(t=s[e])||void 0===t?void 0:t.label)&&void 0!==r?r:"":s[e]};return null!==s[e]&&void 0!==s[e]?(0,o.jsx)(O,{info:i,show:n<re.length-1,borderColor:"blue"},"card-opt-".concat(n)):(0,o.jsx)("div",{},"card-opt-".concat(n))}))}):(0,o.jsxs)(v.Z,{sx:P.welcome,children:[(0,o.jsx)(p.default,{unoptimized:!0,src:(0,C.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:C.imageLoader,alt:"Empty data"}),(0,o.jsx)(x.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,o.jsx)(x.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}ie.propTypes={sel_options:f().object,optsprovinces:f().array,optsmunicipalities:f().array,optscrops:f().array,optsdays:f().array,optscropstages:f().array,optsactivities:f().array,recommendations:f().array,weathertoday:f().object,onSelectItemChange:f().func,onClickDateSelector:f().func,onResetClick:f().func};var oe=ie,le=t(4463),ae=t(94640);function se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){se(e,n,t[n])}))}return e}var ue={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:{id:0,from:"weather_condition",label:null,date:(new Date).toDateString()},loading:!1,error:"",warning:""};var pe=function(e){var n,t,r,i=e.provinces,a=void 0===i?[]:i,s=(0,l.useState)(ue),c=s[0],p=s[1],d=(0,l.useState)([]),f=d[0],m=d[1],g=(0,l.useState)([]),v=g[0],b=g[1],h=(0,l.useState)(null),y=h[0],x=h[1],_=(0,l.useState)([]),j=_[0],w=_[1],S=(0,l.useState)([]),O=S[0],Z=S[1],C=(0,l.useState)(!0),D=C[0],P=C[1],E=(0,l.useRef)(!1),A=(0,M.Z)(c.sel_province,a),k=(0,Y.Z)(c.sel_province),I=k.cropcalendar,T=k.loading,R=k.error,W=(0,L.Z)(I,c.sel_municipality),F=(0,N.Z)(null!==(r=null===(n=c.sel_stage)||void 0===n?void 0:n.code)&&void 0!==r?r:null,null,B.q.TENDAY),q=F.recommendations,V=F.farmoperations,z=F.loading,H=F.error,U=(0,le.Z)(f,null===(t=c.sel_day)||void 0===t?void 0:t.full,W),G=U.cropslist,$=U.cropstagesbycrop,X=U.error,J=(0,ae.Z)(c.sel_province,c.sel_municipality),K=J.days,Q=J.loading,ee=J.error,ne=J.warning;(0,l.useEffect)((function(){return E.current=!0,function(){E.current=!1}}),[]),(0,l.useEffect)((function(){a.length>0&&w((0,u.m)(a))}),[a]),(0,l.useEffect)((function(){P(T||Q||z)}),[T,Q,z]),(0,l.useEffect)((function(){if(""!==X||""!==H||""!==ee||""!==R){var e=X||H||ee||R;p((function(n){return ce({},n,{error:e})}))}else p((function(e){return ce({},e,{error:""})}))}),[X,R,H,ee]);var te=function(e,n){var t=n.from,r=n.label;if(v.length>0&&b([]),Object.keys(n).includes("id"))switch(t){case"province":Z([]),x(null),p(ce({},ue,{sel_province:r}));break;case"municipality":Z([]),m(I.filter((function(e){return e.municipality===r}))),p(ce({},c,{sel_municipality:r,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null}));break;case"day":Z([]),x(K.find((function(e){return e.label===r}))),p(ce({},c,{sel_day:n,sel_month:null,sel_crop:null,sel_stage:null,sel_activity:null}));break;case"crop":Z($[r]),p(ce({},c,{sel_crop:r,sel_month:null,sel_stage:null,sel_activity:null}));break;case"cropstage":p(ce({},c,{sel_stage:n,sel_activity:null}));break;case"activity":b(q.filter((function(e){return e.crop_stage===c.sel_stage.code&&e.farm_operation===r}))),p(ce({},c,{sel_activity:r}))}else"province"===t?(p(ue),Z([])):"municipality"===t?(p(ce({},c,{sel_municipality:null,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null})),Z([])):"day"===t?(p(ce({},c,{sel_day:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),Z([])):"crop"===t?(p(ce({},c,{sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),Z([])):"cropstage"===t?p(ce({},c,{sel_stage:null,sel_activity:null})):"activity"===t&&p(ce({},c,{sel_activity:null}))};return(0,o.jsx)(oe,{optsprovinces:j,optsmunicipalities:A,optscrops:G,optsdays:K,optscropstages:O,optsactivities:V,sel_options:c,recommendations:v,weathertoday:y,loading:D,warning:ne,onSelectItemChange:te,onClickDateSelector:function(e){var n=new Date(e).toDateString();n=n.substring(0,n.length-5),te(null,{id:n,label:n,full:new Date(e),from:"day"})},onResetClick:function(){p(ue),Z([]),b([])}})};var de=function(e){var n=e.municipalities,t=void 0===n?[]:n,r=e.provinces,i=void 0===r?[]:r;return(0,o.jsxs)("div",{children:[(0,o.jsx)(s.Z,{sx:{boxShadow:"none"}}),(0,o.jsx)("div",{id:"seasonal-recommendations"}),(0,o.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,o.jsx)(U,{municipalities:t,provinces:i})}),(0,o.jsx)("div",{id:"resilient-practices"}),(0,o.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,o.jsx)(pe,{provinces:i})})]})},fe=t(43370);function me(e,n,t,r,i,o,l){try{var a=e[o](l),s=a.value}catch(c){return void t(c)}a.done?n(s):Promise.resolve(s).then(r,i)}var ge=!0,ve=function(e){var n=e.media,t=(0,l.useState)([]),r=t[0],s=t[1];return(0,l.useEffect)((function(){var e=function(){var e,n=(e=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.$m)();case 3:n=e.sent,s(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function l(e){me(o,r,i,l,a,"next",e)}function a(e){me(o,r,i,l,a,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(fe.Z,{title:"Agro-Climatic Advisory Portal - Bicol (ACAP-BICOL) Crop Recommendations",ogDescription:n.description,ogImageURL:n.url,ogURL:n.path}),(0,o.jsx)(de,{provinces:r})]})}},4463:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(67294),i=t(77715),o=t(27179);function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(0,r.useState)([]),c=s[0],u=s[1],p=(0,r.useState)(null),d=p[0],f=p[1],m=(0,r.useState)([]),g=m[0],v=m[1],b=(0,r.useState)(""),h=b[0],y=b[1],x=(0,r.useState)(null),_=x[0],j=x[1],w=(0,r.useState)(""),S=w[0],O=w[1],Z=function(e,n){return e.findIndex((function(e){return e.code===n}))>=0},C=function(e){return new Date(e).toLocaleDateString()},D=function(){u([]),v([]),f(null),y(""),j(null)};return(0,r.useEffect)((function(){if(O(""),e&&n&&t.length>0&&e.length>0){var r=e[0].municipality;if(r===h&&_===C(null!==n&&void 0!==n?n:null))return;var s=a(t),c=new Date(n),p=(0,i.Mn)(c,l);try{var d={},m=[];s.forEach((function(n){void 0===d[n.label]&&(d[n.label]=[]);var t=0,r=0;Object.keys(p).forEach((function(i){var l=e.find((function(e){return e.crop===n.label}));if(!l)throw new Error("Cannot find cropping calendar for ".concat(n.label));var a=l[i];if(void 0===a||""===a)throw new Error("Crop stages data for ".concat(i," does not exist."));for(var s=a.split(","),c=0;c<p[i].length;c+=1)if(p[i][c]===o.Vs.FIRST_HALF)if(r+=1,s[0]!==o.HB){var u={id:d[n.label].length,label:o.ax[s[0]],code:s[0],municipality:l.municipality};d[n.label].push(u),Z(m,s[0])||m.push(u)}else t+=1;else if(p[i][c]===o.Vs.SECOND_HALF)if(r+=1,s[1]!==o.HB){var f={id:d[n.label].length,label:o.ax[s[1]],code:s[1],municipality:l.municipality};d[n.label].push(f),Z(m,s[1])||m.push(f)}else t+=1})),n.disabled=t===r})),y(r),f(d),u(s),v(m),j(C(n))}catch(g){D(),O(g.message)}}0===e.length&&D()}),[e,n,_,t,h,l]),{cropslist:c,cropstagesbycrop:d,uniquecropstages:g,error:S}}},94640:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var r=t(67294),i=t(9473),o=t(47426),l=t(56867),a=t(77715),s=t(901);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){var t=(0,r.useState)([]),c=t[0],p=t[1],d=(0,r.useState)(null),f=d[0],m=d[1],g=(0,r.useState)(""),v=g[0],b=g[1],h=(0,r.useState)(""),y=h[0],x=h[1],_=(0,r.useState)(!1),j=_[0],w=_[1],S=(0,i.I0)(),O=(0,i.v9)((function(e){return e.tendayweather})),Z=O.ids,C=O.status,D=O.entities,P=O.error;return(0,r.useEffect)((function(){null!==e&&(b(""),x(""),S((0,l.R)(e)))}),[e,S]),(0,r.useEffect)((function(){b(P)}),[P]),(0,r.useEffect)((function(){w(C===s.G.PENDING)}),[C]),(0,r.useEffect)((function(){if(b(""),x(""),C===s.G.FULLFILLED&&Z.length>0&&""===P&&null!==n){var e=Object.values(D).find((function(e){return e.municipality===n}));if(void 0!==e){var t,r,i=JSON.parse(e.data),l=Object.values(o.MW);p(i.reduce((function(e,n,o){var s,c,p;return u(e).concat([{id:o,label:n.day_format,label_full:null===(s=(0,a.Ay)(n.day_format,i[9].day_format))||void 0===s?void 0:s.toDateString(),rainfall:n.rainfall,forecast:null!==(t=null===(c=l.find((function(e){return e.tenday===n.rainfall})))||void 0===c?void 0:c.sync)&&void 0!==t?t:"-",code:null!==(r=null===(p=l.find((function(e){return e.tenday===n.rainfall})))||void 0===p?void 0:p.label)&&void 0!==r?r:"-"}])}),[]));var c=new Date(1e3*i[0].date_start.seconds),d=(0,a.Mn)(c);m({months:d,date_start:c,date_range:i[0].date_range})}else{var f=P||"Weather data for the municipality is not available at the moment, however, you can continue viewing recommendations. Please verify that the municipality name is present in the 10-Day weather forecast.";P?(p([]),m(null),b(f)):x(f)}}}),[n,D,Z,C,P]),{days:c,summary:f,loading:j,error:v,warning:y}}}},function(e){e.O(0,[6284,2866,9964,1903,6295,2882,3308,3523,1505,9774,2888,179],(function(){return n=67741,e(e.s=n);var n}));var n=e.O();_N_E=n}]);