(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{7741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return t(8503)}])},8503:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return E}});var r=t(4051),i=t.n(r),o=t(5893),a=t(7294),c=t(7467),s=t(1519),u=t(2367),l=t(7879),p=t(5861),f=t(6886),d={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{xs:"none",md:"1px solid gray"}},recsContainer:{paddingLeft:{sm:"none",md:"54px !important"}},autocomplete:{maxWidth:{sm:"100%",md:"310px"},marginBottom:function(e){return e.spacing(3)},marginTop:function(e){return e.spacing(1)}}};function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){v(e,n,t[n])}))}return e}var h=function(e){var n=e.sel_options,t=e.activities,r=e.provinces,i=e.conditions,a=e.cropRecommendations,c=e.onSelectItemChange,v=e.optscroptypes,h=e.optscropstages,g=e.optsactivities;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.Z,{variant:"h4",children:"Agroclimatic Service"}),(0,o.jsx)(p.Z,{variant:"label",children:"Crop Recommendations"}),(0,o.jsxs)(f.ZP,{container:!0,spacing:2,sx:d.container,children:[(0,o.jsxs)(f.ZP,{item:!0,xs:12,md:4,sx:d.selectContainer,children:[(0,o.jsx)(p.Z,{variant:"subtitle2",children:"Select Province"}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"province",disabled:0===r.length,options:r,sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:0===r.length?"Loading...":"Select a province"}))},onChange:function(e,n){return c(e,b({},n,{from:"province"}))}}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"croptype",options:v,sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select a crop type"}))},onChange:function(e,n){return c(e,["rainfed rice","irrigated rice"].includes(n.label)?b({},n,{from:"croptype"}):{id:1,label:"irrigated rice"})}}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"cropstage",options:h,sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select a crop stage"}))},onChange:function(e,n){return c(e,b({},n,{from:"cropstage"}))}}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"activities",options:g,sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select an activity"}))},onChange:function(e,n){return c(e,b({},n,{from:"activities"}))}}),(0,o.jsx)("br",{}),(0,o.jsx)(s.Z,{}),(0,o.jsx)("br",{}),(0,o.jsx)(p.Z,{variant:"subtitle2",children:"Nutrition Management"}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"nutrition",disabled:0===r.length,options:[{id:1,label:"transplanting"},{id:2,label:"direct-seed sowing"},{id:3,label:"all"},{id:4,label:"no standing in water fields"},{id:5,label:"no standing in paddy fields"}],sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select nutrition management"}))},onChange:function(e,n){return c(e,b({},n,{from:"nutrition"}))}}),(0,o.jsx)(p.Z,{variant:"subtitle2",children:"Water Management"}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"water",disabled:0===r.length,options:[],sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select water management"}))},onChange:function(e,n){return c(e,b({},n,{from:"water"}))}}),(0,o.jsx)(p.Z,{variant:"subtitle2",children:"Pest and Weed Management"}),(0,o.jsx)(l.Z,{disablePortal:!0,id:"pestweed",disabled:0===r.length,options:[],sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select pest and weed management"}))},onChange:function(e,n){return c(e,b({},n,{from:"pestweed"}))}})]}),(0,o.jsxs)(f.ZP,{item:!0,xs:12,md:8,sx:d.recsContainer,children:[(0,o.jsx)(p.Z,{variant:"h5",children:"Rainfed Rice Recommendations"}),(0,o.jsx)(l.Z,{value:n.sel_condition,disablePortal:!0,id:"condition",disabled:0===t.length,options:i,sx:d.autocomplete,renderInput:function(e){return(0,o.jsx)(u.Z,b({},e,{label:"Select a weather condition"}))},onChange:function(e,n){return c(e,b({},n,{from:"condition"}))},isOptionEqualToValue:function(e,n){return e.id===n.id},getOptionLabel:function(e){return e.label?e.label:""}}),(0,o.jsx)("ul",{children:a.map((function(e,n){return(0,o.jsx)("li",{children:e.name},n)}))})]})]})]})};function g(e,n,t,r,i,o,a){try{var c=e[o](a),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,i)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){g(o,r,i,a,c,"next",e)}function c(e){g(o,r,i,a,c,"throw",e)}a(void 0)}))}}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}var w={province:"",condition:"",activity:"Land Preparation"},O=[],P={sel_province:null,sel_condition:null},y=[{id:1,label:"irrigated rice"},{id:2,label:"rainfed rice"},{id:3,label:"corn"},{id:4,label:"casava"}],_=[{id:1,label:"Land Preparation"},{id:2,label:"Planting"},{id:3,label:"Harvesting"}],j=[{id:1,label:"Selection of Varieties"},{id:2,label:"Land Preparation"}];var E=function(){var e=(0,a.useState)(w),n=e[0],t=e[1],r=(0,a.useState)([]),s=r[0],u=r[1],l=(0,a.useState)([]),p=l[0],f=l[1],d=(0,a.useState)(O),v=d[0],b=d[1],g=(0,a.useState)([]),E=g[0],S=g[1],R=(0,a.useState)(P),I=R[0],k=R[1];(0,a.useEffect)((function(){var e=function(){var e=m(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([(0,c.uy)(),(0,c.$K)()]);case 3:n=e.sent,u((function(e){return n[0]})),f((function(e){return n[1]})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){return!0}}),[]),(0,a.useEffect)((function(){if(n.province){var e=function(){var e=m(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.qF)(n.province);case 3:t=e.sent,b((function(e){return t})),k((function(e){return C({},e,{sel_condition:null})})),S([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}}),[n.province]),(0,a.useEffect)((function(){if(n.condition&&v.length>0&&p.length>0){var e=[];v.forEach((function(t,r){e.includes(n.condition)||e.push(t[n.condition])}));var t=p.filter((function(n){return e.includes(n.id)}));t.length>0&&S(t)}}),[n.condition,v,p]);var Z=function(e){k(C({},I,{sel_condition:null})),S([])};return(0,o.jsx)(h,{sel_options:I,activities:v,provinces:s,conditions:[{id:"norm",label:"Normal Conditions"},{id:"wet",label:"Wetter than Normal Conditions"},{id:"dry",label:"Drier than Normal Conditions"}],cropRecommendations:E,optscroptypes:y,optscropstages:_,optsactivities:j,onSelectItemChange:function(e,r){var i=r.id,o=r.from,a=r.label,c="province"===o?a:i;Object.keys(r).includes("id")?(t(C({},n,x({},o,c))),"condition"===o?k(C({},I,{sel_condition:r})):"province"===o&&Z()):(Z(),t(C({},n,x({},o,""))),"province"===o&&b(O))}})}},7467:function(e,n,t){"use strict";t.d(n,{qF:function(){return h},uy:function(){return b},$K:function(){return v},Qt:function(){return g},GV:function(){return m}});var r=t(4051),i=t.n(r),o=t(5048),a=t(5321);function c(e,n,t,r,i,o,a){try{var c=e[o](a),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function u(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){l(e,n,t[n])}))}return e}var f=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;l(this,"getSelections",s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCollectionData(n.CROP_REC_ACTIVITY_SELECTION,"prov");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var t=this;l(this,"getRecommendations",s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCollectionData(t.CROP_REC_RECOMMENDATIONS,"id");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var r=this;l(this,"getProvinces",s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCollectionData(r.CROP_REC_PROVINCES,"id");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var c=this;l(this,"getActivities",function(){var e=s(i().mark((function e(n){var t,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return t=(0,a.hJ)(o.db,c.CROP_REC_ACTIVITY_SELECTION),r=(0,a.IO)(t,(0,a.ar)("prov","==",n)),e.next=6,c.getCollectionData(c.CROP_REC_ACTIVITY_SELECTION,"",r);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());var u=this;l(this,"getVillages",s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getCollectionData(u.VILLAGES,"barangay");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var p=this;l(this,"getCropCalendarsHi",s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getCollectionData(p.CROP_CALENDARS,"filename");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var f=this;l(this,"getRegionProvinces",s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getCollectionData(f.REGIONS,"province");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var d=this;l(this,"getWeatherForecast",function(){var e=s(i().mark((function e(n,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getNestedCollectionData(d.WEATHER_FORECASTS,n,t,"name");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),this.CROP_REC_ACTIVITY_SELECTION="rec_selections",this.CROP_REC_RECOMMENDATIONS="rec_recommendations",this.CROP_REC_PROVINCES="rec_provinces",this.VILLAGES="villages",this.CROP_CALENDARS="misc_crop_calendars",this.REGIONS="const_regions",this.WEATHER_FORECASTS="weather_forecasts"}var n,t,r;return n=e,t=[{key:"getCollectionData",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return s(i().mark((function r(){var c,s,u,l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,a.hJ)(o.db,e),s=t||(0,a.IO)(c,(0,a.Xo)(n,"asc")),r.next=4,(0,a.PL)(s);case 4:return u=r.sent,l=u.docs.map((function(e){return p({},e.data())})),r.abrupt("return",l);case 7:case"end":return r.stop()}}),r)})))()}},{key:"getNestedCollectionData",value:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return s(i().mark((function c(){var u;return i().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return u=(0,a.IO)((0,a.hJ)(o.db,e,n,t),(0,a.Xo)(r)),c.abrupt("return",new Promise(function(){var e=s(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.cf)(u,(function(e){n(e.docs.map((function(e){return e.data()})))}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return c.stop()}}),c)})))()}}],t&&u(n.prototype,t),r&&u(n,r),e}(),d=new f,v=(d.getSelections.bind(d),d.getRecommendations.bind(d)),b=d.getProvinces.bind(d),h=d.getActivities.bind(d),g=(d.getVillages.bind(d),d.getRegionProvinces.bind(d)),m=(d.getCropCalendarsHi.bind(d),d.getWeatherForecast.bind(d))}},function(e){e.O(0,[155,367,879,713,774,888,179],(function(){return n=7741,e(e.s=n);var n}));var n=e.O();_N_E=n}]);