(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{7720:function(e,t,n){"use strict";var r=n(3366),i=n(7462),l=n(7294),o=n(6010),a=n(7192),c=n(1796),s=n(1496),u=n(7623),p=n(5097),d=n(5893);const f=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],h=(0,s.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,i.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:e.palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:(0,c.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({theme:e,ownerState:t})=>(0,i.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${e.palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}})),(({theme:e,ownerState:t})=>(0,i.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${e.palette.divider}`,transform:"translateX(0%)"}})),(({ownerState:e})=>(0,i.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),m=(0,s.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,i.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}))),b=l.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiDivider"}),{absolute:l=!1,children:c,className:s,component:b=(c?"div":"hr"),flexItem:v=!1,light:g=!1,orientation:x="horizontal",role:_=("hr"!==b?"separator":void 0),textAlign:y="center",variant:w="fullWidth"}=n,j=(0,r.Z)(n,f),S=(0,i.Z)({},n,{absolute:l,component:b,flexItem:v,light:g,orientation:x,role:_,textAlign:y,variant:w}),Z=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:l,orientation:o,textAlign:c,variant:s}=e,u={root:["root",t&&"absolute",s,l&&"light","vertical"===o&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===c&&"vertical"!==o&&"textAlignRight","left"===c&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,a.Z)(u,p.V,r)})(S);return(0,d.jsx)(h,(0,i.Z)({as:b,className:(0,o.Z)(Z.root,s),role:_,ref:t,ownerState:S},j,{children:c?(0,d.jsx)(m,{className:Z.wrapper,ownerState:S,children:c}):null}))}));t.Z=b},5097:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(8979);function i(e){return(0,r.Z)("MuiDivider",e)}const l=(0,n(6087).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=l},7741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return n(8503)}])},8503:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return S},default:function(){return Z}});var r=n(4051),i=n.n(r),l=n(5893),o=n(7294),a=n(7467),c=n(1903),s=n(6295),u=n(7357),p=n(7720),d=n(5861),f=n(6886),h={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{xs:"none",md:"1px solid gray"}},recsContainer:{paddingLeft:{sm:"none",md:"54px !important"}},autocomplete:{maxWidth:{sm:"100%",md:"310px"},marginBottom:function(e){return e.spacing(3)},marginTop:function(e){return e.spacing(1)}},conditionLegend:{maxWidth:{sm:"100%",md:"310px"},marginBottom:function(e){return e.spacing(3)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center"}},m=n(4854);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}var g=function(e){var t=e.sel_options,n=e.provinces,r=e.recommendations,i=e.onSelectItemChange,o=e.optsmunicipalities,a=e.optscrops,b=e.optscropstages,g=e.optsactivities,x=e.optsmonths,_=function(){var e="Loading...";return n.length>0&&(e=null===t.sel_province?"Select a province":"Province"),e};return(0,l.jsxs)(u.Z,{sx:{minHeight:"75vh"},id:"seasonal-recommendations",children:[(0,l.jsx)(d.Z,{variant:"h4",children:"Crop Recommendations"}),(0,l.jsx)(d.Z,{variant:"label",children:"Seasonal Recommendations"}),(0,l.jsxs)(f.ZP,{container:!0,spacing:2,sx:h.container,children:[(0,l.jsxs)(f.ZP,{item:!0,xs:12,md:4,sx:h.selectContainer,children:[(0,l.jsx)(d.Z,{variant:"subtitle2",children:"Select Parameters"}),(0,l.jsx)(s.Z,{disablePortal:!0,id:"province",disabled:0===n.length,options:n,sx:h.autocomplete,renderInput:function(e){return(0,l.jsx)(c.Z,v({},e,{label:_()}))},onChange:function(e,t){return i(e,v({},t,{from:"province"}))}}),(0,l.jsx)(s.Z,{disablePortal:!0,id:"municipality",value:t.sel_municipality,disabled:0===o.length,options:o,sx:h.autocomplete,renderInput:function(e){return(0,l.jsx)(c.Z,v({},e,{label:null===t.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){return i(e,v({},t,{from:"municipality"}))}}),(0,l.jsx)(s.Z,{disablePortal:!0,id:"crop",value:t.sel_crop,disabled:0===a.length,options:a,sx:h.autocomplete,renderInput:function(e){return(0,l.jsx)(c.Z,v({},e,{label:null===t.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){return i(e,v({},t,{from:"crop"}))}}),(0,l.jsx)(s.Z,{disablePortal:!0,id:"month",value:t.sel_month,disabled:0===x.length||null===t.sel_crop,options:x,sx:h.autocomplete,renderInput:function(e){return(0,l.jsx)(c.Z,v({},e,{label:null===t.sel_month?"Select a Month":"Month"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){return i(e,v({},t,{from:"month"}))}}),(0,l.jsx)(s.Z,{disablePortal:!0,id:"cropstage",value:t.sel_stage,disabled:0===b.length,options:b,sx:h.autocomplete,renderInput:function(e){return(0,l.jsx)(c.Z,v({},e,{label:null===t.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){return i(e,v({},t,{from:"cropstage"}))}}),(0,l.jsx)(s.Z,{disablePortal:!0,id:"activity",value:t.sel_activity,disabled:0===g.length,options:g,sx:h.autocomplete,renderInput:function(e){return(0,l.jsx)(c.Z,v({},e,{label:null===t.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},onChange:function(e,t){return i(e,v({},t,{from:"activity"}))}}),(0,l.jsx)("br",{}),(0,l.jsx)(p.Z,{}),(0,l.jsx)("br",{}),null!==t.sel_month&&(0,l.jsxs)(u.Z,{sx:h.conditionLegend,style:{backgroundColor:m.tN[t.sel_condition.label]},children:[(0,l.jsx)(d.Z,{variant:"subtitle2",children:"Seasonal Weather Condition"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:t.sel_month.label})," \xa0",(0,l.jsxs)("span",{children:["".concat(t.sel_condition.label.charAt(0).toUpperCase()).concat(t.sel_condition.label.slice(1))," (",t.sel_condition.id,"%)"]})]})]})]}),(0,l.jsx)(f.ZP,{item:!0,xs:12,md:8,sx:h.recsContainer,children:(0,l.jsxs)("div",{children:[null!==t.sel_crop&&null!==t.sel_activity&&(0,l.jsxs)(d.Z,{variant:"h5",children:[t.sel_crop.label," Recommendations"]}),r.length>0&&r.map((function(e,n){return(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:"".concat(t.sel_condition.label.charAt(0).toUpperCase()).concat(t.sel_condition.label.slice(1))}),e.recommendations().map((function(e,t){return e.ul?(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:e.id}),e.subs.length>0&&(0,l.jsx)("ul",{children:e.subs.map((function(e,t){return(0,l.jsx)("li",{children:e},"sub-".concat(n,"-").concat(t))}))})]},"main-".concat(n,"-").concat(t)):(0,l.jsx)("p",{children:e.id},"main-".concat(n,"-").concat(t))}))]},"rec-".concat(n))}))]})})]})]})};function x(e,t,n,r,i,l,o){try{var a=e[l](o),c=a.value}catch(s){return void n(s)}a.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var l=e.apply(t,n);function o(e){x(l,r,i,o,a,"next",e)}function a(e){x(l,r,i,o,a,"throw",e)}o(void 0)}))}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}var j={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_condition:{id:0,from:"weather_condition",label:m.MW.DRIER}};var S=!0,Z=function(e){var t=e.municipalities,n=void 0===t?[]:t,r=(0,o.useState)([]),c=r[0],s=r[1],u=(0,o.useState)([]),p=u[0],d=u[1],f=(0,o.useState)([]),h=f[0],b=f[1],v=(0,o.useState)([]),x=v[0],S=v[1],Z=(0,o.useState)([]),C=Z[0],O=Z[1],k=(0,o.useState)([]),P=k[0],E=k[1],R=(0,o.useState)([]),A=R[0],I=R[1],N=(0,o.useState)({}),T=N[0],W=N[1],M=(0,o.useState)(j),V=M[0],L=M[1],D=(0,o.useState)([]),$=D[0],q=D[1],B=(0,o.useState)([]),U=B[0],J=B[1],X=(0,o.useState)([]),z=X[0],G=X[1],H=(0,o.useState)([]),F=H[0],K=H[1],Y=(0,o.useState)([]),Q=Y[0],ee=Y[1],te=(0,o.useRef)(!1);(0,o.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]),(0,o.useEffect)((function(){var e=function(){var e=_(i().mark((function e(){var t,r,l,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Promise.all([(0,a.Mw)(),(0,a.Ob)(),(0,a.GV)("bicol","seasonal")]);case 5:t=e.sent,te.current&&(b((function(e){return t[0]})),S((function(e){return t[1]}))),r={},t[2].forEach((function(e){var t=e.name.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");r[t]={},e.months.forEach((function(e){r[t][e.mo]={label:e.con,val:e.val}}))})),l=[],t[2][0].mos.forEach((function(e){l.push({id:m.re[e.toUpperCase()].code,label:m.re[e.toUpperCase()].format})})),te.current&&(ee((function(e){return l})),W((function(e){return r}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.error(e.t0.message);case 17:try{o={},c=[],n.forEach((function(e,t){void 0===o[e.province]?(c.push({id:t,label:e.province}),o[e.province]=[{id:0,label:e.name}]):o[e.province].push({id:o[e.province].length,label:e.name})})),te.current&&(d((function(e){return o})),s((function(e){return c})))}catch(i){console.error(i.message)}case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){return!0}}),[n]);var ne=function(){var e=_(i().mark((function e(t,n){var r,l,o,c,s,u,d,f,b,v,g,_,S,Z;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.from,l=n.label,I([]),!Object.keys(n).includes("id")){e.next=76;break}e.t0=r,e.next="province"===e.t0?6:"municipality"===e.t0?12:"crop"===e.t0?42:"month"===e.t0?46:"cropstage"===e.t0?56:"activity"===e.t0?62:73;break;case 6:return L(w({},V,{sel_province:n,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),q(p[l]),J([]),G([]),K([]),e.abrupt("break",74);case 12:return L(w({},V,{sel_municipality:n,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),G([]),K([]),e.prev=15,e.next=18,(0,a.$K)(V.sel_province.label,l);case 18:if(o=e.sent,!te.current){e.next=21;break}return e.abrupt("return");case 21:O((function(e){return o})),c=[],o.map((function(e){return e.crop})).filter((function(e,t,n){return n.indexOf(e)==t})).forEach((function(e,t){c.push({id:t,label:e})})),J((function(e){return c})),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(15),console.error(e.t1.message);case 31:return e.prev=31,e.next=34,(0,a.OP)(V.sel_province.label,l);case 34:s=e.sent,te.current&&E((function(e){return s})),e.next=41;break;case 38:e.prev=38,e.t2=e.catch(31),console.error(e.t2.message);case 41:return e.abrupt("break",74);case 42:return G([]),K([]),L(w({},V,{sel_crop:n,sel_stage:null,sel_activity:null,sel_month:null})),e.abrupt("break",74);case 46:return u=T[V.sel_province.label][n.id].label,d=T[V.sel_province.label][n.id].val,K([]),f=[],b=[],P.forEach((function(e,t){var r=Object.values(m.re).find((function(e){return e.format===n.label})).code;if(""!==e[r]&&e.crop===V.sel_crop.label)for(var i=e[r].split(","),l=0;l<i.length;l+=1)i[l].length>0&&!f.includes(i[l])&&(f.push(i[l]),b.push({id:b.length,label:m.MZ[i[l].toUpperCase()]}))})),v=0===b.length?{id:"novalues",label:"No crop stage for ".concat(l)}:null,G(b),L(w({},V,{sel_month:n,sel_stage:v,sel_activity:null,sel_condition:{label:u,id:d}})),e.abrupt("break",74);case 56:return g=[],_=C.filter((function(e){return e.stage===l&&e.crop===V.sel_crop.label})).map((function(e){return e.activity})).filter((function(e,t,n){return n.indexOf(e)==t})),L(w({},V,{sel_stage:n,sel_activity:null})),_.forEach((function(e,t){g.push({id:t,label:e})})),K((function(e){return g})),e.abrupt("break",74);case 62:e.t3=regeneratorRuntime.keys(V);case 63:if((e.t4=e.t3()).done){e.next=69;break}if(S=e.t4.value,null!==V[S]||"sel_activity"===S){e.next=67;break}return e.abrupt("return");case 67:e.next=63;break;case 69:return Z=C.filter((function(e){return e.activity===l&&e.stage===V.sel_stage.label&&e.crop===V.sel_crop.label})).map((function(e){return{province:e.province,municipality:e.municipality,crop:e.crop,stage:e.stage,activity:e.activity,recommendations:function(){switch(V.sel_condition.label){case m.MW.NORMAL:return JSON.parse(e.normal).map((function(e){return{id:h.find((function(t){return t.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return x.find((function(t){return t.id===e})).description}))}}));case m.MW.WETTER:return JSON.parse(e.wetter).map((function(e){return{id:h.find((function(t){return t.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return x.find((function(t){return t.id===e})).description}))}}));case m.MW.DRIER:return JSON.parse(e.drier).map((function(e){return{id:h.find((function(t){return t.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return x.find((function(t){return t.id===e})).description}))}}))}}}})),L(w({},V,{sel_activity:n})),I(Z),e.abrupt("break",74);case 73:return e.abrupt("break",74);case 74:e.next=77;break;case 76:"province"===r?(L(j),q([]),J([]),G([]),K([])):"municipality"===r?(L(w({},V,{sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),J([]),G([]),K([])):"crop"===r?(L(w({},V,{sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),G([]),K([])):"month"===r?(L(w({},V,y({sel_month:null,sel_stage:null,sel_activity:null},"sel_activity",null))),G([]),K([])):"cropstage"===r?(L(w({},V,{sel_stage:null,sel_activity:null})),K([])):"activity"===r&&L(w({},V,{sel_activity:null}));case 77:case"end":return e.stop()}}),e,null,[[15,28],[31,38]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,l.jsx)(g,{sel_options:V,provinces:c,recommendations:A,optsmunicipalities:$,optscrops:U,optscropstages:z,optsactivities:F,optsmonths:Q,conditions:[{id:"norm",label:"Normal Conditions"},{id:"wet",label:"Wetter than Normal Conditions"},{id:"dry",label:"Drier than Normal Conditions"}],onSelectItemChange:ne})}}},function(e){e.O(0,[369,295,785,774,888,179],(function(){return t=7741,e(e.s=t);var t}));var t=e.O();_N_E=t}]);