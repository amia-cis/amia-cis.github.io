(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1798],{9859:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/weather-services",function(){return t(90)}])},90:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return U}});var r=t(5893),i=t(5861),a=t(4051),o=t.n(a),c=t(7294),s=t(6295),l=t(7357),u=t(6242),p=t(8456),d=t(6886),f=t(1903),x=t(5675),m=t(120),h={daily:{width:"107px",minWidth:"107px",minHeight:"170px",backgroundColor:"rgba(139, 195, 74, 0.3)",padding:function(n){return n.spacing(1)},margin:"2px",borderRadius:"5px","& div":{textAlign:"center"},"& .temp-day":{marginBottom:"4px"},"& .temp-label":{display:"flex",justifyContent:"space-evenly",fontSize:"12px"}}};var g=function(n){var e=n.dailyweather,t=function(n){return Math.round(100*(n+Number.EPSILON))/100};return(0,r.jsxs)(l.Z,{sx:h.daily,children:[(0,r.jsx)("div",{className:"temp-day",children:e.day}),(0,r.jsx)("div",{children:(0,r.jsx)(x.default,{unoptimized:!0,src:(0,m.assetPrefixer)("images/icons/p_".concat(e.rainfall.toLowerCase().replace(" ","_"),".png")),height:50,width:50,loader:m.imageLoader,alt:e.day})}),(0,r.jsx)("div",{className:"temp-label",children:(0,r.jsxs)("div",{children:[e.cover,", ",e.rainfall]})}),(0,r.jsxs)("div",{className:"temp-label",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("strong",{children:[t(e.temp_avg),"\xb0"]})}),(0,r.jsx)("div",{children:t(e.wspeed)})]})]})},v=t(1033),b={wrapper:{marginTop:function(n){return n.spacing(8)},marginBottom:function(n){return n.spacing(12)}},card:{backgroundColor:"rgba(255, 255, 255, 0.8)",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important",minHeight:"390px",minWidth:{xs:"200px",sm:"500px"},marginTop:function(n){return n.spacing(3)},padding:function(n){return n.spacing(2)},borderRadius:function(n){return n.spacing(1)},"& h5, h6":{marginBottom:function(n){return n.spacing(2)}}},autocomplete:{maxWidth:"100%",marginTop:function(n){return n.spacing(1)}},autoMuni:{marginTop:function(n){return n.spacing(2)}},info:{minWidth:"285px",minHeight:"90px",padding:function(n){return n.spacing(2)},marginTop:function(n){return n.spacing(2)},textAlign:"center","& p":{color:"red",fontSize:"12px"}},caption:{color:function(n){return n.palette.text.secondary},"& a":{color:function(n){return n.palette.secondary.main},textDecoration:"none"},"& a:visited":{color:function(n){return n.palette.primary.dark}},"& a:hover, span:hover":{textDecoration:"underline"}}};function y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){y(n,e,t[e])}))}return n}var w=function(n){var e=n.provinces,t=void 0===e?[]:e,a=n.municipalities,o=void 0===a?[]:a,c=n.weather,x=n.logs,m=n.sel_options,h=n.onSelectItemChange;return(0,r.jsxs)(l.Z,{sx:b.wrapper,id:"seasonal-weather-forecast",children:[(0,r.jsx)(i.Z,{variant:"h4",children:"10-Day Weather Forecast"}),(0,r.jsxs)(u.Z,{variant:"outlined",sx:b.card,style:{backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[(0,r.jsxs)(d.ZP,{container:!0,maxWidth:"lg",spacing:5,alignItems:"bottom",children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(i.Z,{variant:"h6",children:"Location Selector"}),(0,r.jsx)(s.Z,{disablePortal:!0,id:"province",value:m.sel_province,disabled:0===t.length,options:t.map((function(n){return{id:n.province,label:n.format}})),size:"small",renderInput:function(n){return(0,r.jsx)(f.Z,j({},n,{label:null===m.sel_province?"Select a province":"Province"}))},isOptionEqualToValue:function(n,e){return n.label===e.label},onChange:function(n,e){return h(n,j({},e,{from:"province"}))}}),(0,r.jsx)(s.Z,{disablePortal:!0,id:"municipality",value:m.sel_municipality,disabled:0===o.length||m.loading,options:o,sx:b.autoMuni,size:"small",renderInput:function(n){return(0,r.jsx)(f.Z,j({},n,{label:null===m.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(n,e){return n.label===e.label},onChange:function(n,e){return h(n,j({},e,{from:"municipality"}))}})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(i.Z,{variant:"h6",children:"Data Overview"}),(0,r.jsxs)(i.Z,{component:"p",variant:"caption",sx:b.caption,children:[(0,r.jsx)("strong",{children:"Synced by:"}),"\xa0 ",x.updated_by,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",x.date_valid,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",x.date_forecast,(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",x.date_synced,(0,r.jsx)("br",{})]})]})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(i.Z,{variant:"h6",children:"\xa0"}),(0,r.jsxs)(i.Z,{component:"p",variant:"caption",sx:b.caption,children:["Synced from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",children:"10-Day Climate Forecast"})," spreadsheet files by ","system"===x.updated_by?"":"an"," ",x.updated_by," on ",x.date_synced]})]})})]}),(0,r.jsx)(d.ZP,{container:!0,maxWidth:"lg",sx:{marginTop:"32px"},children:m.loading?(0,r.jsxs)(l.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:1},children:[(0,r.jsx)(p.Z,{size:32}),(0,r.jsx)(i.Z,{variant:"caption",children:"Loading municipalities..."})]}):""!==m.error?(0,r.jsx)(v.Z,{}):c.map((function(n,e){return(0,r.jsx)(g,{dailyweather:n},"dw-".concat(e))}))})]})]})},_=t(1234);function Z(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(l){return void t(l)}c.done?e(s):Promise.resolve(s).then(r,i)}function S(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){Z(a,r,i,o,c,"next",n)}function c(n){Z(a,r,i,o,c,"throw",n)}o(void 0)}))}}function O(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){O(n,e,t[e])}))}return n}var A={sel_municipality:null,sel_province:null,loading:!0,error:""};var k=function(n){var e=n.provinces,t=void 0===e?[]:e,i=(0,c.useState)(A),a=i[0],s=i[1],l=(0,c.useState)([]),u=l[0],p=l[1],d=(0,c.useState)([]),f=d[0],x=d[1],m=(0,c.useState)([]),h=m[0],g=m[1],v=(0,c.useState)({}),b=v[0],y=v[1],j=(0,c.useState)(!1),Z=j[0],O=j[1],k=(0,c.useRef)(!1);(0,c.useEffect)((function(){k.current=!0;var n=function(){var n=S(o().mark((function n(){var e,t,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,_.vx)();case 3:e=n.sent,t=Object.values(e[0].municipalities)[0][0],(r={date_synced:e[0].date_created.toDate().toDateString()}).updated_by="system"===e[0].updated_by?e[0].updated_by:"admin",r.date_forecast=t.date_forecast,r.date_valid=t.date_range,k.current&&(y(r),x(e[0].municipalities),p((function(n){return Object.keys(e[0].municipalities).map((function(n){return{id:n,label:n}}))})),s((function(n){return P({},n,{loading:!1})}))),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),s((function(e){return P({},e,{loading:!1,error:n.t0.message})}));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){k.current=!1}}),[]),(0,c.useEffect)((function(){!Z&&t.length>0&&u.length>0&&(s(P({},A,{sel_province:{id:t[0].province,label:t[0].format},sel_municipality:u[0],loading:!1})),g(f[u[0].label].map((function(n,e){return{day:n.day_format,temp_avg:n.tmean,wspeed:n.wspeed,rainfall:n.rainfall,cover:n.cover}}))),O(!0))}),[Z,t,u,f,b]);var T=function(){var n=S(o().mark((function n(e,t){var r,i,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.label,i=t.from,!r){n.next=24;break}n.t0=i,n.next="province"===n.t0?5:"municipality"===n.t0?18:21;break;case 5:return s(P({},A,{sel_province:t,loading:!0})),g([]),n.prev=7,n.next=10,(0,_.cp)(r);case 10:c=n.sent,k.current&&(p((function(n){return Object.keys(c[0].municipalities).map((function(n){return{id:n,label:n}}))})),x((function(n){return c[0].municipalities})),s((function(n){return P({},n,{loading:!1})}))),n.next=17;break;case 14:n.prev=14,n.t1=n.catch(7),s(P({},a,{loading:!1,error:n.t1.message}));case 17:return n.abrupt("break",22);case 18:return s(P({},a,{sel_municipality:t,loading:!1})),g(f[r].map((function(n,e){return{day:n.day_format,temp_avg:n.tmean,wspeed:n.wspeed,rainfall:n.rainfall,cover:n.cover}}))),n.abrupt("break",22);case 21:return n.abrupt("break",22);case 22:n.next=35;break;case 24:n.t2=i,n.next="province"===n.t2?27:"municipality"===n.t2?31:34;break;case 27:return s(P({},A,{loading:!1})),p([]),g([]),n.abrupt("break",35);case 31:return s(P({},a,{sel_municipality:null})),g([]),n.abrupt("break",35);case 34:return n.abrupt("break",35);case 35:case"end":return n.stop()}}),n,null,[[7,14]])})));return function(e,t){return n.apply(this,arguments)}}();return(0,r.jsx)(w,{provinces:t,municipalities:u,weather:h,logs:b,sel_options:a,onSelectItemChange:T})},T=t(2509),C=t(8078),D={wrapper:{marginTop:function(n){return n.spacing(10)}},container:{padding:function(n){return n.spacing(2)},paddingTop:function(n){return n.spacing(2)},marginBottom:function(n){return n.spacing(4)},display:"flex",flexDirection:{xs:"column",sm:"row"}},caption:{color:function(n){return n.palette.text.secondary},"& a":{color:function(n){return n.palette.secondary.main},textDecoration:"none"},"& a:visited":{color:function(n){return n.palette.primary.dark}},"& a:hover, span:hover":{textDecoration:"underline"}}};var E=function(n){var e=n.typhoon,t=void 0===e?null:e,a=n.loading;return(0,r.jsx)(l.Z,{sx:D.wrapper,id:"typhoon-advisory",children:a?(0,r.jsxs)(d.ZP,{container:!0,maxWidth:"lg",sx:D.container,spacing:4,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(C.Z,{animation:"wave",variant:"rectangular",height:200,sx:{minWidth:"200px"}})}),(0,r.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[[1,2,3,4,5].map((function(n){return(0,r.jsx)(C.Z,{animation:"wave",style:{marginBottom:6}},"pattern-".concat(n))})),(0,r.jsx)(C.Z,{animation:"wave",width:"80%"})]}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:3})]}):null!==t?(0,r.jsxs)(d.ZP,{container:!0,maxWidth:"lg",sx:D.container,spacing:4,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(x.default,{unoptimized:!0,src:t.img,height:273,width:600,loader:m.imageLoader,alt:"El Ni\xf1o / La Ni\xf1a Monitoring"})}),(0,r.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[(0,r.jsx)(i.Z,{variant:"h5",children:"El Ni\xf1o / La Ni\xf1a Monitoring"}),(0,r.jsx)("p",{children:t.description}),(0,r.jsxs)(i.Z,{component:"p",variant:"caption",sx:D.caption,children:["Captured from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/el-nino-la-nina/monitoring",children:"El Ni\xf1o / La Ni\xf1a Monitoring"})," web page",(0,r.jsx)("br",{}),"by ",t.updated_by," on \xa0",t.date_updated.toDate().toDateString()]})]})]}):(0,r.jsx)(v.Z,{})})},N={wrapper:{marginTop:function(n){return n.spacing(6)}},container:{maxWidth:function(n){return n.breakpoints.values.sm},marginTop:function(n){return n.spacing(1)},border:"1px solid #484848",borderRadius:function(n){return n.spacing(1)}},table:{minWidth:"350px"},tableTitle:{textAlign:"center"},cells:{"& td, th":{textAlign:"center"}},caption:{color:function(n){return n.palette.text.secondary},"& a":{color:function(n){return n.palette.secondary.main},textDecoration:"none"},"& a:visited":{color:function(n){return n.palette.primary.dark}},"& a:hover, span:hover":{textDecoration:"underline"}}};var L=function(n){var e=n.seasonal,t=n.provinces,a=n.typhoon,o=n.fsLoading,c=n.loading;return(0,r.jsxs)(l.Z,{sx:N.wrapper,id:"seasonal-weather-forecast",children:[(0,r.jsx)(i.Z,{variant:"h4",children:"Seasonal Forecast"}),(0,r.jsx)(E,{typhoon:a,loading:c}),!o&&e.length>0&&(0,r.jsxs)(i.Z,{id:"bacap-seasonal-forecast",variant:"subtitle2",children:["Analysis of RAINFALL from\xa0",function(){var n="";if(e.length>0){var t=e[0].mos[0],r=e[0].mos[e[0].mos.length-1];n="".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)," to ").concat(r.charAt(0).toUpperCase()).concat(r.slice(1))}return n}()]}),(0,r.jsx)(T.Z,{weatherData:e,provinces:t,withBorder:!0,fsLoading:o})]})},W={container:{maxWidth:function(n){return n.breakpoints.values.sm},marginTop:function(n){return n.spacing(7)},border:"1px solid #484848",borderRadius:function(n){return n.spacing(1)},padding:function(n){return n.spacing(2)}},table:{minWidth:"350px"},tableTitle:{textAlign:"center"}};var I=function(){return(0,r.jsxs)(l.Z,{sx:W.container,children:[(0,r.jsx)(i.Z,{variant:"h5",children:"Special Weather Advisory"}),(0,r.jsx)("br",{}),(0,r.jsx)(i.Z,{variant:"subtitle2",children:"(to be updated)"}),(0,r.jsx)("br",{})]})};t(4763);var M="const_regions",B=t(1029),R=t(560),z=t(7682);function F(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function H(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,i,a=[],o=!0,c=!1;try{for(t=t.call(n);!(o=(r=t.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(s){c=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return F(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=function(){var n=(0,z.Kx)(M,"province").documents,e=H((0,z.ky)(B.K.GLOBAL_COLLECTIONS,B.K.TYPHOON_ADVISORY),2),t=e[0],a=e[1],o=(0,z.m$)(R.M.WEATHER_FORECASTS,"bicol",R.M.SUB_SEASONAL,"name"),c=o.documents,s=o.loading;return(0,r.jsxs)("div",{id:"ten-day-weather-forecast",children:[(0,r.jsx)(i.Z,{variant:"h4",children:"BACAP Services"}),(0,r.jsx)(i.Z,{variant:"label",children:"Weather Forecasts and Special Weather Advisory information"}),(0,r.jsx)(k,{provinces:n}),(0,r.jsx)(L,{provinces:n,seasonal:c,typhoon:t,fsLoading:s,loading:a}),(0,r.jsx)(I,{})]})}}},function(n){n.O(0,[6653,6233,9774,2888,179],(function(){return e=9859,n(n.s=e);var e}));var e=n.O();_N_E=e}]);