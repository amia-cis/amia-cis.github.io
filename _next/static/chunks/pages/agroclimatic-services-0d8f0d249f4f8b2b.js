(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{7741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return n(2470)}])},3370:function(e,t,n){"use strict";var r=n(5893),i=n(9008);t.Z=function(e){var t=e.title,n=e.ogDescription,o=e.ogImageURL,l=e.ogImgAlt,a=void 0===l?"Picture":l,s=e.ogSiteName,c=void 0===s?"ACAP-BICOL":s,u=e.ogURL;return(0,r.jsxs)(i.default,{children:[(0,r.jsx)("meta",{name:"description",content:n}),(0,r.jsx)("meta",{name:"og:description",content:n}),(0,r.jsx)("meta",{property:"og:title",content:t}),(0,r.jsx)("meta",{property:"og:site_name",content:c}),(0,r.jsx)("meta",{property:"og:image",content:o}),(0,r.jsx)("meta",{property:"og:image:width",content:"600"}),(0,r.jsx)("meta",{property:"og:image:height",content:"315"}),(0,r.jsx)("meta",{property:"og:image:alt",content:a}),(0,r.jsx)("meta",{property:"og:url",content:u}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:title",content:t}),(0,r.jsx)("meta",{name:"twitter:image",content:o}),(0,r.jsx)("title",{children:t})]})}},1427:function(e,t,n){"use strict";var r=n(5893),i=n(5113);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,n(1496).ZP)((function(e){return(0,r.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{padding:t.spacing(3),borderRadius:t.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}));t.Z=l},2470:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return ue},default:function(){return pe}});var r=n(5893),i=n(1427),o=n(7294),l=n(7426),a=n(9111),s=n(5675),c=n(5697),u=n.n(c),p=n(1903),d=n(6295),f=n(7357),m=n(1057),g=n(6863),v=n(7720),b=n(5861),h=n(6886),y=n(1829),x=n(6613),_={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-child(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:function(e){return e.spacing(2)},margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}};var j=function(e){var t=e.info,n=e.show,i=void 0===n||n,o=e.borderColor,l=void 0===o?"#cc00cc":o;return(0,r.jsxs)(f.Z,{sx:_.container,children:[(0,r.jsxs)(f.Z,{sx:_.cardContainer,style:{borderColor:l},children:[(0,r.jsx)(b.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===t.from?"crop stage":t.from)}),(0,r.jsx)(b.Z,{variant:"subtitle1",children:t.label})]}),i&&(0,r.jsx)(x.Z,{size:24,sx:_.arrowIcon,style:{color:l}})]})},O=n(7692),S=n(6660),Z={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"},"& .toggleButton":{float:"right",width:"80px"}},autocomplete:{maxWidth:{xs:"100%",md:"300px"},paddingTop:function(e){return e.spacing(2)}},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:function(e){return e.spacing(10)},textAlign:"center","& h5":{marginTop:function(e){return e.spacing(2)}}}};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var P=["sel_province","sel_municipality","sel_crop","sel_month","sel_stage","sel_activity"];function D(e){var t=(0,o.useState)(!1),n=t[0],i=t[1],a=e.sel_options,c=e.optsprovinces,u=e.optsmunicipalities,x=e.optscrops,_=e.optsmonths,w=e.optscropstages,D=e.optsactivities,E=e.onSelectItemChange,A=e.onResetClick,k=e.recommendations,I=e.monthForecast,T=e.loading;(0,o.useEffect)((function(){null===a.sel_activity&&!0===n&&i(!1)}),[a.sel_activity,n]);var R=function(){var e="Loading...";return c.length>0&&(e=null===a.sel_province?"Select a province":"Province"),e};return(0,r.jsxs)(f.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,r.jsx)(b.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,r.jsx)(b.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,r.jsxs)(h.ZP,{container:!0,spacing:2,sx:Z.container,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:12,md:4,sx:Z.selectContainer,children:[(0,r.jsxs)(f.Z,{sx:{paddingRight:function(e){return e.spacing(2)},wdith:"100%"},children:[(0,r.jsx)(d.Z,{disablePortal:!0,id:"province",value:a.sel_province,disabled:0===c.length||T,options:c,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,C({},e,{label:R()}))},isOptionEqualToValue:function(e,t){return e.label===t},onChange:function(e,t){return E(e,C({},t,{from:"province"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"municipality",value:a.sel_municipality,disabled:0===u.length||T,options:u,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,C({},e,{label:null===a.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,t){return e.label===t},onChange:function(e,t){return E(e,C({},t,{from:"municipality"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"crop",value:a.sel_crop,disabled:0===x.length||T,options:x,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,C({},e,{label:null===a.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,t){return e.label===t},getOptionDisabled:function(e){return e.disabled},onChange:function(e,t){return E(e,C({},t,{from:"crop"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"month",value:a.sel_month,disabled:0===_.length||null===a.sel_crop||T,options:_,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,C({},e,{label:null===a.sel_month?"Select a Month":"Month"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,t){return E(e,C({},t,{from:"month"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"cropstage",value:a.sel_stage,disabled:0===w.length||T,options:w,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,C({},e,{label:null===a.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,t){return E(e,C({},t,{from:"cropstage"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"activity",value:a.sel_activity,disabled:0===D.length||T,options:D,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,C({},e,{label:null===a.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,t){return e.label===t},onChange:function(e,t){E(e,C({},t,{from:"activity"})),i(!1)}}),(0,r.jsx)("div",{children:""!==a.error?(0,r.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:a.error}):(0,r.jsx)("div",{children:"\xa0"})}),(0,r.jsxs)(g.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,r.jsx)(m.Z,{size:"medium",disabled:T,onClick:A,children:"Clear"}),(0,r.jsx)(m.Z,{size:"medium",variant:"contained",onClick:function(){return i((function(e){return!e}))},disabled:null===a.sel_activity||n,children:"Finish"})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(v.Z,{}),(0,r.jsx)("br",{}),null!==a.sel_month&&(0,r.jsxs)(f.Z,{sx:Z.conditionLegend,style:{backgroundColor:l.tN[I.forecast],color:[l.MW.ABOVE_NORMAL.label,l.MW.WAY_BELOW_NORMAL.label].includes(I.forecast)?"#fff":"#000"},children:[(0,r.jsx)(b.Z,{variant:"subtitle2",children:"Rainfall Forecast"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:a.sel_month.label})," ",(0,r.jsx)("br",{}),(0,r.jsxs)("span",{children:[I.label," (",I.value,"%)"]})]})]})]}),(0,r.jsx)(h.ZP,{item:!0,xs:12,md:8,sx:Z.recsContainer,children:null!==a.sel_crop&&null!==a.sel_activity&&n?(0,r.jsx)(O.Z,{recommendations:k,title:a.sel_crop,subtitle:I.label,recommendationsEng:"practice",recommendationsTag:"practice_tagalog"}):Object.values(a).filter((function(e){return e})).length>1?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:P.map((function(e,t){var n,i,o={from:e.slice(e.indexOf("_")+1),label:["sel_month","sel_stage"].includes(e)?null!==(i=null===(n=a[e])||void 0===n?void 0:n.label)&&void 0!==i?i:"":a[e]};return null!==a[e]&&void 0!==a[e]?(0,r.jsx)(j,{info:o,show:t<P.length-1},"card-opt-".concat(t)):(0,r.jsx)("div",{},"card-opt-".concat(t))}))}):(0,r.jsxs)(f.Z,{sx:Z.welcome,children:[(0,r.jsx)(s.default,{unoptimized:!0,src:(0,S.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:S.imageLoader,alt:"Empty data"}),(0,r.jsx)(b.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,r.jsx)(b.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}D.propTypes={sel_options:u().object,optsprovinces:u().array,optsmunicipalities:u().array,optscrops:u().array,optsmonths:u().array,optscropstages:u().array,optsactivities:u().array,recommendations:u().array,monthForecast:u().object,loading:u().bool,onSelectItemChange:u().func,onResetClick:u().func};var E=D,A=n(560),k=n(3766),I=n(6490),T=n(7889),R=n(3050),M=n(8193),L=n(9306),W=n(7682),Y=n(6013);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}var B={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_condition:{id:0,from:"weather_condition",label:l.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""};var q=function(e){var t,n,i=e.provinces,s=void 0===i?[]:i,c=(0,o.useState)(B),u=c[0],p=c[1],d=(0,o.useState)({}),f=d[0],m=d[1],g=(0,o.useState)({}),v=g[0],b=g[1],h=(0,o.useState)([]),y=h[0],x=h[1],_=(0,o.useState)([]),j=_[0],O=_[1],S=(0,o.useState)([]),Z=S[0],w=S[1],C=(0,o.useState)([]),P=C[0],D=C[1],N=(0,o.useState)(!0),q=N[0],V=N[1],H=(0,o.useRef)(!1),z=(0,W.m$)(A.M.WEATHER_FORECASTS,"bicol",A.M.SUB_SEASONAL,"name"),U=z.documents,G=z.loading,$=z.error,X=(0,L.Z)(v,u.sel_month).forecast,J=(0,R.Z)(u.sel_province),K=J.cropcalendar,Q=J.loading,ee=J.error,te=(0,M.Z)(null!==(n=null===(t=u.sel_stage)||void 0===t?void 0:t.code)&&void 0!==n?n:null,X,Y.q.SEASONAL),ne=te.recommendations,re=te.farmoperations,ie=te.loading,oe=te.error,le=(0,I.Z)(K,u.sel_municipality),ae=(0,T.Z)(f,y,u.sel_crop),se=ae.months,ce=ae.uniquecropstages,ue=ae.error,pe=(0,k.Z)(u.sel_province,s);return(0,o.useEffect)((function(){return H.current=!0,function(){H.current=!1}}),[]),(0,o.useEffect)((function(){s.length>0&&U.length>0&&!G&&(w((0,a.m)(s)),x(U[0].mos.reduce((function(e,t){return e.push({id:l.re[t.toUpperCase()].code,label:l.re[t.toUpperCase()].format,disabled:!1}),e}),[])))}),[s,U,G]),(0,o.useEffect)((function(){V(Q||G||ie)}),[Q,G,ie]),(0,o.useEffect)((function(){if(""!==ue||""!==oe||""!==$||""!==ee){var e=ue||oe||$||ee;p((function(t){return F({},t,{error:e})}))}else p((function(e){return F({},e,{error:""})}))}),[ue,ee,oe,$]),(0,r.jsx)(E,{optsprovinces:Z,optsmunicipalities:pe,optscrops:le,optsmonths:se,optscropstages:P,optsactivities:re,monthForecast:X,sel_options:u,recommendations:j,loading:q,onSelectItemChange:function(e,t){var n=t.from,r=t.label,i=t.id;if(j.length>0&&O([]),Object.keys(t).includes("id"))switch(n){case"province":D([]),b(U.find((function(e){return e.name===r}))),p(F({},B,{sel_province:r}));break;case"municipality":D([]),p(F({},u,{sel_municipality:r,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null}));break;case"crop":m(K.find((function(e){return e.municipality===u.sel_municipality&&e.crop===r}))),p(F({},u,{sel_crop:r,sel_month:null,sel_stage:null,sel_activity:null}));break;case"month":D(ce[i]),p(F({},u,{sel_month:t,sel_stage:null,sel_activity:null}));break;case"cropstage":p(F({},u,{sel_stage:t,sel_activity:null}));break;case"activity":O(ne.filter((function(e){return e.crop_stage===u.sel_stage.code&&e.farm_operation===r}))),p(F({},u,{sel_activity:r}))}else"province"===n?(p(B),D([])):"municipality"===n?(p(F({},u,{sel_municipality:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),D([])):"crop"===n?(p(F({},u,{sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),D([])):"month"===n?(p(F({},u,{sel_month:null,sel_stage:null,sel_activity:null})),D([])):"cropstage"===n?p(F({},u,{sel_stage:null,sel_activity:null})):"activity"===n&&p(F({},u,{sel_activity:null}))},onResetClick:function(){p(B),D([]),O([])}})},V=n(7484),H=n.n(V),z=n(6829),U=n(2359),G=n(6918);function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){var t=e.value,n=void 0===t?null:t,i=e.startDate,l=e.endDate,a=e.handleClick,s=e.disableCurrent,c=e.disabled,u=void 0!==c&&c,d=(0,o.useState)(null),f=d[0],m=d[1],g=new Date("".concat(i,", ").concat((new Date).getFullYear())),v=new Date("".concat(l,", ").concat((new Date).getFullYear()));if(g.getMonth()+1===12&&v.getMonth()+1===1){var b=new Date;b.getMonth()===v.getMonth()?g=new Date("".concat(i,", ").concat(b.getFullYear()-1)):v=new Date("".concat(l,", ").concat((new Date).getFullYear()+1))}return(0,o.useEffect)((function(){var e=n;null!==n&&(e=H()(function(){var e=new Date,t=new Date("".concat(n.label,", ").concat(e.getFullYear()));return e.getMonth()+1===12&&t.getMonth()+1===1&&(t=new Date("".concat(n.label,", ").concat((new Date).getFullYear()+1))),t}())),m(e)}),[n]),(0,r.jsx)(U._,{dateAdapter:z.y,children:(0,r.jsx)(G.M,{disabled:u,minDate:H()(g),maxDate:H()(v),label:"Date",value:f,disablePast:!0,openTo:"day",reduceAnimations:!0,shouldDisableDate:function(e){return!!s&&H()(e).format("YYYY/MM/DD")===H()().format("YYYY/MM/DD")},onChange:function(e){return function(e){var t=H()(e).format("YYYY/MM/DD");"Invalid Date"!==t&&(H()(t).isBefore(H()(g))||H()(t).isAfter(H()(v))||a&&a(t))}(e)},renderInput:function(e){return(0,r.jsx)(p.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}({},e,{sx:{marginTop:"8px",width:"100%",maxWidth:{xs:"100%",md:"300px"}},onKeyDown:function(e){e.preventDefault()}}))}})})};function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){J(e,t,n[t])}))}return e}var Q=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];function ee(e){var t,n,i=(0,o.useState)(!1),a=i[0],c=i[1],u=e.sel_options,x=e.loading,_=e.recommendations,w=e.weathertoday,C=e.optsprovinces,P=e.optsmunicipalities,D=e.optsdays,E=e.optscrops,A=e.optscropstages,k=e.optsactivities,I=e.onSelectItemChange,T=e.onClickDateSelector,R=e.onResetClick;(0,o.useEffect)((function(){null===u.sel_activity&&!0===a&&c(!1)}),[u.sel_activity,a]);var M=function(){var e="Loading...";return C.length>0&&(e=null===u.sel_province?"Select a province":"Province"),e};return(0,r.jsxs)(f.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,r.jsx)(b.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,r.jsx)(b.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,r.jsxs)(h.ZP,{container:!0,spacing:2,sx:Z.container,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:12,md:4,sx:Z.selectContainer,children:[(0,r.jsxs)(f.Z,{sx:{minWidth:"100%",paddingRight:function(e){return e.spacing(2)}},children:[(0,r.jsx)(d.Z,{disablePortal:!0,id:"province",value:u.sel_province,disabled:0===C.length||x,options:C,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,K({},e,{label:M()}))},isOptionEqualToValue:function(e,t){return e.label===t},onChange:function(e,t){return I(e,K({},t,{from:"province"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"municipality",value:u.sel_municipality,disabled:0===P.length||x,options:P,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,K({},e,{label:null===u.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,t){return e.label===t},onChange:function(e,t){return I(e,K({},t,{from:"municipality"}))}}),(0,r.jsx)(f.Z,{children:(0,r.jsx)(X,{disabled:null===u.sel_municipality||""!==u.error||x,value:u.sel_day,startDate:(null===(t=D[0])||void 0===t?void 0:t.label)||new Date,endDate:(null===(n=D[9])||void 0===n?void 0:n.label)||new Date,handleClick:T})}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"crop",value:u.sel_crop,disabled:0===E.length||null===u.sel_day||x,options:E,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,K({},e,{label:null===u.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,t){return e.label===t},getOptionDisabled:function(e){return e.disabled},onChange:function(e,t){return I(e,K({},t,{from:"crop"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"cropstage",value:u.sel_stage,disabled:0===A.length||x,options:A,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,K({},e,{label:null===u.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,t){return e.label===t.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,t){return I(e,K({},t,{from:"cropstage"}))}}),(0,r.jsx)(d.Z,{disablePortal:!0,id:"activity",value:u.sel_activity,disabled:0===k.length||x,options:k,sx:Z.autocomplete,PaperComponent:y.Z,renderInput:function(e){return(0,r.jsx)(p.Z,K({},e,{label:null===u.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,t){return e.label===t},onChange:function(e,t){I(e,K({},t,{from:"activity"})),c(!1)}}),(0,r.jsx)("div",{children:""!==u.error?(0,r.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:u.error}):(0,r.jsx)("div",{children:"\xa0"})}),(0,r.jsxs)(g.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,r.jsx)(m.Z,{size:"medium",onClick:R,children:"Clear"}),(0,r.jsx)(m.Z,{size:"medium",variant:"contained",onClick:function(){return c((function(e){return!e}))},disabled:null===u.sel_activity||a,children:"Finish"})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(v.Z,{}),(0,r.jsx)("br",{}),null!==w&&(0,r.jsxs)(f.Z,{sx:Z.conditionLegend,style:{backgroundColor:l.tN[w.code],color:[l.MW.ABOVE_NORMAL.label,l.MW.WAY_BELOW_NORMAL.label].includes(w.code)?"#fff":"#000"},children:[(0,r.jsx)(b.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:w.label_full}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:w.rainfall})]})]})]}),(0,r.jsx)(h.ZP,{item:!0,xs:12,md:8,sx:Z.recsContainer,children:null!==u.sel_crop&&null!==u.sel_activity&&a?(0,r.jsx)(O.Z,{recommendations:_,title:u.sel_crop,subtitle:"Climate Resilient Agriculture Practices",recommendationsEng:"practice",recommendationsTag:"practice_tagalog"}):Object.values(u).filter((function(e){return e})).length>1?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:Q.map((function(e,t){var n,i,o={from:e.slice(e.indexOf("_")+1),label:["sel_day","sel_stage"].includes(e)?null!==(i=null===(n=u[e])||void 0===n?void 0:n.label)&&void 0!==i?i:"":u[e]};return null!==u[e]&&void 0!==u[e]?(0,r.jsx)(j,{info:o,show:t<Q.length-1,borderColor:"blue"},"card-opt-".concat(t)):(0,r.jsx)("div",{},"card-opt-".concat(t))}))}):(0,r.jsxs)(f.Z,{sx:Z.welcome,children:[(0,r.jsx)(s.default,{unoptimized:!0,src:(0,S.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:S.imageLoader,alt:"Empty data"}),(0,r.jsx)(b.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,r.jsx)(b.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}ee.propTypes={sel_options:u().object,optsprovinces:u().array,optsmunicipalities:u().array,optscrops:u().array,optsdays:u().array,optscropstages:u().array,optsactivities:u().array,recommendations:u().array,weathertoday:u().object,onSelectItemChange:u().func,onClickDateSelector:u().func,onResetClick:u().func};var te=ee,ne=n(4463),re=n(4640);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}var le={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:{id:0,from:"weather_condition",label:null,date:(new Date).toDateString()},loading:!1,error:""};var ae=function(e){var t,n,i,l=e.provinces,s=void 0===l?[]:l,c=(0,o.useState)(le),u=c[0],p=c[1],d=(0,o.useState)([]),f=d[0],m=d[1],g=(0,o.useState)([]),v=g[0],b=g[1],h=(0,o.useState)(null),y=h[0],x=h[1],_=(0,o.useState)([]),j=_[0],O=_[1],S=(0,o.useState)([]),Z=S[0],w=S[1],C=(0,o.useState)(!0),P=C[0],D=C[1],E=(0,o.useRef)(!1),A=(0,k.Z)(u.sel_province,s),T=(0,R.Z)(u.sel_province),L=T.cropcalendar,W=T.loading,N=T.error,F=(0,I.Z)(L,u.sel_municipality),B=(0,M.Z)(null!==(i=null===(t=u.sel_stage)||void 0===t?void 0:t.code)&&void 0!==i?i:null,null,Y.q.TENDAY),q=B.recommendations,V=B.farmoperations,H=B.loading,z=B.error,U=(0,ne.Z)(f,null===(n=u.sel_day)||void 0===n?void 0:n.full,F),G=U.cropslist,$=U.cropstagesbycrop,X=U.error,J=(0,re.Z)(u.sel_province,u.sel_municipality),K=J.days,Q=J.loading,ee=J.error;(0,o.useEffect)((function(){return E.current=!0,function(){E.current=!1}}),[]),(0,o.useEffect)((function(){s.length>0&&O((0,a.m)(s))}),[s]),(0,o.useEffect)((function(){D(W||Q||H)}),[W,Q,H]),(0,o.useEffect)((function(){if(""!==X||""!==z||""!==ee||""!==N){var e=X||z||ee||N;p((function(t){return oe({},t,{error:e})}))}else p((function(e){return oe({},e,{error:""})}))}),[X,N,z,ee]);var ie=function(e,t){var n=t.from,r=t.label;if(v.length>0&&b([]),Object.keys(t).includes("id"))switch(n){case"province":w([]),x(null),p(oe({},le,{sel_province:r}));break;case"municipality":w([]),m(L.filter((function(e){return e.municipality===r}))),p(oe({},u,{sel_municipality:r,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null}));break;case"day":w([]),x(K.find((function(e){return e.label===r}))),p(oe({},u,{sel_day:t,sel_month:null,sel_crop:null,sel_stage:null,sel_activity:null}));break;case"crop":w($[r]),p(oe({},u,{sel_crop:r,sel_month:null,sel_stage:null,sel_activity:null}));break;case"cropstage":p(oe({},u,{sel_stage:t,sel_activity:null}));break;case"activity":b(q.filter((function(e){return e.crop_stage===u.sel_stage.code&&e.farm_operation===r}))),p(oe({},u,{sel_activity:r}))}else"province"===n?(p(le),w([])):"municipality"===n?(p(oe({},u,{sel_municipality:null,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null})),w([])):"day"===n?(p(oe({},u,{sel_day:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),w([])):"crop"===n?(p(oe({},u,{sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),w([])):"cropstage"===n?p(oe({},u,{sel_stage:null,sel_activity:null})):"activity"===n&&p(oe({},u,{sel_activity:null}))};return(0,r.jsx)(te,{optsprovinces:j,optsmunicipalities:A,optscrops:G,optsdays:K,optscropstages:Z,optsactivities:V,sel_options:u,recommendations:v,weathertoday:y,loading:P,onSelectItemChange:ie,onClickDateSelector:function(e){var t=new Date(e).toDateString();t=t.substring(0,t.length-5),ie(null,{id:t,label:t,full:new Date(e),from:"day"})},onResetClick:function(){p(le),w([]),b([])}})};var se=function(e){var t=e.municipalities,n=void 0===t?[]:t,o=e.provinces,l=void 0===o?[]:o;return(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z,{sx:{boxShadow:"none"}}),(0,r.jsx)("div",{id:"seasonal-recommendations"}),(0,r.jsx)(i.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,r.jsx)(q,{municipalities:n,provinces:l})}),(0,r.jsx)("div",{id:"resilient-practices"}),(0,r.jsx)(i.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,r.jsx)(ae,{provinces:l})})]})},ce=n(3370);var ue=!0,pe=function(e){var t=e.provinces,n=void 0===t?[]:t,i=e.media;return(0,r.jsxs)("div",{children:[(0,r.jsx)(ce.Z,{title:"Agro-Climatic Advisory Portal - Bicol (ACAP-BICOL) Crop Recommendations",ogDescription:i.description,ogImageURL:i.url,ogURL:i.path}),(0,r.jsx)(se,{provinces:n})]})}},4463:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7294),i=n(7715),o=n(7179);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=(0,r.useState)([]),c=s[0],u=s[1],p=(0,r.useState)(null),d=p[0],f=p[1],m=(0,r.useState)([]),g=m[0],v=m[1],b=(0,r.useState)(""),h=b[0],y=b[1],x=(0,r.useState)(""),_=x[0],j=x[1],O=function(e,t){return e.findIndex((function(e){return e.code===t}))>=0},S=function(){u([]),v([]),f(null),y("")};return(0,r.useEffect)((function(){if(j(""),e&&t&&n.length>0){var r=e[0].municipality;if(r===h)return;var s=a(n),c=new Date(t),p=(0,i.Mn)(c,l);try{var d={},m=[];s.forEach((function(t){void 0===d[t.label]&&(d[t.label]=[]),Object.keys(p).forEach((function(n){var r=e.find((function(e){return e.crop===t.label}));if(!r)throw new Error("Cannot find cropping calendar for ".concat(t.label));var i=r[n];if(void 0===i||""===i)throw new Error("Crop stages data for ".concat(n," does not exist."));for(var l=i.split(","),a=0;a<p[n].length;a+=1)if(p[n][a]===o.Vs.FIRST_HALF){if(t.disabled=l[0]===o.HB,l[0]!==o.HB){var s={id:d[t.label].length,label:o.ax[l[0]],code:l[0],municipality:r.municipality};d[t.label].push(s),O(m,l[0])||m.push(s)}}else if(p[n][a]===o.Vs.SECOND_HALF&&(t.disabled=l[1]===o.HB,l[1]!==o.HB)){var c={id:d[t.label].length,label:o.ax[l[1]],code:l[1],municipality:r.municipality};d[t.label].push(c),O(m,l[1])||m.push(c)}}))})),y(r),f(d),u(s),v(m)}catch(g){S(),j(g.message)}}}),[e,t,n,h,l]),{cropslist:c,cropstagesbycrop:d,uniquecropstages:g,error:_}}},4640:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7294),i=n(9473),o=n(7426),l=n(6867),a=n(7715),s=n(901);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n=(0,r.useState)([]),c=n[0],p=n[1],d=(0,r.useState)(null),f=d[0],m=d[1],g=(0,r.useState)(""),v=g[0],b=g[1],h=(0,r.useState)(!1),y=h[0],x=h[1],_=(0,i.I0)(),j=(0,i.v9)((function(e){return e.tendayweather})),O=j.ids,S=j.status,Z=j.entities,w=j.error;return(0,r.useEffect)((function(){null!==e&&(b(""),_((0,l.R)(e)))}),[e,_]),(0,r.useEffect)((function(){b(w)}),[w]),(0,r.useEffect)((function(){x(S===s.G.PENDING)}),[S]),(0,r.useEffect)((function(){if(b(""),S===s.G.FULLFILLED&&O.length>0&&""===w&&null!==t){var e=Object.values(Z).find((function(e){return e.municipality===t}));if(void 0!==e){var n,r,i=JSON.parse(e.data),l=Object.values(o.MW);p(i.reduce((function(e,t,o){var s,c,p;return u(e).concat([{id:o,label:t.day_format,label_full:null===(s=(0,a.Ay)(t.day_format,i[9].day_format))||void 0===s?void 0:s.toDateString(),rainfall:t.rainfall,forecast:null!==(n=null===(c=l.find((function(e){return e.tenday===t.rainfall})))||void 0===c?void 0:c.sync)&&void 0!==n?n:"-",code:null!==(r=null===(p=l.find((function(e){return e.tenday===t.rainfall})))||void 0===p?void 0:p.label)&&void 0!==r?r:"-"}])}),[]));var c=new Date(1e3*i[0].date_start.seconds),d=(0,a.Mn)(c);m({months:d,date_start:c,date_range:i[0].date_range})}else{p([]),m(""),b("Weather data for the municipality is not available at the moment. Please verify that the municipality name is present in the 10-Day weather forecast.")}}}),[t,Z,O,S,w]),{days:c,summary:f,loading:y,error:v}}}},function(e){e.O(0,[6284,2866,9964,1903,6295,2882,3308,3523,3032,9774,2888,179],(function(){return t=7741,e(e.s=t);var t}));var t=e.O();_N_E=t}]);