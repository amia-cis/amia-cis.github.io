(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{6318:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cropping-calendar",function(){return r(4298)}])},3080:function(e,n,r){"use strict";var t=r(5893),o=r(7357),a=r(8456);n.Z=function(e){var n=e.text,r=void 0===n?"":n,c=e.size,i=void 0===c?24:c,l=e.children;return(0,t.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",height:"20vh"},children:[(0,t.jsxs)(o.Z,{sx:{width:"100%",textAlign:"center",marginTop:function(e){return e.spacing(12)},marginBottom:"32px",display:"flex",justifyContent:"center"},children:[(0,t.jsx)("span",{children:""!==r?r:"Loading..."})," \xa0",(0,t.jsx)(a.Z,{size:i})]}),l]})}},4298:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return _},default:function(){return R}});var t=r(4051),o=r.n(t),a=r(5893),c=r(7294),i=r(5861),l=r(6295),u=r(7357),s=r(6242),p=r(480),d=r(6886),f=r(6872),m=r(2890),g=r(1903),b=r(3080),h=r(7426),x={wrapper:{marginTop:function(e){return e.spacing(8)},marginBottom:function(e){return e.spacing(12)}},container:{maxWidth:"900px",margin:"auto",marginTop:function(e){return e.spacing(8)}},tabsContainer:{borderBottom:1,borderColor:"divider",marginBottom:function(e){return e.spacing(5)}},autocomplete:{maxWidth:"100%",marginTop:function(e){return e.spacing(1)}},autoMuni:{marginTop:function(e){return e.spacing(2)}},card:{backgroundColor:"rgba(255, 255, 255, 0.8)",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important",minHeight:"390px",minWidth:{xs:"200px",sm:"500px"},marginTop:function(e){return e.spacing(5)},padding:function(e){return e.spacing(2)},borderRadius:function(e){return e.spacing(1)},"& h5, h6":{marginBottom:function(e){return e.spacing(2)}}},calendar:{width:"100%",alignItems:"center","& .calendar-header-csystem":{fontSize:"16px",textAlign:"center"},"& .calendar-header-months":{display:"flex","& div":{width:"100%",textAlign:"center"}},"& .cal-mo-container":{height:"32px",display:"flex","& div":{width:"100%",textAlign:"center"}},"& .cropCalprep":{backgroundColor:"#fcca47"},"& .cropCalgrow":{backgroundColor:"orange"},"& .cropCalharv":{backgroundColor:"#233d4c"},"& .cropCalplant":{backgroundColor:"#a1c180"},"& .cropCalnocolor, .cropCalbkank":{backgroundColor:"#f7f7ff"},cellBorderColor:{cropCalprep:"#fcca47",cropCalgrow:"orange",cropCalharv:"#233d4c",cropCalplant:"#a1c180",cropCalnocolor:"#f7f7ff",cropCalbkank:"rgba(0, 0, 0, 0.4)"}},legend:{"& ul":{listStyle:"none","& li":{marginRight:"10px",fontSize:"14px"},span:{border:"1px solid #ccc",float:"left",width:"12px",height:"12px",margin:"4px"}}},errorMsg:{fontSize:"12px",color:"red"},infoMsg:{fontSize:"12px"}};function v(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){v(e,n,r[n])}))}return e}var j=function(e){var n=e.state,r=e.subcalendar,t=e.optsprovinces,o=e.optsmunicipalities,c=e.onSelectItemChange;return(0,a.jsxs)(s.Z,{variant:"outlined",sx:x.card,children:[(0,a.jsxs)(d.ZP,{container:!0,maxWidth:"lg",spacing:5,alignItems:"bottom",sx:{marginBottom:"48px"},children:[(0,a.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(i.Z,{variant:"h6",children:"Location Selector"}),(0,a.jsx)(l.Z,{disablePortal:!0,id:"province",size:"small",value:n.province,disabled:0===t.length||n.loading,options:t,renderInput:function(e){return(0,a.jsx)(g.Z,y({},e,{label:0===t.length?"Loading...":"Select a province"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return c(e,y({},n,{from:"province"}))}}),(0,a.jsx)(l.Z,{disablePortal:!0,id:"municipality",size:"small",value:n.municipality,disabled:0===o.length||n.loading,options:o,sx:x.autoMuni,renderInput:function(e){return(0,a.jsx)(g.Z,y({},e,{label:null===n.municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return c(e,y({},n,{from:"municipality"}))}})]})}),(0,a.jsx)(d.ZP,{item:!0,xs:12,md:4,children:(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(i.Z,{variant:"h6",children:"Crop Type"}),(0,a.jsxs)(m.Z,{row:!0,"aria-labelledby":"crop-calendar-croptype-selector",name:"crop-calendar-croptype-selector",children:[(0,a.jsx)(p.Z,{value:"rice",control:(0,a.jsx)(f.Z,{onClick:function(e){return c(e,{label:"Rice",from:"rice"})}}),label:"Rice",checked:"rice"===n.crop,disabled:null===n.municipality||n.loading}),(0,a.jsx)(p.Z,{value:"other_crops",control:(0,a.jsx)(f.Z,{onClick:function(e){return c(e,{label:"Other Crops",from:"other_crops"})}}),label:"Other Crops",checked:"other_crops"===n.crop,disabled:null===n.municipality||n.loading})]})]})})]}),n.loading?(0,a.jsx)(b.Z,{text:"Loading data..."}):""!==n.error?(0,a.jsx)(u.Z,{sx:x.errorMsg,children:"Error loading data."}):0===Object.keys(r).length&&null!==n.municipality&&null!==n.province?(0,a.jsx)(u.Z,{sx:x.infoMsg,children:"Data for the requested resource is not yet available."}):Object.keys(r).length>0?(0,a.jsxs)(u.Z,{children:[(0,a.jsxs)(d.ZP,{container:!0,sx:x.calendar,children:[(0,a.jsx)(d.ZP,{item:!0,xs:3,className:"calendar-header-csystem",children:(0,a.jsx)(i.Z,{variant:"subtitle1",children:(0,a.jsx)("strong",{children:"Cropping System"})})}),(0,a.jsx)(d.ZP,{item:!0,xs:9,className:"calendar-header-months",children:Object.values(h.re).map((function(e,n){return(0,a.jsx)(u.Z,{sx:{backgroundColor:"#092139",color:"#fff",padding:"8px"},children:e.format.substring(0,3)},"cal-mo-".concat(n))}))})]}),Object.keys(r).map((function(e,t){return(0,a.jsxs)("div",{children:[(0,a.jsxs)(d.ZP,{container:!0,sx:x.calendar,children:[(0,a.jsx)(d.ZP,{item:!0,xs:3,className:"calendar-header-csystem"}),(0,a.jsx)(d.ZP,{item:!0,xs:9,className:"calendar-header-months",children:Object.values(h.re).map((function(e,n){return(0,a.jsx)(u.Z,{className:"cal-mo-container",style:{borderRight:"1px solid rgba(0, 0, 0, 0.4)"},children:(0,a.jsx)("div",{className:"cropCalnocolor"})},"cal-mo-itm-".concat(n,"-1"))}))})]}),(0,a.jsxs)(d.ZP,{container:!0,sx:x.calendar,children:[(0,a.jsx)(d.ZP,{item:!0,xs:3,className:"calendar-header-csystem",children:e}),(0,a.jsx)(d.ZP,{item:!0,xs:9,className:"calendar-header-months",children:Object.values(h.re).map((function(t,o){var c=r[e][t.code].length<=1?"1px solid rgba(0, 0, 0, 0.4)":"",i=x.calendar.cellBorderColor[r[e][t.code][0]],l=x.calendar.cellBorderColor[r[e][t.code][1]];return"rice"===n.crop?(i=null===i||void 0===i?void 0:i.replace(/orange/g,"#a1c180"),l=null===l||void 0===l?void 0:l.replace(/orange/g,"#a1c180")):"other_crops"===n.crop&&(i=null===i||void 0===i?void 0:i.replace(/orange/g,"#f7f7ff"),l=null===l||void 0===l?void 0:l.replace(/orange/g,"#f7f7ff")),(0,a.jsxs)(u.Z,{className:"cal-mo-container",style:{borderRight:""!==c?c:l.includes("#f7f7ff")?"1px solid rgba(0, 0, 0, 0.4)":"1px solid ".concat(l)},children:[(0,a.jsx)("div",{style:{backgroundColor:i||"#f7f7ff"}}),(0,a.jsx)("div",{style:{backgroundColor:l||"#f7f7ff"}})]},"cal-mo-itm-".concat(o,"-1"))}))})]},"cal-row-".concat(t))]},"cal-row-".concat(e))})),(0,a.jsxs)(d.ZP,{container:!0,style:{marginTop:"32px"},children:[(0,a.jsx)(d.ZP,{item:!0,xs:3,className:"calendar-header-csystem"}),(0,a.jsxs)(d.ZP,{item:!0,xs:9,sx:x.legend,className:"calendar-header-months",children:[(0,a.jsx)("strong",{children:"Legend"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{style:{backgroundColor:"#fcca47"}}),"Land Preparation"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{style:{backgroundColor:"#a1c180"}}),"Planting"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{style:{backgroundColor:"#233d4c"}}),"Harvesting"]})]})]})]})]}):(0,a.jsx)(u.Z,{sx:x.infoMsg,children:"Please select a province and a municipality."})]})},C=r(2848);function w(e,n,r,t,o,a,c){try{var i=e[a](c),l=i.value}catch(u){return void r(u)}i.done?n(l):Promise.resolve(l).then(t,o)}function O(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function c(e){w(a,t,o,c,i,"next",e)}function i(e){w(a,t,o,c,i,"throw",e)}c(void 0)}))}}function P(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){P(e,n,r[n])}))}return e}var Z={province:null,municipality:null,crop:"rice",loading:!0,error:""};var _=!0,R=function(e){var n=(0,c.useState)(Z),r=n[0],t=n[1],l=(0,c.useState)(e.provinces),u=l[0],s=(l[1],(0,c.useState)([])),p=s[0],d=s[1],f=(0,c.useState)([]),m=f[0],g=f[1],b=(0,c.useState)([]),x=b[0],v=b[1],y=(0,c.useRef)(!1);(0,c.useEffect)((function(){return y.current=!0,function(){y.current=!1}}),[]),(0,c.useEffect)((function(){var n=function(){var n=O(o().mark((function n(){var r,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[];try{r=e.municipalitliesList.filter((function(e){return e.province===u[2].label})).map((function(e){return{id:e.id,name:e.name}})),y.current&&d((function(e){return r.map((function(e){return{id:e.id,label:e.name}}))}))}catch(o){t((function(e){return k({},e,{loading:!1,error:o.message})}))}if(!(r.length>0)){n.next=13;break}return n.prev=3,n.next=6,(0,C.OP)(u[2].label,r[0].name);case 6:a=n.sent,y.current&&(t((function(e){return k({},e,{loading:!1,province:u[2],municipality:{id:r[0].id,label:r[0].name}})})),g((function(e){return a}))),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),t((function(e){return k({},e,{loading:!1,error:n.t0.message})}));case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();n()}),[u,e.municipalitliesList]),(0,c.useEffect)((function(){m.length>0&&w(null,{label:"Rice",from:"rice"})}),[m]);var w=function(){var n=O(o().mark((function n(a,c){var i,l,u,s,p,f,b,x;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=c.label,l=c.from,["rice","other_crops"].includes(l)||g([]),void 0===i){n.next=30;break}n.t0=l,n.next="province"===n.t0?6:"municipality"===n.t0?8:"rice"===n.t0||"other_crops"===n.t0?21:27;break;case 6:try{t(k({},r,(P(u={loading:!0},l,c),P(u,"municipality",null),u))),v([]),s=e.municipalitliesList.filter((function(e){return e.province===i})).map((function(e){return{id:e.id,label:e.name}})),y.current&&(t((function(e){return k({},e,{loading:!1})})),d((function(e){return s})))}catch(o){t(k({},r,{loading:!1,error:o.message}))}return n.abrupt("break",28);case 8:return n.prev=8,t(k({},r,P({loading:!0},l,c))),v([]),n.next=13,(0,C.OP)(r.province.label,i);case 13:p=n.sent,y.current&&(t((function(e){return k({},e,{loading:!1})})),g((function(e){return p}))),n.next=20;break;case 17:n.prev=17,n.t1=n.catch(8),t(k({},r,{loading:!1,error:n.t1.message}));case 20:return n.abrupt("break",28);case 21:return t((function(e){return k({},e,{crop:l})})),f="rice"===l?["Rainfed Rice","Irrigated Rice","Rice"]:["Cassava","Lowland Vegetable","Corn"],b=m.filter((function(e){return e.province===r.province.label&&e.municipality===r.municipality.label&&f.includes(e.crop)})),x=b.reduce((function(e,n){var r=Object.values(h.re).reduce((function(e,r){var t=""===n[r.code]?[]:2===n[r.code].split(",").length?n[r.code].split(",").map((function(e){return"cropCal".concat(e.length>0?e:"nocolor")})):["cropCal".concat(n[r.code]),"cropCal".concat(n[r.code])];return k({},e,P({},r.code,t))}),{});return void 0!==e[n.cropping_system]&&Object.values(h.re).forEach((function(t){var o=t.code;e[n.cropping_system][o].every((function(e){return r[o].includes(e)}))||e[n.cropping_system][o].filter((function(e){return!r[o].includes(e)})).forEach((function(e){r[o].push(e)}))})),k({},e,P({},n.cropping_system,r))}),{}),v(x),n.abrupt("break",28);case 27:return n.abrupt("break",28);case 28:n.next=41;break;case 30:n.t2=l,n.next="province"===n.t2?33:"municipality"===n.t2?37:40;break;case 33:return t(k({},r,{province:null,municipality:null})),d([]),v([]),n.abrupt("break",41);case 37:return t(k({},r,{municipality:null})),v([]),n.abrupt("break",41);case 40:return n.abrupt("break",41);case 41:case"end":return n.stop()}}),n,null,[[8,17]])})));return function(e,r){return n.apply(this,arguments)}}();return(0,a.jsxs)("div",{id:"bacap-cropping-calendar",children:[(0,a.jsx)(i.Z,{variant:"h4",children:"Cropping Calendar"}),(0,a.jsx)(i.Z,{variant:"label",children:"Cropping Calendar page"}),(0,a.jsx)(j,{state:r,subcalendar:x,optsprovinces:u,optsmunicipalities:p,optscroptsURL:e.downloadurl,onSelectItemChange:w})]})}},2848:function(e,n,r){"use strict";r.d(n,{OP:function(){return j}});var t=r(4051),o=r.n(t),a=r(4763);function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,n,r,t,o,a,c){try{var i=e[a](c),l=i.value}catch(u){return void r(u)}i.done?n(l):Promise.resolve(l).then(t,o)}function l(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function c(e){i(a,t,o,c,l,"next",e)}function l(e){i(a,t,o,c,l,"throw",e)}c(void 0)}))}}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){s(e,n,r[n])}))}return e}function f(e,n){return!n||"object"!==g(n)&&"function"!==typeof n?c(e):n}function m(e,n){return m=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},m(e,n)}var g=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,t=p(e);if(n){var o=p(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return f(this,r)}}var h="misc_crop_calendars",x="n_cropping_calendar_merged",v=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&m(e,n)}(r,e);var n=b(r);function r(){var e;u(this,r);var t=c(e=n.apply(this,arguments));s(c(e),"getCropCalendarsHi",l(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCollectionData(h,"filename");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var a=c(e);s(c(e),"getCroppingCalendarMerged",l(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getCollectionData(x,"id");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var i=c(e);return s(c(e),"getCroppingCalendarSimplified",function(){var e=l(o().mark((function e(n,r){var t,a,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n&&void 0!==r){e.next=2;break}return e.abrupt("return");case 2:return t=i.collection(i.db,x),a=i.query(t,i.where("province","==",n),i.where("municipality","==",r)),e.next=6,i.getDocs(a);case 6:return c=e.sent,l=c.docs.map((function(e){return d({},e.data())})),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),e}return r}(a.Z),y=new v,j=(y.getCropCalendarsHi.bind(y),y.getCroppingCalendarMerged.bind(y),y.getCroppingCalendarSimplified.bind(y))},7426:function(e,n,r){"use strict";function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}r.d(n,{MW:function(){return a},re:function(){return i},tN:function(){return c},MZ:function(){return l}});var o,a={DRIER:{label:"drier",sync:"Way Below Normal"},NORMAL:{label:"normal",sync:"Below to Near Normal"},WETTER:{label:"wetter",sync:"Above Normal"}},c=(t(o={},a.DRIER.label,"red"),t(o,a.NORMAL.label,"yellow"),t(o,a.WETTER.label,"blue"),o),i={JAN:{code:"jan",format:"January"},FEB:{code:"feb",format:"February"},MAR:{code:"mar",format:"March"},APR:{code:"apr",format:"April"},MAY:{code:"may",format:"May"},JUN:{code:"jun",format:"June"},JUL:{code:"jul",format:"July"},AUG:{code:"aug",format:"August"},SEP:{code:"sep",format:"September"},OCT:{code:"oct",format:"October"},NOV:{code:"nov",format:"November"},DEC:{code:"dec",format:"December"}},l={PREP:"Land Preparation",PLANT:"Planting",GROW:"Growing",HARV:"Harvesting"}}},function(e){e.O(0,[810,774,888,179],(function(){return n=6318,e(e.s=n);var n}));var n=e.O();_N_E=n}]);