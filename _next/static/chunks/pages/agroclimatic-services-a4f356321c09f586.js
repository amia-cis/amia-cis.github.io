(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{7741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return t(3142)}])},9758:function(e,n,t){"use strict";var r=t(5893),i=t(5113);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,r.jsx)(i.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({},e,{elevation:15}))}},1033:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(5893),i=t(5675),a=t(7357),l=t(5861),o=t(120),c={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(4)}}};var s=function(e){var n=e.message,t=void 0===n?"Failed to load data":n,s=e.style,u=void 0===s?{}:s;return(0,r.jsxs)(a.Z,{sx:c.container,style:u,children:[(0,r.jsx)(i.default,{unoptimized:!0,src:(0,o.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:o.imageLoader,alt:"Empty data"}),(0,r.jsx)(l.Z,{variant:"subtitle1",children:t})]})}},6451:function(e,n,t){"use strict";var r=t(5893),i=t(5113);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=(0,t(1496).ZP)((function(e){return(0,r.jsx)(i.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{padding:n.spacing(3),borderRadius:n.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}));n.Z=l},4010:function(e,n,t){"use strict";var r=t(5893),i=t(5113);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=(0,t(1496).ZP)((function(e){return(0,r.jsx)(i.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{padding:n.spacing(3),borderRadius:n.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(n.palette.bacap.border)}}));n.Z=l},3142:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return Oe},default:function(){return Se}});var r=t(5893),i=t(6451),a=t(4051),l=t.n(a),o=t(7294),c=t(2848),s=t(1652),u=t(4680),p=t(560),d=t(5675),f=t(1903),b=t(6295),m=t(7357),v=t(1057),h=t(7720),g=t(5861),x=t(6886),y=t(6624),_=t(710),j=t(3578),O=t(6229),S=t(5113),w=t(9758),Z=t(6613),C={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-child(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:function(e){return e.spacing(2)},margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}};var k=function(e){var n=e.info,t=e.show,i=void 0===t||t,a=e.borderColor,l=void 0===a?"#cc00cc":a;return(0,r.jsxs)(m.Z,{sx:C.container,children:[(0,r.jsxs)(m.Z,{sx:C.cardContainer,style:{borderColor:l},children:[(0,r.jsx)(g.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===n.from?"crop stage":n.from)}),(0,r.jsx)(g.Z,{variant:"subtitle1",children:n.label})]}),i&&(0,r.jsx)(Z.Z,{size:24,sx:C.arrowIcon,style:{color:l}})]})},P=t(1033),R=t(120),E={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"}},autocomplete:{maxWidth:{sm:"100%",md:"310px"},marginTop:function(e){return e.spacing(1)}},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:function(e){return e.spacing(10)},textAlign:"center","& h5":{marginTop:function(e){return e.spacing(2)}}}},D=t(7426);function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){A(e,n,t[n])}))}return e}var M=["sel_province","sel_municipality","sel_crop","sel_month","sel_stage","sel_activity"];var I=function(e){var n=(0,o.useState)(0),t=n[0],i=n[1],a=(0,o.useRef)(!0),l=(0,o.useState)(!0),c=l[0],s=l[1],u=e.sel_options,p=e.provinces,Z=e.recommendations,C=e.onSelectItemChange,A=e.optsmunicipalities,I=e.optscrops,T=e.optscropstages,N=e.optsactivities,W=e.optsmonths,Y=e.steps,B=e.getStepLabel,F=e.isContinueDisabled;(0,o.useEffect)((function(){return a.current=!0,function(){a.current=!1}}),[]);var V=function(){s(!1),setTimeout((function(){(a.current=!0)&&s(!0)}),500),i((function(e){return e+1}))},q=function(){i((function(e){return e-1}))},H=function(){var e="Loading...";return p.length>0&&(e=null===u.sel_province?"Select a province":"Province"),e};return(0,r.jsxs)(m.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,r.jsx)(g.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,r.jsx)(g.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,r.jsxs)(x.ZP,{container:!0,spacing:2,sx:E.container,children:[(0,r.jsxs)(x.ZP,{item:!0,xs:12,md:4,sx:E.selectContainer,children:[(0,r.jsxs)(m.Z,{sx:{minWidth:"100%",paddingRight:function(e){return e.spacing(2)}},children:[(0,r.jsx)(y.Z,{activeStep:t,orientation:"vertical",children:Y.map((function(e,n){return(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(j.Z,{optional:5===n?(0,r.jsx)(g.Z,{variant:"caption",children:"Last step"}):null,children:B(n)}),(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(g.Z,{children:e.description}),0===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"province",value:u.sel_province,disabled:0===p.length,options:p,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,L({},e,{label:H()}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return C(e,L({},n,{from:"province"}))}}),1===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"municipality",value:u.sel_municipality,disabled:0===A.length||u.loading,options:A,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,L({},e,{label:null===u.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return C(e,L({},n,{from:"municipality"}))}}),2===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"crop",value:u.sel_crop,disabled:0===I.length,options:I,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,L({},e,{label:null===u.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return C(e,L({},n,{from:"crop"}))}}),3===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"month",value:u.sel_month,disabled:0===W.length||null===u.sel_crop,options:W,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,L({},e,{label:null===u.sel_month?"Select a Month":"Month"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return C(e,L({},n,{from:"month"}))}}),4===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"cropstage",value:u.sel_stage,disabled:0===T.length,options:T,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,L({},e,{label:null===u.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return C(e,L({},n,{from:"cropstage"}))}}),5===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"activity",value:u.sel_activity,disabled:0===N.length,options:N,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,L({},e,{label:null===u.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return C(e,L({},n,{from:"activity"}))}}),""!==u.error&&(0,r.jsx)(g.Z,{variant:"caption",sx:{color:"red"},children:u.error}),(0,r.jsx)(m.Z,{sx:{mb:2,marginTop:"24px"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{variant:"contained",disabled:F(n)||u.loading||!c,onClick:V,children:n===Y.length-1?"Finish":"Continue"}),(0,r.jsx)(v.Z,{disabled:0===n,onClick:q,children:"Back"})]})})]})]},e.label)}))}),t===Y.length&&(0,r.jsxs)(S.Z,{square:!0,elevation:0,sx:{p:3},children:[(0,r.jsx)(g.Z,{children:"All steps completed"}),(0,r.jsx)(v.Z,{onClick:function(){i(0),C(null,{from:"province"})},sx:{mt:1,mr:1},children:"Restart"}),(0,r.jsx)(v.Z,{onClick:q,sx:{mt:1,mr:1},children:"Back"})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{}),(0,r.jsx)("br",{}),null!==u.sel_month&&(0,r.jsxs)(m.Z,{sx:E.conditionLegend,style:{backgroundColor:D.tN[u.sel_condition.label],color:[D.MW.ABOVE_NORMAL.label,D.MW.WAY_BELOW_NORMAL.label].includes(u.sel_condition.label)?"#fff":"#000"},children:[(0,r.jsx)(g.Z,{variant:"subtitle2",children:"Rainfall Condition"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:u.sel_month.label})," ",(0,r.jsx)("br",{}),(0,r.jsxs)("span",{children:[u.sel_condition.format," (",u.sel_condition.id,"%)"]})]})]})]}),(0,r.jsx)(x.ZP,{item:!0,xs:12,md:8,sx:E.recsContainer,children:null!==u.sel_crop&&null!==u.sel_activity&&6===t?(0,r.jsxs)("div",{children:[null!==u.sel_crop&&null!==u.sel_activity&&(0,r.jsxs)(g.Z,{variant:"h5",sx:{display:"novalues"===u.sel_activity.id?"none":"flex"},children:[u.sel_crop.label," Recommendations"]}),Z.length>0?Z.map((function(e,n){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{children:[u.sel_condition.format,"Rice"===u.sel_crop.label?" (".concat(e.crop,")"):""]}),e.recommendations().map((function(e,t){return e.ul?(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:e.id}),e.subs.length>0&&(0,r.jsx)("ul",{children:e.subs.map((function(e,t){return(0,r.jsx)("li",{children:e},"sub-".concat(n,"-").concat(t))}))})]},"main-".concat(n,"-").concat(t)):(0,r.jsx)("p",{children:e.id},"main-".concat(n,"-").concat(t))}))]},"rec-".concat(n))})):(0,r.jsx)(P.Z,{message:"We cannot find recommendations for your selected options."})]}):Object.values(u).filter((function(e){return e})).length>1?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:M.map((function(e,n){return null!==u[e]&&void 0!==u[e].from&&"weather_condition"!==u[e].from?(0,r.jsx)(k,{info:u[e],show:n<M.length-1},"card-opt-".concat(n)):(0,r.jsx)("div",{},"card-opt-".concat(n))}))}):(0,r.jsxs)(m.Z,{sx:E.welcome,children:[(0,r.jsx)(d.default,{unoptimized:!0,src:(0,R.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:R.imageLoader,alt:"Empty data"}),(0,r.jsx)(g.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,r.jsx)(g.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})},T=t(7682),N=[{label:"Select a province",description:"Select a province within the Bicol region.",opt_name:"sel_province"},{label:"Select a municipality",description:"Select a municipality included in the province you have selected on step no. 1.",opt_name:"sel_municipality"},{label:"Select a crop type",description:"Listed below are available crops for your selected province and municipality.",opt_name:"sel_crop"},{label:"Select a month",description:"Select a target month from the current Seasonal Weather Forecast.",opt_name:"sel_month"},{label:"Select a crop stage",description:"Listed below are the available crop stages for your selected crop on the target month.",opt_name:"sel_stage"},{label:"Select an activity",description:"Here are available activities for the previously-selected parameters.",opt_name:"sel_activity"}];function W(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Y(e,n,t,r,i,a,l){try{var o=e[a](l),c=o.value}catch(s){return void t(s)}o.done?n(c):Promise.resolve(c).then(r,i)}function B(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){B(e,n,t[n])}))}return e}function V(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);l=!0);}catch(c){o=!0,i=c}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return a}}(e,n)||H(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,n){if(e){if("string"===typeof e)return W(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W(e,n):void 0}}var J={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_condition:{id:0,from:"weather_condition",label:D.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""};var U=function(e){var n=e.municipalities,t=void 0===n?[]:n,i=V((0,T.ky)(u.o.STATIC_RECOMMENDATIONS,"data"),2),a=i[0],d=i[1],f=(0,T.m$)(p.M.WEATHER_FORECASTS,"bicol",p.M.SUB_SEASONAL,"name"),b=f.documents,m=f.loading,v=(0,o.useState)([]),h=v[0],g=v[1],x=(0,o.useState)([]),y=x[0],_=x[1],j=(0,o.useState)([]),O=j[0],S=j[1],w=(0,o.useState)([]),Z=w[0],C=w[1],k=(0,o.useState)([]),P=k[0],R=k[1],E=(0,o.useState)({}),A=E[0],L=E[1],M=(0,o.useState)(J),W=M[0],H=M[1],U=(0,o.useState)([]),z=U[0],X=U[1],$=(0,o.useState)([]),K=$[0],G=$[1],Q=(0,o.useState)([]),ee=Q[0],ne=Q[1],te=(0,o.useState)([]),re=te[0],ie=te[1],ae=(0,o.useState)([]),le=ae[0],oe=ae[1],ce=(0,o.useRef)(!1);(0,o.useEffect)((function(){return ce.current=!0,function(){ce.current=!1}}),[]),(0,o.useEffect)((function(){if(t.length>0&&!m&&!d){var e={};b.forEach((function(n){var t=n.name.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");e[t]={},n.months.forEach((function(n){var r=Object.values(D.MW).find((function(e){return e.label===n.con}));e[t][n.mo]={label:n.con,format:r.sync,val:n.val}}))}));var n=[];b[0].mos.forEach((function(e){n.push({id:D.re[e.toUpperCase()].code,label:D.re[e.toUpperCase()].format,disabled:!1})}));var r={},i=[];t.forEach((function(e,n){void 0===r[e.province]?(i.push({id:n,label:e.province}),r[e.province]=[{id:0,label:e.name}]):r[e.province].push({id:r[e.province].length,label:e.name})})),ce.current&&(_(r),g(i),oe(n),L(e))}}),[t,b,m,d]);var se=function(){var e,n=(e=l().mark((function e(n,t){var r,i,o,u,p,d,f,b,m,v,h,g,x,_,j,w,k,P,E,L,M;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.from,i=t.label,R([]),!Object.keys(t).includes("id")){e.next=82;break}e.t0=r,e.next="province"===e.t0?6:"municipality"===e.t0?12:"crop"===e.t0?45:"month"===e.t0?54:"cropstage"===e.t0?63:"activity"===e.t0?68:79;break;case 6:return H(F({},W,{sel_province:t,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),X(y[i]),G([]),ne([]),ie([]),e.abrupt("break",80);case 12:return ne([]),ie([]),o=[],e.prev=15,H(F({},W,{loading:!0,error:""})),e.next=19,(0,s.$K)(W.sel_province.label,i);case 19:u=e.sent,((o=u.map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n}))).includes("Rainfed Rice")||o.includes("Irrigated Rice"))&&o.push("Rice"),ce.current&&S((function(e){return u})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(15),H((function(n){return F({},n,{loading:!1,error:e.t1.message})}));case 28:if(0!==o.length){e.next=31;break}return H((function(e){return F({},e,{loading:!1,error:"There was an error loading data."})})),e.abrupt("return");case 31:return e.prev=31,e.next=34,(0,c.OP)(W.sel_province.label,i);case 34:p=e.sent,d=[],(f=p.map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n}))).forEach((function(e,n){d.push({id:n,label:e,disabled:!o.includes(e)})})),ce.current&&(b=0===f.length?{id:"novalues",label:"No crop types for ".concat(i)}:null,H(F({},W,{sel_municipality:t,sel_crop:b,sel_stage:null,sel_activity:null,sel_month:null,loading:!1,error:""})),ne(d),G((function(e){return d})),C((function(e){return p}))),e.next=44;break;case 41:e.prev=41,e.t2=e.catch(31),H((function(n){return F({},n,{loading:!1,error:e.t2.message})}));case 44:return e.abrupt("break",80);case 45:return ne([]),ie([]),H(F({},W,{sel_crop:t,sel_stage:null,sel_activity:null,sel_month:null})),m=[],Z.filter((function(e){return e.crop===i&&e.province===W.sel_province.label&&e.municipality===W.sel_municipality.label})).forEach((function(e){le.forEach((function(n){""===e[n.id]||m.includes(n.id)||m.push(n.id)}))})),v=q(le),le.forEach((function(e,n){v[n].disabled=!m.includes(e.id)})),oe(v),e.abrupt("break",80);case 54:return h=A[W.sel_province.label][t.id],g=h.label,x=h.val,_=h.format,ie([]),j=[],w=[],Z.forEach((function(e,n){var r=Object.values(D.re).find((function(e){return e.format===t.label})).code;if(""!==e[r]&&e.crop===W.sel_crop.label)for(var i=function(e){if(a[e].length>0&&!j.includes(a[e])){j.push(a[e]);var n=O.filter((function(n){return n.stage===D.MZ[a[e].toUpperCase()]&&("Rice"===W.sel_crop.label?["Irrigated Rice","Rainfed Rice"].includes(n.crop):n.crop===W.sel_crop.label)})).map((function(e){return e.activity})).filter((function(e,n,t){return t.indexOf(e)==n}));w.push({id:w.length,label:D.MZ[a[e].toUpperCase()],disabled:0===n.length})}},a=e[r].split(","),l=0;l<a.length;l+=1)i(l)})),k=0===w.length?{id:"novalues",label:"No crop stage for ".concat(i)}:null,ne(w),H(F({},W,{sel_month:t,sel_stage:k,sel_activity:null,sel_condition:{id:x,format:_,label:g}})),e.abrupt("break",80);case 63:return P=O.filter((function(e){return e.stage===i&&("Rice"===W.sel_crop.label?["Irrigated Rice","Rainfed Rice"].includes(e.crop):e.crop===W.sel_crop.label)})).map((function(e){return e.activity})).filter((function(e,n,t){return t.indexOf(e)==n})),E=0===P.length?{id:"novalues",label:"No activities for selected options"}:null,H(F({},W,{sel_stage:t,sel_activity:E})),ie((function(e){return P.map((function(e,n){return{id:n,label:e}}))})),e.abrupt("break",80);case 68:e.t3=regeneratorRuntime.keys(W);case 69:if((e.t4=e.t3()).done){e.next=75;break}if(L=e.t4.value,null!==W[L]||"sel_activity"===L){e.next=73;break}return e.abrupt("return");case 73:e.next=69;break;case 75:return M=O.filter((function(e){return e.activity===i&&e.stage===W.sel_stage.label&&("Rice"===W.sel_crop.label?["Irrigated Rice","Rainfed Rice"].includes(e.crop):e.crop===W.sel_crop.label)})).map((function(e){return{province:e.province,municipality:e.municipality,crop:e.crop,stage:e.stage,activity:e.activity,recommendations:function(){switch(W.sel_condition.label){case D.MW.BELOW_NORMAL.label:case D.MW.NEAR_NORMAL.label:return JSON.parse(e.normal).map((function(e){return{id:a.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return a.subs.find((function(n){return n.id===e})).description}))}}));case D.MW.ABOVE_NORMAL.label:return JSON.parse(e.wetter).map((function(e){return{id:a.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return a.subs.find((function(n){return n.id===e})).description}))}}));case D.MW.WAY_BELOW_NORMAL.label:return JSON.parse(e.drier).map((function(e){return{id:a.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return a.subs.find((function(n){return n.id===e})).description}))}}))}}}})),H(F({},W,{sel_activity:t})),R(M),e.abrupt("break",80);case 79:return e.abrupt("break",80);case 80:e.next=83;break;case 82:"province"===r?(H(J),X([]),G([]),ne([]),ie([])):"municipality"===r?(H(F({},W,{sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),G([]),ne([]),ie([])):"crop"===r?(H(F({},W,{sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null})),ne([]),ie([])):"month"===r?(H(F({},W,B({sel_month:null,sel_stage:null,sel_activity:null},"sel_activity",null))),ne([]),ie([])):"cropstage"===r?(H(F({},W,{sel_stage:null,sel_activity:null})),ie([])):"activity"===r&&H(F({},W,{sel_activity:null}));case 83:case"end":return e.stop()}}),e,null,[[15,25],[31,41]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function l(e){Y(a,r,i,l,o,"next",e)}function o(e){Y(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return(0,r.jsx)(I,{sel_options:W,provinces:h,recommendations:P,optsmunicipalities:z,optscrops:K,optscropstages:ee,optsactivities:re,optsmonths:le,steps:N,onSelectItemChange:se,getStepLabel:function(e){var n=N[e].opt_name,t=null===W[n]?N[e].label:"".concat(N[e].label,": ").concat(W[n].label);return null!==W[n]&&"novalues"===W[n].id?N[e].label:t},isContinueDisabled:function(e){switch(e){case 0:return null===W.sel_province;case 1:return null===W.sel_municipality;case 2:return null===W.sel_crop||"novalues"===W.sel_crop.id;case 3:return null===W.sel_month;case 4:return null===W.sel_stage||"novalues"===W.sel_stage.id;case 5:return null===W.sel_activity||"novalues"===W.sel_activity.id;default:return!1}}})},z=t(9473),X=t(7484),$=t.n(X),K=t(6829),G=t(2359),Q=t(4818);function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ne=function(e){var n=e.value,t=void 0===n?null:n,i=e.startDate,a=e.endDate,l=e.handleClick,c=e.disableCurrent,s=(0,o.useState)(null),u=s[0],p=s[1],d=new Date("".concat(i,", ").concat((new Date).getFullYear())),b=new Date("".concat(a,", ").concat((new Date).getFullYear()));return(0,o.useEffect)((function(){var e=t;null!==t&&(e=$()(new Date("".concat(t.label,", ").concat((new Date).getFullYear())))),p(e)}),[t]),(0,r.jsx)(G._,{dateAdapter:K.y,children:(0,r.jsx)(Q.M,{minDate:$()(d),maxDate:$()(b),label:"Date",value:u,disablePast:!0,openTo:"day",reduceAnimations:!0,shouldDisableDate:function(e){return!!c&&$()(e).format("YYYY/MM/DD")===$()().format("YYYY/MM/DD")},onChange:function(e){return function(e){var n=$()(e).format("YYYY/MM/DD");"Invalid Date"!==n&&($()(n).isBefore($()(d))||$()(n).isAfter($()(b))||l&&l(n))}(e)},renderInput:function(e){return(0,r.jsx)(f.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}({},e,{sx:{marginTop:"8px",width:"100%"},onKeyDown:function(e){e.preventDefault()}}))}})})};function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){te(e,n,t[n])}))}return e}var ie=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];var ae=function(e){var n=(0,o.useState)(0),t=n[0],i=n[1],a=(0,o.useRef)(!0),l=(0,o.useState)(!0),c=l[0],s=l[1],u=e.sel_options,p=e.isTenLoaded,Z=e.provinces,C=e.recommendations,A=e.onSelectItemChange,L=e.optsmunicipalities,M=e.optscrops,I=e.optscropstages,T=e.optsactivities,N=e.optsdays,W=e.steps,Y=e.getStepLabel,B=e.isContinueDisabled,F=e.onClickDateSelector;(0,o.useEffect)((function(){return a.current=!0,function(){a.current=!1}}),[]);var V=function(){s(!1),setTimeout((function(){(a.current=!0)&&s(!0)}),500),i((function(e){return e+1}))},q=function(){i((function(e){return e-1}))},H=function(){var e="Loading...";return Z.length>0&&(e=null===u.sel_province?"Select a province":"Province"),e};return(0,r.jsxs)(m.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,r.jsx)(g.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,r.jsx)(g.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,r.jsxs)(x.ZP,{container:!0,spacing:2,sx:E.container,children:[(0,r.jsxs)(x.ZP,{item:!0,xs:12,md:4,sx:E.selectContainer,children:[(0,r.jsxs)(m.Z,{sx:{minWidth:"100%",paddingRight:function(e){return e.spacing(2)}},children:[(0,r.jsx)(y.Z,{activeStep:t,orientation:"vertical",children:W.map((function(e,n){return(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(j.Z,{optional:5===n?(0,r.jsx)(g.Z,{variant:"caption",children:"Last step"}):null,children:Y(n)}),(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(g.Z,{children:e.description}),0===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"province",value:u.sel_province,disabled:0===Z.length,options:Z,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,re({},e,{label:H()}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return A(e,re({},n,{from:"province"}))}}),1===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"municipality",value:u.sel_municipality,disabled:0===L.length||u.loading,options:L,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,re({},e,{label:null===u.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return A(e,re({},n,{from:"municipality"}))}}),2===n&&10===N.length&&(0,r.jsx)(ne,{value:u.sel_day,startDate:N[0].label,endDate:N[9].label,disableCurrent:!0,handleClick:F}),3===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"crop",value:u.sel_crop,disabled:0===M.length,options:M,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,re({},e,{label:null===u.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return A(e,re({},n,{from:"crop"}))}}),4===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"cropstage",value:u.sel_stage,disabled:0===I.length,options:I,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,re({},e,{label:null===u.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return A(e,re({},n,{from:"cropstage"}))}}),5===n&&(0,r.jsx)(b.Z,{disablePortal:!0,id:"activity",value:u.sel_activity,disabled:0===T.length,options:T,sx:E.autocomplete,PaperComponent:w.Z,renderInput:function(e){return(0,r.jsx)(f.Z,re({},e,{label:null===u.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return A(e,re({},n,{from:"activity"}))}}),""!==u.error&&(0,r.jsxs)(g.Z,{variant:"caption",sx:{color:"red"},children:[(0,r.jsx)("br",{}),u.error]}),(0,r.jsx)(m.Z,{sx:{mb:2,marginTop:"24px"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{variant:"contained",disabled:B(n)||u.loading||!c||!p,onClick:V,children:n===W.length-1?"Finish":"Continue"}),(0,r.jsx)(v.Z,{disabled:0===n,onClick:q,children:"Back"})]})})]})]},e.label)}))}),t===W.length&&(0,r.jsxs)(S.Z,{square:!0,elevation:0,sx:{p:3},children:[(0,r.jsx)(g.Z,{children:"All steps completed"}),(0,r.jsx)(v.Z,{onClick:function(){i(0),A(null,{from:"province"})},sx:{mt:1,mr:1},children:"Restart"}),(0,r.jsx)(v.Z,{onClick:q,sx:{mt:1,mr:1},children:"Back"})]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{}),(0,r.jsx)("br",{}),null!==u.sel_condition.label&&(0,r.jsxs)(m.Z,{sx:E.conditionLegend,style:{backgroundColor:D.tN[u.sel_condition.label],color:[D.MW.ABOVE_NORMAL.label,D.MW.WAY_BELOW_NORMAL.label].includes(u.sel_condition.label)?"#fff":"#000"},children:[(0,r.jsx)(g.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{children:u.sel_condition.date}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:u.sel_condition.id})]})]})]}),(0,r.jsx)(x.ZP,{item:!0,xs:12,md:8,sx:E.recsContainer,children:null!==u.sel_crop&&null!==u.sel_activity&&6===t?(0,r.jsxs)("div",{children:[null!==u.sel_crop&&null!==u.sel_activity&&(0,r.jsxs)(g.Z,{variant:"h5",sx:{display:"novalues"===u.sel_activity.id?"none":"flex"},children:[u.sel_crop.label," Recommendations"]}),C.length>0?C.map((function(e,n){return(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{children:[u.sel_condition.format,"Rice"===u.sel_crop.label?" (".concat(e.crop,")"):""]}),e.recommendations().map((function(e,t){return e.ul?(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:e.id}),e.subs.length>0&&(0,r.jsx)("ul",{children:e.subs.map((function(e,t){return(0,r.jsx)("li",{children:e},"sub-".concat(n,"-").concat(t))}))})]},"main-".concat(n,"-").concat(t)):(0,r.jsx)("p",{children:e.id},"main-".concat(n,"-").concat(t))}))]},"rec-".concat(n))})):(0,r.jsx)(P.Z,{message:"We cannot find recommendations for your selected options."})]}):Object.values(u).filter((function(e){return e})).length>1?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:ie.map((function(e,n){return null!==u[e]&&void 0!==u[e].from&&"weather_condition"!==u[e].from?(0,r.jsx)(k,{info:u[e],show:n<ie.length-1,borderColor:"blue"},"card-opt-".concat(n)):(0,r.jsx)("div",{},"card-opt-".concat(n))}))}):(0,r.jsxs)(m.Z,{sx:E.welcome,children:[(0,r.jsx)(d.default,{unoptimized:!0,src:(0,R.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:R.imageLoader,alt:"Empty data"}),(0,r.jsx)(g.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,r.jsx)(g.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})},le=t(901),oe=t(7715),ce=[{label:"Select a province",description:"Select a province within the Bicol region.",opt_name:"sel_province"},{label:"Select a municipality",description:"Select a municipality included in the province you have selected on step no. 1.",opt_name:"sel_municipality"},{label:"Select a date between",description:"Select a date included in the current 10-Day Weather forecast data date range.",opt_name:"sel_month"},{label:"Select a crop type",description:"Listed below are available crops for your selected province and municipality with reference to the weather data validity date range in the cropping calendar.",opt_name:"sel_crop"},{label:"Select a crop stage",description:"Listed below are the available crop stages for your selected crop on the 10-day weather validity date range.",opt_name:"sel_stage"},{label:"Select an activity",description:"Here are available activities for the previously-selected parameters.",opt_name:"sel_activity"}],se=t(6867);function ue(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function pe(e,n,t,r,i,a,l){try{var o=e[a](l),c=o.value}catch(s){return void t(s)}o.done?n(c):Promise.resolve(c).then(r,i)}function de(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){de(e,n,t[n])}))}return e}function be(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);l=!0);}catch(c){o=!0,i=c}finally{try{l||null==t.return||t.return()}finally{if(o)throw i}}return a}}(e,n)||ve(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,n){if(e){if("string"===typeof e)return ue(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ue(e,n):void 0}}var he={id:0,from:"weather_condition",label:null,date:(new Date).toDateString()},ge={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:he,loading:!1,error:""};var xe=function(e){var n=e.municipalities,t=void 0===n?[]:n,i=be((0,T.ky)(u.o.STATIC_RECOMMENDATIONS,"data"),2),a=i[0],p=i[1],d=(0,o.useState)([]),f=d[0],b=d[1],m=(0,o.useState)([]),v=m[0],h=m[1],g=(0,o.useState)([]),x=g[0],y=g[1],_=(0,o.useState)([]),j=_[0],O=_[1],S=(0,o.useState)([]),w=S[0],Z=S[1],C=(0,o.useState)({date_range:"",date_selected:(new Date).toDateString(),date_now:(new Date).toDateString()}),k=C[0],P=C[1],R=(0,o.useState)(ge),E=R[0],A=R[1],L=(0,o.useState)([]),M=L[0],I=L[1],N=(0,o.useState)([]),W=N[0],Y=N[1],B=(0,o.useState)([]),F=B[0],V=B[1],q=(0,o.useState)([]),H=q[0],J=q[1],U=(0,o.useState)([]),X=U[0],$=U[1],K=(0,z.v9)((function(e){return e.tendayweather})),G=K.ids,Q=K.status,ee=K.entities,ne=(0,o.useState)([]),te=ne[0],re=ne[1],ie=(0,o.useRef)(!1),ue=(0,z.I0)();(0,o.useEffect)((function(){return ie.current=!0,function(){ie.current=!1}}),[]),(0,o.useEffect)((function(){if(t.length>0&&!p){var e={},n=[];t.forEach((function(t,r){void 0===e[t.province]?(n.push({id:r,label:t.province}),e[t.province]=[{id:0,label:t.name}]):e[t.province].push({id:e[t.province].length,label:t.name})})),ie.current&&(h(e),b(n))}}),[t,p]),(0,o.useEffect)((function(){if(Q===le.G.FULLFILLED&&0===X.length&&G.length>0){var e=Object.values(ee)[0];void 0!==e&&($(JSON.parse(e.data).reduce((function(e,n){return me(e).concat([{id:n.day_format,label:n.day_format}])}),[])),P((function(n){return fe({},n,{date_range:JSON.parse(e.data)[0].date_range})})))}}),[Q,G,ee,X]);var ve=function(){var e,n=(e=l().mark((function e(n,t){var r,i,o,u,p,d,f,b,m,h,g,_,S,w,C,R,L,M,T,N,W,B,F,q,H;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.from,i=t.label,Z([]),!Object.keys(t).includes("id")){e.next=107;break}e.t0=r,e.next="province"===e.t0?6:"municipality"===e.t0?13:"day"===e.t0?49:"crop"===e.t0?78:"cropstage"===e.t0?88:"activity"===e.t0?93:104;break;case 6:return A(fe({},E,{sel_province:t,sel_municipality:null,sel_day:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:[],sel_condition:he})),I(v[i]),Y([]),V([]),J([]),ue((0,se.R)(i)),e.abrupt("break",105);case 13:return A(fe({},E,{sel_municipality:t,sel_day:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:[],sel_condition:he,loading:!0,error:""})),Y([]),V([]),J([]),o=[],e.prev=18,e.next=21,(0,s.$K)(E.sel_province.label,i);case 21:u=e.sent,o=xe(u),ie.current&&y((function(e){return u})),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),A((function(n){return fe({},n,{loading:!1,error:e.t1.message})}));case 29:if(0!==o.length){e.next=32;break}return A((function(e){return fe({},e,{loading:!1,error:"There was an error loading data."})})),e.abrupt("return");case 32:return e.prev=32,e.next=35,(0,c.OP)(E.sel_province.label,i);case 35:if(p=e.sent,void 0===Object.values(ee).find((function(e){return e.municipality===i}))){e.next=41;break}ie.current&&(O((function(e){return p})),A((function(e){return fe({},e,{loading:!1})}))),e.next=43;break;case 41:return A((function(e){return fe({},e,{error:"10-Day weather data is not available for the municipality."})})),e.abrupt("return");case 43:e.next=48;break;case 45:e.prev=45,e.t2=e.catch(32),A((function(n){return fe({},n,{loading:!1,error:e.t2.message})}));case 48:return e.abrupt("break",105);case 49:if(""!==i&&i){e.next=51;break}return e.abrupt("return");case 51:if(e.prev=51,d=new Date("".concat(i,", ").concat((new Date).getFullYear())).toDateString(),f=[],b=[],void 0===(m=Object.values(ee).find((function(e){return e.municipality===E.sel_municipality.label})))){e.next=65;break}if(h=JSON.parse(m.data).find((function(e){return e.day_format===t.label}))){e.next=61;break}return A((function(e){return fe({},e,{error:"Weather data for the current date is not available at the moment!!"})})),e.abrupt("return");case 61:g=new Date(1e3*h.date_start.seconds),b=(0,oe.Mn)(g),f=Object.values(D.MW).find((function(e){return e.tenday===h.rainfall})),P(fe({},k,{months:b,date_selected:d,date_range:h.date_range}));case 65:_=[],S=j.map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n})),w=xe(x),C=[],R=[],S.forEach((function(e,n){var t=[];j.filter((function(n){return n.crop===e&&n.province===E.sel_province.label&&n.municipality===E.sel_municipality.label})).forEach((function(n){Object.keys(b).forEach((function(r){if(""!==n[r]){var i=n[r].split(","),a=b[r],l="";if(0===i.length)return;if(a.includes(D.Vs.FIRST_HALF)){if(""===i[0])return;l=i[0]}a.includes(D.Vs.SECOND_HALF)&&(1===i.length&&(l=i[0]),2===i.length&&(l=""!==i[1]?i[1]:i[0])),""!==l&&(w.includes(e)&&!C.includes(l)&&C.push(l),!t.includes(l)&&D.Xz.includes(l)&&t.push(l))}}))})),w.includes(e)&&t.length>0&&R.push(e),_.push({id:n,label:e,disabled:!w.includes(e)||0===t.length})})),ie.current&&(Y((function(e){return _})),L=Object.values(D.re).filter((function(e){return Object.keys(b).includes(e.code)})).map((function(e){return{id:e.code,label:e.format,num:e.num,disabled:!0}})),re(L),M=0===S.length?{id:"novalues",label:"No crop types for ".concat(i)}:null,A(fe({},E,{sel_day:t,sel_crop:M,sel_stage:null,sel_activity:null,sel_month:L,loading:!1,error:"",sel_condition:{id:f.tenday,label:f.label,format:f.sync,date:d}}))),e.next=77;break;case 74:e.prev=74,e.t3=e.catch(51),A((function(n){return fe({},n,{loading:!1,error:e.t3.message})}));case 77:return e.abrupt("break",105);case 78:return V([]),J([]),A(fe({},E,{sel_crop:t,sel_stage:null,sel_activity:null})),o=x.map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n})),T=[],N=[],W=[],j.forEach((function(e){var n=[];Object.keys(k.months).forEach((function(t){if(""!==e[t]&&i===e.crop){var r=e[t].split(","),a=k.months[t],l="";if(0===r.length)return;if(a.includes(D.Vs.FIRST_HALF)){if(""===r[0])return;l=r[0]}if(a.includes(D.Vs.SECOND_HALF)&&(1===r.length&&(l=r[0]),2===r.length&&(l=""!==r[1]?r[1]:r[0])),""!==l){if(N.includes(e.crop)||N.push(e.crop),!T.includes(l)){T.push(l);var o=x.filter((function(e){return e.stage===D.MZ[l.toUpperCase()]&&("Rice"===i?["Irrigated Rice","Rainfed Rice"].includes(e.crop):e.crop===i)})).map((function(e){return e.activity})).filter((function(e,n,t){return t.indexOf(e)==n}));W.push({id:W.length,label:D.MZ[l.toUpperCase()],disabled:0===o.length})}!n.includes(l)&&D.Xz.includes(l)&&n.push(l)}}}))})),V(W),e.abrupt("break",105);case 88:return B=x.filter((function(e){return e.stage===i&&("Rice"===E.sel_crop.label?["Irrigated Rice","Rainfed Rice"].includes(e.crop):e.crop===E.sel_crop.label)})).map((function(e){return e.activity})).filter((function(e,n,t){return t.indexOf(e)==n})),F=0===B.length?{id:"novalues",label:"No activities for selected options"}:null,A(fe({},E,{sel_stage:t,sel_activity:F})),J((function(e){return B.map((function(e,n){return{id:n,label:e}}))})),e.abrupt("break",105);case 93:e.t4=regeneratorRuntime.keys(E);case 94:if((e.t5=e.t4()).done){e.next=100;break}if(q=e.t5.value,null!==E[q]||"sel_activity"===q){e.next=98;break}return e.abrupt("return");case 98:e.next=94;break;case 100:return H=x.filter((function(e){return e.activity===i&&e.stage===E.sel_stage.label&&("Rice"===E.sel_crop.label?["Irrigated Rice","Rainfed Rice"].includes(e.crop):e.crop===E.sel_crop.label)})).map((function(e){return{province:e.province,municipality:e.municipality,crop:e.crop,stage:e.stage,activity:e.activity,recommendations:function(){switch(E.sel_condition.label){case D.MW.BELOW_NORMAL.label:case D.MW.NEAR_NORMAL.label:return JSON.parse(e.normal).map((function(e){return{id:a.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return a.subs.find((function(n){return n.id===e})).description}))}}));case D.MW.ABOVE_NORMAL.label:return JSON.parse(e.wetter).map((function(e){return{id:a.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return a.subs.find((function(n){return n.id===e})).description}))}}));case D.MW.WAY_BELOW_NORMAL.label:return JSON.parse(e.drier).map((function(e){return{id:a.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return a.subs.find((function(n){return n.id===e})).description}))}}))}}}})),A(fe({},E,{sel_activity:t})),Z(H),e.abrupt("break",105);case 104:return e.abrupt("break",105);case 105:e.next=108;break;case 107:"province"===r?(A(ge),I([]),Y([]),V([]),J([])):"municipality"===r?(A(fe({},E,{sel_municipality:null,sel_day:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:[],sel_condition:he})),Y([]),V([]),J([])):"day"===r?(A(fe({},E,{sel_day:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:[]})),Y([]),V([]),J([])):"crop"===r?(A(fe({},E,{sel_crop:null,sel_stage:null,sel_activity:null,sel_month:[]})),V([]),J([])):"month"===r?(A(fe({},E,de({sel_month:[],sel_stage:null,sel_activity:null},"sel_activity",null))),V([]),J([])):"cropstage"===r?(A(fe({},E,{sel_stage:null,sel_activity:null})),J([])):"activity"===r&&A(fe({},E,{sel_activity:null}));case 108:case"end":return e.stop()}}),e,null,[[18,26],[32,45],[51,74]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function l(e){pe(a,r,i,l,o,"next",e)}function o(e){pe(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),xe=function(e){var n=[];return((n=e.map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n}))).includes("Rainfed Rice")||n.includes("Irrigated Rice"))&&n.push("Rice"),n};return(0,r.jsx)(ae,{sel_options:E,isTenLoaded:Q===le.G.FULLFILLED,provinces:f,recommendations:w,optsmunicipalities:M,optscrops:W,optscropstages:F,optsactivities:H,optsmonths:te,optsdays:X,steps:ce,onSelectItemChange:ve,getStepLabel:function(e){var n=ce[e].opt_name,t="sel_month"!==n?null===E[n]?ce[e].label:"".concat(ce[e].label,": ").concat(E[n].label):0===X.length?ce[e].label:"".concat(ce[e].label,": ").concat(k.date_range);return"sel_month"!==n?null!==E[n]&&"novalues"===E[n].id?ce[e].label:t:0===X.length?ce[e].label:t},isContinueDisabled:function(e){switch(e){case 0:return null===E.sel_province;case 1:return null===E.sel_municipality;case 2:return null===E.sel_day;case 3:return null===E.sel_crop||"novalues"===E.sel_crop.id;case 4:return null===E.sel_stage||"novalues"===E.sel_stage.id;case 5:return null===E.sel_activity||"novalues"===E.sel_activity.id;default:return!1}},onClickDateSelector:function(e){var n=new Date(e).toDateString();n=n.substring(0,n.length-5),ve(null,{id:n,label:n,from:"day"})}})},ye=t(4010);var _e=function(){return(0,r.jsxs)(m.Z,{id:"contents-special-recommendations",children:[(0,r.jsx)(g.Z,{variant:"h4",children:"Special Weather Forecast"}),(0,r.jsx)(g.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,r.jsx)(ye.Z,{sx:{marginTop:"48px",maxWidth:"sm"},children:(0,r.jsx)(g.Z,{variant:"body1",children:"This section is under maintenance."})})]})};var je=function(e){var n=e.municipalities,t=void 0===n?[]:n;return(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z,{sx:{boxShadow:"none"}}),(0,r.jsx)("div",{id:"seasonal-recommendations"}),(0,r.jsx)(i.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,r.jsx)(U,{municipalities:t})}),(0,r.jsx)("div",{id:"resilient-practices"}),(0,r.jsx)(i.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,r.jsx)(xe,{municipalities:t})}),(0,r.jsx)("div",{id:"special-weather-forecast"}),(0,r.jsx)(i.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,r.jsx)(_e,{municipalities:t})})]})};var Oe=!0,Se=function(e){var n=e.municipalities,t=void 0===n?[]:n;return(0,r.jsx)(je,{municipalities:t})}},7682:function(e,n,t){"use strict";t.d(n,{ky:function(){return d},Kx:function(){return f},m$:function(){return b},tl:function(){return m}});var r=t(4051),i=t.n(r),a=t(7294),l=t(5321),o=t(5152);function c(e,n,t,r,i,a,l){try{var o=e[a](l),c=o.value}catch(s){return void t(s)}o.done?n(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function l(e){c(a,r,i,l,o,"next",e)}function o(e){c(a,r,i,l,o,"throw",e)}l(void 0)}))}}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){u(e,n,t[n])}))}return e}function d(e,n){var t=(0,a.useState)(null),r=t[0],c=t[1],u=(0,a.useState)(!0),p=u[0],d=u[1],f=(0,a.useState)(""),b=f[0],m=f[1],v=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var t=function(){var t=s(i().mark((function t(){var r,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,l.JU)(o.db,e,n),t.next=4,(0,l.QT)(r);case 4:(a=t.sent).exists()&&v.current&&(c(a.data()),d(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),m(t.t0.message),d(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return v.current=!1}}),[e,n]),[r,p,b]}function f(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,a.useState)([]),c=r[0],u=r[1],d=(0,a.useState)(!0),f=d[0],b=d[1],m=(0,a.useState)(""),v=m[0],h=m[1],g=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var r=function(){var r=s(i().mark((function r(){var a,c,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=(0,l.hJ)(o.db,e),c=t||(0,l.IO)(a,(0,l.Xo)(n,"asc")),r.next=5,(0,l.PL)(c);case 5:s=r.sent,g.current&&(u(s.docs.map((function(e){return p({},e.data())}))),b(!1)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),h(r.t0.message),b(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){return g.current=!1}}),[e,n,t]),{documents:c,loading:f,error:v}}function b(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=(0,a.useState)([]),u=c[0],d=c[1],f=(0,a.useState)(!0),b=f[0],m=f[1],v=(0,a.useState)(""),h=v[0],g=v[1],x=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var a=function(){var a=s(i().mark((function a(){var c,s;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,c=(0,l.IO)((0,l.hJ)(o.db,e,n,t),(0,l.Xo)(r)),i.next=4,(0,l.PL)(c);case 4:s=i.sent,x.current&&(d(s.docs.map((function(e){return p({},e.data())}))),m(!1)),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),g(i.t0.message),m(!1);case 12:case"end":return i.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){return x.current=!1}}),[e,n,t,r]),{documents:u,loading:b,error:h}}function m(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4?arguments[4]:void 0,u=(0,a.useState)([]),d=u[0],f=u[1],b=(0,a.useState)(!0),m=b[0],v=b[1],h=(0,a.useState)(""),g=h[0],x=h[1],y=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var a=function(){var a=s(i().mark((function a(){var s,u;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,s=(0,l.hJ)(o.db,e,n,t),""!==r&&(s=(0,l.IO)(s,(0,l.Xo)(r))),c&&(s=(0,l.IO)(s,(0,l.b9)(c))),i.next=6,(0,l.PL)(s);case 6:u=i.sent,y.current&&(f(u.docs.map((function(e){return p({},e.data())}))),v(!1)),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(0),x(i.t0.message),v(!1);case 14:case"end":return i.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){return y.current=!1}}),[e,n,t,r,c]),{documents:d,loading:m,error:g}}}},function(e){e.O(0,[9351,6153,9964,1903,6295,2882,4194,9774,2888,179],(function(){return n=7741,e(e.s=n);var n}));var n=e.O();_N_E=n}]);