(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{7741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return t(3340)}])},3340:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var r=t(4051),i=t.n(r),a=t(5893),o=t(7294),c=t(5503),s=t(6257);(0,c.ZF)({apiKey:"AIzaSyAnUCIOKHs0cFc0ICa7YnC1r_u4yD6X8gI",authDomain:"climate-webservices.firebaseapp.com",databaseURL:"https://climate-webservices-default-rtdb.firebaseio.com",projectId:"climate-webservices",storageBucket:"climate-webservices.appspot.com",messagingSenderId:"1070666877655",appId:"1:1070666877655:web:208a0424af36e497e2be92",measurementId:"G-SRY2RQLEBL"});var u=(0,s.ad)();function l(e,n,t,r,i,a,o){try{var c=e[a](o),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,i)}function p(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){l(a,r,i,o,c,"next",e)}function c(e){l(a,r,i,o,c,"throw",e)}o(void 0)}))}}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){f(e,n,t[n])}))}return e}var v=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;f(this,"getSelections",p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCollectionData(n.CROP_REC_ACTIVITY_SELECTION,"prov");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var t=this;f(this,"getRecommendations",p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCollectionData(t.CROP_REC_RECOMMENDATIONS,"id");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var r=this;f(this,"getProvinces",p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getCollectionData(r.CROP_REC_PROVINCES,"id");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var a=this;f(this,"getActivities",function(){var e=p(i().mark((function e(n){var t,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return t=(0,s.hJ)(u,a.CROP_REC_ACTIVITY_SELECTION),r=(0,s.IO)(t,(0,s.ar)("prov","==",n)),e.next=6,a.getCollectionData(a.CROP_REC_ACTIVITY_SELECTION,"",r);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());var o=this;f(this,"getVillages",p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getCollectionData(o.VILLAGES,"barangay");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));var c=this;f(this,"getCropCalendarsHi",p(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getCollectionData(c.CROP_CALENDARS,"filename");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),this.CROP_REC_ACTIVITY_SELECTION="rec_selections",this.CROP_REC_RECOMMENDATIONS="rec_recommendations",this.CROP_REC_PROVINCES="rec_provinces",this.VILLAGES="villages",this.CROP_CALENDARS="misc_crop_calendars"}var n,t,r;return n=e,t=[{key:"getCollectionData",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return p(i().mark((function r(){var a,o,c,l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(0,s.hJ)(u,e),o=t||(0,s.IO)(a,(0,s.Xo)(n,"asc")),r.next=4,(0,s.PL)(o);case 4:return c=r.sent,l=c.docs.map((function(e){return b({},e.data())})),r.abrupt("return",l);case 7:case"end":return r.stop()}}),r)})))()}}],t&&d(n.prototype,t),r&&d(n,r),e}(),m=new v,g=(m.getSelections.bind(m),m.getRecommendations.bind(m)),h=m.getProvinces.bind(m),x=m.getActivities.bind(m),C=(m.getVillages.bind(m),m.getCropCalendarsHi.bind(m),t(1519)),w=t(8412),O=t(3569),P=t(5861),j=t(6886),y={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{xs:"none",md:"1px solid gray"}},recsContainer:{paddingLeft:{sm:"none",md:"54px !important"}},autocomplete:{maxWidth:{sm:"100%",md:"310px"},marginBottom:function(e){return e.spacing(3)},marginTop:function(e){return e.spacing(1)}}};function _(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){_(e,n,t[n])}))}return e}var E=function(e){var n=e.sel_options,t=e.activities,r=e.provinces,i=e.conditions,o=e.cropRecommendations,c=e.onSelectItemChange,s=e.optscroptypes,u=e.optscropstages,l=e.optsactivities;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{variant:"h4",children:"Agroclimatic Service"}),(0,a.jsx)(P.Z,{variant:"label",children:"Crop Recommendations"}),(0,a.jsxs)(j.ZP,{container:!0,spacing:2,sx:y.container,children:[(0,a.jsxs)(j.ZP,{item:!0,xs:12,md:4,sx:y.selectContainer,children:[(0,a.jsx)(P.Z,{variant:"subtitle2",children:"Select Province"}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"province",disabled:0===r.length,options:r,sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:0===r.length?"Loading...":"Select a province"}))},onChange:function(e,n){return c(e,S({},n,{from:"province"}))}}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"croptype",options:s,sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select a crop type"}))},onChange:function(e,n){return c(e,["rainfed rice","irrigated rice"].includes(n.label)?S({},n,{from:"croptype"}):{id:1,label:"irrigated rice"})}}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"cropstage",options:u,sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select a crop stage"}))},onChange:function(e,n){return c(e,S({},n,{from:"cropstage"}))}}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"activities",options:l,sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select an activity"}))},onChange:function(e,n){return c(e,S({},n,{from:"activities"}))}}),(0,a.jsx)("br",{}),(0,a.jsx)(C.Z,{}),(0,a.jsx)("br",{}),(0,a.jsx)(P.Z,{variant:"subtitle2",children:"Nutrition Management"}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"nutrition",disabled:0===r.length,options:[{id:1,label:"transplanting"},{id:2,label:"direct-seed sowing"},{id:3,label:"all"},{id:4,label:"no standing in water fields"},{id:5,label:"no standing in paddy fields"}],sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select nutrition management"}))},onChange:function(e,n){return c(e,S({},n,{from:"nutrition"}))}}),(0,a.jsx)(P.Z,{variant:"subtitle2",children:"Water Management"}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"water",disabled:0===r.length,options:[],sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select water management"}))},onChange:function(e,n){return c(e,S({},n,{from:"water"}))}}),(0,a.jsx)(P.Z,{variant:"subtitle2",children:"Pest and Weed Management"}),(0,a.jsx)(O.Z,{disablePortal:!0,id:"pestweed",disabled:0===r.length,options:[],sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select pest and weed management"}))},onChange:function(e,n){return c(e,S({},n,{from:"pestweed"}))}})]}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,md:8,sx:y.recsContainer,children:[(0,a.jsx)(P.Z,{variant:"h5",children:"Rainfed Rice Recommendations"}),(0,a.jsx)(O.Z,{value:n.sel_condition,disablePortal:!0,id:"condition",disabled:0===t.length,options:i,sx:y.autocomplete,renderInput:function(e){return(0,a.jsx)(w.Z,S({},e,{label:"Select a weather condition"}))},onChange:function(e,n){return c(e,S({},n,{from:"condition"}))},isOptionEqualToValue:function(e,n){return e.id===n.id},getOptionLabel:function(e){return e.label?e.label:""}}),(0,a.jsx)("ul",{children:o.map((function(e,n){return(0,a.jsx)("li",{children:e.name},n)}))})]})]})]})};function I(e,n,t,r,i,a,o){try{var c=e[a](o),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,i)}function R(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){I(a,r,i,o,c,"next",e)}function c(e){I(a,r,i,o,c,"throw",e)}o(void 0)}))}}function Z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Z(e,n,t[n])}))}return e}var N={province:"",condition:"",activity:"Land Preparation"},T=[],L={sel_province:null,sel_condition:null},A=[{id:1,label:"irrigated rice"},{id:2,label:"rainfed rice"},{id:3,label:"corn"},{id:4,label:"casava"}],D=[{id:1,label:"Land Preparation"},{id:2,label:"Planting"},{id:3,label:"Harvesting"}],V=[{id:1,label:"Selection of Varieties"},{id:2,label:"Land Preparation"}];var M=function(){var e=(0,o.useState)(N),n=e[0],t=e[1],r=(0,o.useState)([]),c=r[0],s=r[1],u=(0,o.useState)([]),l=u[0],p=u[1],d=(0,o.useState)(T),f=d[0],b=d[1],v=(0,o.useState)([]),m=v[0],C=v[1],w=(0,o.useState)(L),O=w[0],P=w[1];(0,o.useEffect)((function(){var e=function(){var e=R(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([h(),g()]);case 3:n=e.sent,s((function(e){return n[0]})),p((function(e){return n[1]})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){return!0}}),[]),(0,o.useEffect)((function(){if(n.province){var e=function(){var e=R(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(n.province);case 3:t=e.sent,b((function(e){return t})),P((function(e){return k({},e,{sel_condition:null})})),C([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}}),[n.province]),(0,o.useEffect)((function(){if(n.condition&&f.length>0&&l.length>0){var e=[];f.forEach((function(t,r){e.includes(n.condition)||e.push(t[n.condition])}));var t=l.filter((function(n){return e.includes(n.id)}));t.length>0&&C(t)}}),[n.condition,f,l]);var j=function(e){P(k({},O,{sel_condition:null})),C([])};return(0,a.jsx)(E,{sel_options:O,activities:f,provinces:c,conditions:[{id:"norm",label:"Normal Conditions"},{id:"wet",label:"Wetter than Normal Conditions"},{id:"dry",label:"Drier than Normal Conditions"}],cropRecommendations:m,optscroptypes:A,optscropstages:D,optsactivities:V,onSelectItemChange:function(e,r){var i=r.id,a=r.from,o=r.label,c="province"===a?o:i;Object.keys(r).includes("id")?(t(k({},n,Z({},a,c))),"condition"===a?P(k({},O,{sel_condition:r})):"province"===a&&j()):(j(),t(k({},n,Z({},a,""))),"province"===a&&b(T))}})}}},function(e){e.O(0,[16,476,819,774,888,179],(function(){return n=7741,e(e.s=n);var n}));var n=e.O();_N_E=n}]);