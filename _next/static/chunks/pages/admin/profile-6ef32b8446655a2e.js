(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8172],{5165:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/profile",function(){return n(7172)}])},7172:function(e,t,n){"use strict";n.r(t);var r=n(4051),u=n.n(r),o=n(5893),c=n(7294),a=n(7426),i=n(5243),s=n(6383),f=n(9576),l=n(4633);function p(e,t,n,r,u,o,c){try{var a=e[o](c),i=a.value}catch(s){return void n(s)}a.done?t(i):Promise.resolve(i).then(r,u)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}var b=v({},n(7392).BF,{title:"Save changes",msg:"Do you want to save the new password?"});t.default=(0,i.Z)((function(e){var t=(0,c.useState)(""),n=t[0],r=t[1],i=(0,c.useState)(b),d=i[0],h=i[1],y=(0,c.useRef)(!1);(0,c.useState)((function(){return y.current=!0,function(){y.current=!1}}),[]);var w=function(){var t,r=(t=u().mark((function t(){var r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n){t.next=3;break}return h(v({},b,{error:"Please check your input."})),t.abrupt("return");case 3:return t.prev=3,h(v({},d,{loading:!0,msg:"Saving changes..."})),t.next=7,(0,l.Nq)({password:n,uid:e.user.uid},e.user.accountlevel);case 7:y.current&&h(v({},d,{loading:!1,savesuccess:!0,msg:"Password updated. You will be signed-out. Please sign-in using your new password."})),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(3),o=(null===t.t0||void 0===t.t0||null===(r=t.t0.response)||void 0===r?void 0:r.data)||t.t0.message,y.current&&h((function(e){return v({},e,{isOpen:!1,loading:!1,error:o})}));case 15:case"end":return t.stop()}}),t,null,[[3,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,u){var o=t.apply(e,n);function c(e){p(o,r,u,c,a,"next",e)}function a(e){p(o,r,u,c,a,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,o.jsx)(s.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:a.DW.ADMIN,children:(0,o.jsx)(f.Z,{user:e.user,password:n,message:d,handleUpdateUser:function(e){var t=e.target.value;r(t)},handleUpdatePassword:w,handleSaveSuccess:e.onBtnLogoutClick,togglePrompt:function(){return h((function(e){return v({},b,{isOpen:!e.isOpen})}))}})})}))},4633:function(e,t,n){"use strict";n.d(t,{r4:function(){return g},h8:function(){return P},PR:function(){return _},Rf:function(){return S},Nq:function(){return O}});var r=n(4051),u=n.n(r),o=n(9669),c=n.n(o),a=n(9431);function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n,r,u,o,c){try{var a=e[o](c),i=a.value}catch(s){return void n(s)}a.done?t(i):Promise.resolve(i).then(r,u)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,u){var o=e.apply(t,n);function c(e){s(o,r,u,c,a,"next",e)}function a(e){s(o,r,u,c,a,"throw",e)}c(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function b(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?i(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var y=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var u=d(this).constructor;n=Reflect.construct(r,arguments,u)}else n=r.apply(this,arguments);return b(this,n)}}var m=new(function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o=w(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=i(e=o.call(this));return p(i(e),"getUsers",f(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get(t.USERS_API_LIST);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),e.BASE_URL="https://amia-cis.onrender.com/api",e.USERS_API="".concat(e.BASE_URL,"/user"),e.USERS_API_LIST="".concat(e.BASE_URL,"/users"),e}return t=a,(n=[{key:"createUser",value:function(e){var t=this;return f(u().mark((function n(){var r,o,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={},["email","displayname","password","account_level","disabled","emailverified"].forEach((function(t){if(void 0===e[t]||""===e[t])throw new Error("Please check your input.");r[t]=e[t]})),n.next=5,t.createRequestObject({body:r});case 5:return o=n.sent,n.next=8,c()(v({},o,{url:t.USERS_API,method:"POST"}));case 8:return a=n.sent,n.abrupt("return",a.data);case 10:case"end":return n.stop()}}),n)})))()}},{key:"updateUser",value:function(e){var t=this;return f(u().mark((function n(){var r,o,a;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={},["uid","email","displayname","password","disabled","emailverified","account_level"].forEach((function(t){if(void 0!==e[t.toLowerCase()]&&"password"!==t&&""===e[t])throw new Error("Please check your input.");r[t]=e[t]})),n.next=5,t.createRequestObject({body:r});case 5:return o=n.sent,n.next=8,c()(v({},o,{url:t.USERS_API,method:"PATCH"}));case 8:return a=n.sent,n.abrupt("return",a.data);case 10:case"end":return n.stop()}}),n)})))()}},{key:"deleteUser",value:function(e){var t=this;return f(u().mark((function n(){var r,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({});case 2:return r=n.sent,n.next=5,c().delete("".concat(t.USERS_API,"/").concat(e),r);case 5:return o=n.sent,n.abrupt("return",o.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"getUser",value:function(e){var t=e.uid,n=e.email,r=this;return f(u().mark((function e(){var o,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},t&&(o={uid:t}),n&&(o={email:n}),e.next=5,r.createRequestObject({params:o});case 5:return a=e.sent,e.next=8,c().get("".concat(r.BASE_URL,"/user"),a);case 8:return i=e.sent,e.abrupt("return",i.data);case 10:case"end":return e.stop()}}),e)})))()}}])&&l(t.prototype,n),r&&l(t,r),a}(a.Z)),g=m.createUser.bind(m),O=m.updateUser.bind(m),P=m.deleteUser.bind(m),_=m.getUser.bind(m),S=m.getUsers.bind(m)}},function(e){e.O(0,[9351,6153,9964,1704,1903,7823,4039,2882,7092,1050,4980,9774,2888,179],(function(){return t=5165,e(e.s=t);var t}));var t=e.O();_N_E=t}]);