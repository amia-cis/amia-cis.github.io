(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3359],{1158:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/weather",function(){return n(6345)}])},3501:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),a=n(7294),o=n(5697),i=n.n(o),l=n(1057),c=n(9536),s=n(8456),u=n(4666),d=n(1425),f=n(7645),p=n(6580),h=n(3946),b={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(e){return e.palette.grey[500]}}};function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var t=x(a.useState({open:null}),2),n=t[0],o=t[1],i=e.loading,m=void 0!==i&&i,v=e.isOpen,y=void 0!==v&&v,j=e.showButtons,w=void 0===j||j,O=e.maxWidth,S=void 0===O?"sm":O,P=e.IconSVG,C=void 0===P?null:P,A=e.modalExtraHandlerCB,E=void 0===A?null:A,k=e.modalCancelHandlerCB,_=void 0===k?null:k,T=e.modalConfirmHandlerCB,Z=void 0===T?null:T,R=e.modalOpenHandlerCB,D=void 0===R?null:R,F=e.isDisabled,B=void 0!==F&&F,I=e.openButtonText,W=void 0===I?"Click":I,N=e.title,L=void 0===N?"Window Title":N,U=e.extraBtnText,M=void 0===U?"":U,H=e.cancelBtnText,z=void 0===H?"Cancel":H,G=e.confirmBtnText,V=void 0===G?"Ok":G,Y=e.contentText,q=void 0===Y?"":Y,X=e.error,K=void 0===X?"":X,$=e.colorTheme,J=void 0===$?"primary":$;(0,a.useEffect)((function(){o((function(e){return g({},e,{open:y})}))}),[y]);var Q=function(){o(g({},n,{open:!1})),_&&_()};return(0,r.jsxs)("div",{children:[W&&(0,r.jsxs)(l.Z,{disabled:B,disableElevation:!0,variant:"contained",color:J,onClick:function(){o(g({},n,{open:!0})),D&&D()},sx:b.button,children:[C&&(0,r.jsx)(C,{sx:b.icon}),W]}),(0,r.jsxs)(u.Z,{maxWidth:S,fullWidth:!0,open:n.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("span",{children:L}),(0,r.jsx)(h.Z,{"aria-label":"close",sx:b.closeButton,onClick:Q,disabled:m,children:(0,r.jsx)(c.Z,{})})]}),(0,r.jsxs)(p.Z,{sx:b.dialogContent,children:[""!==q&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:q}),(0,r.jsx)("div",{className:"error",children:K})]}),e.children]}),w&&(0,r.jsxs)(d.Z,{sx:b.dialogActions,children:[""!==M&&(0,r.jsx)(l.Z,{onClick:E||Q,disabled:m,children:M}),(0,r.jsx)(l.Z,{onClick:_||Q,disabled:m,children:z}),(0,r.jsxs)(l.Z,{variant:"contained",disabled:m,onClick:Z||Q,children:[(0,r.jsx)("span",{style:{display:m?"none":"block"},children:V}),(0,r.jsx)(s.Z,{size:24,color:"secondary",sx:{display:m?"block":"none"}})]})]})]})]})}y.propTypes={loading:i().bool,isOpen:i().bool,showButtons:i().bool,maxWidth:i().string,IconSVG:i().elementType,modalCancelHandlerCB:i().func,modalConfirmHandlerCB:i().func,modalOpenHandlerCB:i().func,modalExtraHandlerCB:i().func,openButtonText:i().string,cancelBtnText:i().string,confirmBtnText:i().string,extraBtnText:i().string,title:i().string,contentText:i().string,children:i().node,error:i().string,isDisabled:i().bool,colorTheme:i().string};var j=y},5322:function(e,t,n){"use strict";var r=n(5893),a=n(7294),o=n(5697),i=n.n(o),l=n(4866),c=n(6901);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=a.forwardRef((function(e,t){return(0,r.jsx)(c.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({elevation:6,ref:t,variant:"filled"},e))}));function d(e){var t=e.openSnackbar,n=e.message,o=e.severity,i=e.closeHandlerCB,c=void 0===i?function(){}:i,s=(0,a.useState)(t),d=s[0],f=s[1];(0,a.useEffect)((function(){f(t)}),[t]);var p=function(){f(!1),c()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:p,children:(0,r.jsx)(u,{onClose:p,severity:o,sx:{width:"100%"},children:n})})}d.propTypes={openSnackbar:i().bool,message:i().string,severity:i().string},t.Z=d},6601:function(e,t,n){"use strict";n.d(t,{x:function(){return l},P:function(){return c}});var r=n(5893),a=n(7357);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=function(e){var t=e.children,n=e.value,l=e.index,c=i(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({role:"tabpanel",hidden:n!==l,id:"custom-tabpanel-".concat(l),"aria-labelledby":"custom-tab-".concat(l)},c,{children:n===l&&(0,r.jsx)(a.Z,{sx:{p:3},children:t})}))};var c=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},6345:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Yt}});var r=n(5893),a=n(7294),o=n(9473),i=n(4822),l=n(3059),c=n(2530),s=n(7357),u=n(44),d=n(8409),f=n(6601),p=n(5861),h=n(1163),b=n(1057),m=n(6863),v=n(4666),g=n(1425),x=n(6580),y=n(8951),j=n(7645),w=n(4051),O=n.n(w),S=n(3539),P=n(9669),C=n.n(P),A=n(9431),E=n(7426);function k(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,l,"next",e)}function l(e){k(o,r,a,i,l,"throw",e)}i(void 0)}))}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function B(e,t){return!t||"object"!==W(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}var W=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var a=D(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return B(this,n)}}var L={BASE_API_URL:"https://amia-cis-temp.herokuapp.com/api",WEATHER_FORECAST_SEASONAL_EXCEL:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/seasonal/excel"),WEATHER_FORECAST_SEASONAL:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/seasonal/region"),WEATHER_FORECAST_SEASONAL_UPDATE:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/seasonal/region/update"),WEATHER_FORECAST_PROVINCE:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/seasonal/province"),WEATHER_FORECAST_TEN_DAY:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/10day")},U=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(o,e);var t,n,r,a=N(o);function o(){return T(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"upsertSeasonal",value:function(e){var t=this;return _(O().mark((function n(){var r,a;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,C()(F({},r,{url:L.WEATHER_FORECAST_SEASONAL,method:"POST"}));case 5:return a=n.sent,n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"upsertTenDay",value:function(e){var t=this;return _(O().mark((function n(){var r,a;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,C()(F({},r,{url:L.WEATHER_FORECAST_TEN_DAY,method:"POST"}));case 5:return a=n.sent,n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"upsertSeasonalExcel",value:function(e){var t=this;return _(O().mark((function n(){var r,a;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,C()(F({},r,{url:L.WEATHER_FORECAST_SEASONAL_EXCEL,method:"POST"}));case 5:return a=n.sent,n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"updateSeasonal",value:function(e){var t=this;return _(O().mark((function n(){var r,a;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,C()(F({},r,{url:L.WEATHER_FORECAST_SEASONAL_UPDATE,method:"POST"}));case 5:return a=n.sent,n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"getweathercondition",value:function(e){var t="";return e<=40&&(t=E.MW.WAY_BELOW_NORMAL.label),e>=41&&e<=80&&(t=E.MW.BELOW_NORMAL.label),e>=81&&e<=120&&(t=E.MW.NEAR_NORMAL.label),e>120&&(t=E.MW.ABOVE_NORMAL.label),t}}])&&Z(t.prototype,n),r&&Z(t,r),o}(A.Z),M=new U,H=M.upsertSeasonal.bind(M),z=M.upsertSeasonalExcel.bind(M),G=M.getweathercondition.bind(M),V=M.upsertTenDay.bind(M),Y=M.updateSeasonal.bind(M),q=n(6901),X=n(8456),K={datagrid:{borderRadius:2,"& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(e){return e.palette.primary.dark},fontSize:16,"& select":{width:"100px",height:"32px",border:"none !important",outline:"none !important",fontSize:16}}},gridContainer:{height:500,"& .wb_normal":{backgroundColor:"red",color:"#fff"},"& .b_normal":{backgroundColor:"yellow"},"& .near_normal":{backgroundColor:"#00c300"},"& .above_normal":{backgroundColor:"blue",color:"#fff"}}};function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Q(e,t,n[t])}))}return e}function te(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne={loading:!1,show:!1,error:"",msg:"",saveDisabled:!1};var re=function(e){var t=e.onCancelClick,n=e.onAsyncFinish,i=(0,o.v9)((function(e){return e.provinces})),l=i.ids,c=i.entities,u=(0,a.useState)([]),d=u[0],f=u[1],p=(0,a.useState)([]),h=p[0],v=p[1],g=(0,a.useState)([]),x=g[0],y=g[1],j=(0,a.useState)(ne),w=j[0],P=j[1],C=(0,o.v9)((function(e){return e.seasonalweather})),A=C.ids,k=C.entities,_=[{id:0,label:"Jan"},{id:1,label:"Feb"},{id:2,label:"Mar"},{id:3,label:"Apr"},{id:4,label:"May"},{id:5,label:"Jun"},{id:6,label:"Jul"},{id:7,label:"Aug"},{id:8,label:"Sep"},{id:9,label:"Oct"},{id:10,label:"Nov"},{id:11,label:"Dec"}];(0,a.useEffect)((function(){A.length>0&&I()}),[A.length,I]);var T=function(){var e,t=(e=O().mark((function e(){var t,r,a,o,i,l,c,s,u;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.getElementsByTagName("select"),r=[],a=!0,o=0;o<t.length;o+=1)i=document.getElementById("select-mo-".concat(o)),r.push(B(i.value));if(R(r)&&6===d.length){e.next=7;break}return P(ee({},ne,{show:!0,loading:!1,error:"Invalid months sequence."})),e.abrupt("return");case 7:l=0;case 8:if(!(l<d.length)){e.next=20;break}c=0;case 10:if(!(c<d[l].length)){e.next=17;break}if(Z(d[l][c])){e.next=14;break}return a=!1,e.abrupt("break",17);case 14:c+=1,e.next=10;break;case 17:l+=1,e.next=8;break;case 20:if(a){e.next=23;break}return P(ee({},ne,{show:!0,error:"Invalid cell values."})),e.abrupt("return");case 23:return e.prev=23,P(ee({},ne,{loading:!0})),e.next=27,H(F(r));case 27:n(),e.next=37;break;case 30:e.prev=30,e.t0=e.catch(23),s="",void 0!==e.t0.response&&(s=void 0!==e.t0.response.data?e.t0.response.data:""),""===s&&(s=e.t0.message),u=s.replaceAll(/Firebase/g,""),P((function(e){return ee({},e,{show:!0,loading:!1,error:u})}));case 37:case"end":return e.stop()}}),e,null,[[23,30]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){J(o,r,a,i,l,"next",e)}function l(e){J(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),Z=function(e){return isNaN(e)||""===e?(P(ee({},ne,{show:!0,error:"Not a number"})),!1):(P(ne),!0)},R=function(e){for(var t=e.map((function(e){return e+1})),n=!0,r=0;r<t.length-1&&(!(1!==Math.abs(t[r+1]-t[r])||t[r+1]<t[r])||(n=!1,12===t[r]&&1===t[r+1]&&(n=!0),n));)r+=1;return n},D=function(e){var t=e.props.value,n=Z(t)?t:"ERROR",r=e.id,a=(A.length>0?k[A[0]].mos:[]).indexOf(e.field),o=te(d),i=o[r];i[a]=n,o[r]=i,f((function(e){return o}))},F=function(e){for(var t={region:Object.values(c).length>0?Object.values(c)[0].region:"",provinces:[]},n=0;n<d.length;n+=1){for(var r={name:c[l[n]].label,months:[]},a=0;a<e.length;a+=1)r.months.push({mo:_[e[a]].label.toLowerCase(),val:d[n][a],con:G(d[n][a])});t.provinces.push(r)}return t},B=function(e){for(var t=0,n=0;n<_.length;n+=1)if(_[n].label.toLowerCase()===e.toLowerCase()){t=n;break}return t},I=function(){var e=function(e){var t=k[A[0]].mos[e];a.push({field:t,headerName:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),width:110,editable:!0,sortable:!1,disableColumnMenu:!0,renderHeader:function(n){return(0,r.jsxs)("select",{onChange:function(t){return function(e,t){var n=e.target.value;document.getElementById("select-mo-".concat(t)).setAttribute("value",B(n))}(t,e)},id:"select-mo-".concat(e),defaultValue:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),children:[(0,r.jsx)("option",{children:"Month"}),_.map((function(e,t){return(0,r.jsx)("option",{children:e.label},"mo-".concat(t))}))]})}})},t=function(e){var t=function(t){var n=k[A[e]],o=n.months.filter((function(e){return e.mo===n.mos[t]}));1===o.length?(r[n.mos[t]]=o[0].val,a.push(o[0].val)):(r[n.mos[t]]="n/a",a.push("n/a"))},r={},a=[],l=function(e){var t="";if(0===Object.values(c).length)return"n/a";try{t=Object.values(c).find((function(t){return t.name===e})).label}catch(n){t="n/a"}return t}(k[A[e]].name);i[l]=k[A[e]].name,r.id=e,r.rowId=e,r.province=l,r.editable=!0;for(var s=0;s<k[A[e]].mos.length;s+=1)t(s);n.push(r),o.push(a)},n=[],a=[],o=[],i={};a.push({field:"province",headerName:"Province",width:180,sortable:!1,disableColumnMenu:!0});for(var l=0;l<k[A[0]].mos.length;l+=1)e(l);for(var s=0;s<A.length;s+=1)t(s);y(a),v(n),f(o)};return(0,r.jsxs)("div",{style:{height:500,width:"100%"},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"baseline",marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{minWidth:"40%"},children:(0,r.jsx)(q.Z,{severity:""!==w.error?"error":"success",sx:{fontSize:"12px",minHeight:"32px",width:"100%",visibility:w.show?"initial":"hidden"},children:""!==w.error?w.error:w.msg})}),(0,r.jsxs)(m.Z,{variant:"outlined","aria-label":"outlined button controls group",sx:{float:"right",marginTop:"24px","& button":{width:"50%"}},children:[(0,r.jsx)(b.Z,{id:"cancel",onClick:t,disabled:w.loading,children:"Cancel"}),(0,r.jsxs)(b.Z,{onClick:function(){var e=function(){return document.getElementsByTagName("select").length};if(P(ee({},ne,{loading:!0})),e()<6){var t=document.getElementsByClassName("MuiDataGrid-virtualScroller");if(t.length>0)var n=t[0].scrollWidth,r=setInterval((function(){n<=0&&(clearInterval(r),6===e()?T():P(ee({},ne,{show:!0,loading:!1,error:"Please edit the table cells on a larger screen."}))),t[0].scrollLeft+=3,n-=3}))}else T()},disabled:w.loading||w.saveDisabled,variant:"contained",children:[(0,r.jsx)("span",{style:{display:w.loading?"none":"block"},children:"Save"})," \xa0",(0,r.jsx)(X.Z,{size:20,color:"secondary",sx:{display:w.loading?"block":"none"}})]})]})]}),(0,r.jsx)(s.Z,{sx:K.gridContainer,children:(0,r.jsx)(S._,{rows:h,columns:x,sx:K.datagrid,customH:!0,editMode:"row",rowsPerPageOptions:[],getCellClassName:function(e){return void 0!==E.re[e.field.toUpperCase()]?G(e.value):""},isCellEditable:function(){return!w.loading},onEditCellPropsChange:function(e){P(ne),D(e)},initialState:{columns:{columnVisibilityModel:{rowId:!1}}}})})]})},ae=n(1343),oe=n(9209),ie=n(7715),le=n(901),ce=n(6886),se=n(7109),ue=n(1903),de=n(265),fe=n(5697),pe=n.n(fe),he=n(1496);function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=(0,he.ZP)((function(e){return(0,r.jsx)(ue.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){be(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{width:"100%",fontSize:"12px",marginTop:t.spacing(1),"& .MuiOutlinedInput-root":{paddingRight:0,paddingLeft:0},"& .MuiOutlinedInput-input":{padding:t.spacing(1)}}})),ve=me,ge=n(3501),xe=n(5322),ye=n(7346),je=n(2701);function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=(0,he.ZP)((function(e){return(0,r.jsx)(b.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){we(e,t,n[t])}))}return e}({},e))}))((function(e){return{width:"150px",height:e.theme.spacing(5)}})),Se=Oe,Pe={container:{marginTop:"16px",width:"100%"},textfield:{fontSize:"14px"},fileInputContainer:{height:"0px",width:"0px",overflow:"hidden"}},Ce=n(213);function Ae(e){var t=e.file,n=e.state,o=e.name,i=e.label,l=void 0===i?"":i,c=e.textContent,u=void 0===c?"":c,d=e.fileAccepts,f=e.isDisabled,h=void 0!==f&&f,b=e.handleUpload,m=e.setSelectedFile,v=e.clearFile,g=(0,a.useRef)();return(0,a.useEffect)((function(){null===t&&(g.current.value=null)}),[t]),(0,r.jsxs)(ce.ZP,{container:!0,sx:Pe.container,children:[(0,r.jsx)(ge.Z,{isOpen:n.open,title:"Upload file",contentText:n.msg||"Uploading file...",loading:n.loading,openButtonText:null}),(0,r.jsx)(xe.Z,{openSnackbar:""!==n.error||""!==n.msg,message:n.error||n.msg,severity:""!==n.error?"error":"success"}),(0,r.jsxs)(ce.ZP,{item:!0,xs:12,lg:6,sx:Pe.wrapper,children:[(0,r.jsx)(p.Z,{variant:"subtitle2",children:l}),(0,r.jsx)(Ce.Z,{children:u}),(0,r.jsx)(ve,{size:"small",disabled:!0,value:null!==t?t[0].name:"",sx:{fontSize:"10px"},InputProps:{style:Pe.textfield,startAdornment:(0,r.jsxs)(Se,{variant:"outlined",disableElevation:!0,component:"label",disabled:n.loading||h,sx:{width:"48px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(e){null!==t&&v(e)},children:[null===t?(0,r.jsx)(je.Z,{}):(0,r.jsx)(ye.Z,{}),(0,r.jsx)(s.Z,{sx:Pe.fileInputContainer,children:(0,r.jsx)("input",{type:"file",multiple:!0,ref:g,accept:d||".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:o||"excelfile",onChange:m,style:{border:"1px solid"}})})]}),endAdornment:(0,r.jsx)(Se,{size:"small",component:"span",variant:"contained",disableElevation:!0,disabled:null===t||n.loading,sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:b,children:"Upload"})}})]})]})}Ae.propTypes={file:pe().object,state:pe().object,name:pe().string,label:pe().string,textContent:pe().string,fileAccepts:pe().string,isDisabled:pe().bool,handleUpload:pe().func,setSelectedFile:pe().func,clearFile:pe().func};var Ee=Ae;function ke(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ke(o,r,a,i,l,"next",e)}function l(e){ke(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Te(e,t,n[t])}))}return e}var Re={msg:"",loading:!1,open:!1,error:""};function De(e){var t=e.label,n=e.name,o=e.textContent,i=e.fileAccepts,l=e.isDisabled,c=void 0!==l&&l,s=e.fileUploadMethod,u=e.onFileSelectedCB,d=(0,a.useState)(null),f=d[0],p=d[1],h=(0,a.useState)(Re),b=h[0],m=h[1],v=function(){var e=_e(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.target.files),u&&u(t.target.files);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=_e(O().mark((function e(t){var n,r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.length>0)){e.next=18;break}return t.preventDefault(),e.prev=2,(n=new FormData).append("excelfile",f[0]),m(Ze({},Re,{loading:!0,open:!0})),e.next=8,s(n);case 8:m((function(e){return Ze({},Re,{msg:"Upload success."})})),p((function(e){return null})),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),r="",void 0!==e.t0.response&&(r=void 0!==e.t0.response.data?e.t0.response.data:""),""===r&&(r=e.t0.message),m((function(e){return Ze({},Re,{error:r})}));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,r.jsx)(Ee,{file:f,state:b,label:t,name:n,textContent:o,fileAccepts:i,isDisabled:c,handleUpload:g,setSelectedFile:v,clearFile:function(e){e.preventDefault(),p((function(e){return null})),m((function(e){return Re})),u&&u(null)}})}De.propTypes={name:pe().string,label:pe().string,textContent:pe().string,fileAccepts:pe().string,isDisabled:pe().bool,fileUploadMethod:pe().func,onFileSelectedCB:pe().func};var Fe=De,Be={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"250px"}},Ie=n(1908),We=n(4171),Ne=n(9269);var Le=function(e){var t=e.state,n=e.file,a=e.isDisabled,o=e.handleInputChange,i=e.handleInputClick,l=e.handleClearClick,c=e.handleFileUpload,s=e.handleFileSelected;return(0,r.jsxs)(ce.ZP,{container:!0,sx:Be.container,children:[(0,r.jsx)(ce.ZP,{item:!0,xs:12,children:(0,r.jsx)(Fe,{label:"Upload an excel file",name:"excelfile",fileAccepts:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",isDisabled:a,fileUploadMethod:c,onFileSelectedCB:s})}),(0,r.jsxs)(ce.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:[(0,r.jsx)(p.Z,{variant:"subtitle2",children:"Tropical Cyclone Input"}),(0,r.jsxs)(p.Z,{variant:"body2",sx:Be.text,children:["Enter the number of tropical cyclones for each month with reference to its picture on the 3rd tab ",(0,r.jsx)("br",{})," from PAGASA's latest shared seasonal weather forecast excel file."]})]}),(0,r.jsx)(ce.ZP,{item:!0,xs:12,lg:7,children:t.map((function(e,t){return(0,r.jsx)(ue.Z,{id:"month-".concat(t),size:"small",label:e.full,value:e.value,placeholder:"".concat(e.full," no. of cyclones"),sx:Be.rowItem,disabled:a||null===n,onChange:o,onClick:i,InputProps:{startAdornment:(0,r.jsx)(se.Z,{position:"start",children:""===e.value?(0,r.jsx)(Ie.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(We.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(Ne.Z,{fontSize:"small",sx:{color:de.Z[500]}})})}},t)}))}),(0,r.jsx)(ce.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(ce.ZP,{item:!0,xs:4,sx:{marginTop:"12px"},children:(0,r.jsx)(b.Z,{variant:"outlined",onClick:l,disableElevation:!0,children:"Clear"})})]})};function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function He(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Me(o,r,a,i,l,"next",e)}function l(e){Me(o,r,a,i,l,"throw",e)}i(void 0)}))}}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ze(e,t,n[t])}))}return e}function Ve(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ye=["1st month","2nd month","3rd month","4th month","5th month","6th month"];var qe=function(){var e=(0,a.useState)([]),t=e[0],n=e[1],i=(0,a.useState)(null),l=i[0],c=i[1],s=(0,o.I0)(),u=(0,o.v9)((function(e){return e.seasonalweather.status}));(0,a.useEffect)((function(){6===Ye.length&&n(Ye.reduce((function(e,t,n){return Ve(e).concat([{id:n,full:t,month:t,isValid:!1,value:""}])}),[]))}),[false]);var d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",a=e.target,o=a.id,i=a.value,l=o.split("-")[1],c=Ve(t);c[l]&&("clear"===r?(c[l].value="",c[l].isValid=!1):(c[l].value=i,i.length>=15?c[l].isValid=!1:c[l].isValid=""!==i),n((function(e){return c})))},f=function(){n(t.map((function(e){return Ge({},e,{isValid:!1,value:""})})))},p=function(){var e=He(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=He(O().mark((function e(r,a){var o;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.filter((function(e){return!e.isValid})).length>=1)){e.next=4;break}a(new Error("Invalid values found in the tropical cyclones list")),e.next=18;break;case 4:return e.prev=4,e.next=7,z(n);case 7:return o=e.sent,e.next=10,Y({data:t.map((function(e){return{id:e.id,value:e.value}})),region:"bicol",type:E.Uh.CYCLONES_COUNT});case 10:e.sent,s((0,oe.Mj)(o.map((function(e){return Ge({},e,{date_created:(0,ie.NK)(e.date_created)})})))),r(!0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),a(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.jsx)(Le,{state:t,file:l,isDisabled:u===le.G.PENDING,handleInputChange:d,handleClearClick:f,handleInputClick:function(e){d(e,"clear")},handleFileUpload:p,handleFileSelected:function(e){c(e),e||f()}})},Xe=n(9132);function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e={seasonal_update:!1,tenday_update:!1};var Je=function(){var e=(0,a.useState)($e),t=e[0],n=e[1],i=(0,a.useState)(!1),l=i[0],c=i[1],u=(0,o.v9)((function(e){return e.seasonalweather.status})),d=(0,h.useRouter)(),f=function(e){var r=e.target.id;n("cancel"===r?$e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ke(e,t,n[t])}))}return e}({},t,Ke({},r,!0)))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)(v.Z,{open:l,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(j.Z,{id:"data-saved-success",children:"Success"}),(0,r.jsx)(x.Z,{children:(0,r.jsx)(y.Z,{id:"alert-dialog-description",children:"The seasonal weather data are saved successfully."})}),(0,r.jsx)(g.Z,{children:(0,r.jsx)(b.Z,{onClick:function(){d.push("/weather-services")},autoFocus:!0,children:"OK"})})]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:function(e){return e.spacing(1)}},children:[(0,r.jsx)(p.Z,{variant:"h6",children:"Seasonal Weather Forecast Updater"}),(0,r.jsx)(m.Z,{variant:"outlined","aria-label":"outlined button controls group",children:!t.seasonal_update&&!t.tenday_update&&(0,r.jsx)(b.Z,{id:"seasonal_update",disabled:u===le.G.PENDING,onClick:f,children:"Edit"})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(p.Z,{variant:"h7",children:(0,r.jsx)("strong",{children:"Manual Update"})}),(0,r.jsxs)(p.Z,{variant:"body2",sx:Xe.Z.subheader,children:["Copy the Bicol Region's ",(0,r.jsx)("strong",{children:"Rainfall Analysis Forecast"})," from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal Forecast"})," page for each province. Press the ",(0,r.jsx)("strong",{children:"Edit"})," button and double click a cell to start editing."]}),(0,r.jsx)(p.Z,{variant:"h7",children:(0,r.jsx)("strong",{children:"Upload an Excel File"})}),(0,r.jsxs)(p.Z,{variant:"body2",sx:Xe.Z.subheader,children:["Alternatively, you can opt to upload the updated seasonal weather forecast raw data in the excel file provided by PAGASA by clicking the SEARCH button, followed by clicking the UPLOAD button under the ",(0,r.jsx)("strong",{children:"Upload an Excel File"})," option below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"You can use the attached seasonal weather forecast excel file from PAGASA as an example when an uploading excel file.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://firebasestorage.googleapis.com/v0/b/climate-webservices.appspot.com/o/files%2Fseasonal_forecast_example.xlsx?alt=media&token=d32aaa95-1827-4869-a9e3-535b5ec14026",target:"__blank",children:"[example excel file]"})]}),!t.seasonal_update&&(0,r.jsxs)("div",{children:[(0,r.jsx)(ae.Z,{withBorder:!0}),(0,r.jsx)(qe,{})]}),t.seasonal_update&&(0,r.jsx)(re,{onCancelClick:f,onAsyncFinish:function(){return c((function(e){return!e}))}})]})},Qe=n(7682),et=n(1234),tt=n(560),nt=n(7918);function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=(0,he.ZP)((function(e){return(0,r.jsx)(s.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rt(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:t.spacing(1),marginBottom:t.spacing(3),"& ul":{listStyle:"none",paddingLeft:t.spacing(3)}}})),ot=at;var it=function(e){return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(p.Z,{sx:{marginTop:function(e){return e.spacing(4)}},variant:"h6",children:e.title}),(0,r.jsx)(ot,{children:e.children})]})},lt={subheader:function(e){return{marginBottom:e.spacing(2),color:"gray",marginTop:e.spacing(1),"& a":{color:e.palette.green.dark,textDecoration:"none"},"& a:visited":{color:e.palette.green.dark},"& a:hover, span:hover":{textDecoration:"underline"}}},summary:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(3)},"& ul":{listStyle:"none"}},upload:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"90px",border:"1px solid gray",borderRadius:"8px",fontSize:"14px",color:function(e){return e.palette.text.secondary},padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(1)}},notification:{maxWidth:"500px",marginBottom:function(e){return e.spacing(2)}}},ct=(0,he.ZP)("input")({display:"none"});var st=function(e){var t=e.files,n=void 0===t?[]:t,a=e.status,o=e.logs,i=e.handleSubmit,l=e.handleSelectFiles;return(0,r.jsxs)(s.Z,{sx:{"& li":{fontSize:"14px"}},children:[(0,r.jsx)(p.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"10-Day Weather Forecast Updater"}),(0,r.jsx)(p.Z,{variant:"body2",sx:lt.subheader,children:"This panel updates the site's 10-Day Weather Forecast data by manually uploading the excel files from PAGASA. Follow the steps to update the site's 10-Day Weather Forecast data:"}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:["Download all (10) excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10 Day Climate Forecast"})," web page."]}),(0,r.jsx)("li",{children:"Press the SELECT FILES button and select all the excel files."}),(0,r.jsx)("li",{children:"Press the SUBMIT button."}),(0,r.jsx)("li",{children:"Wait for the upload process to finish."})]}),(0,r.jsx)(it,{title:"Current Data Update Summary",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",o.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",o.date_valid]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",o.date_forecast]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",o.date_synced]})]})}),(0,r.jsx)(s.Z,{sx:lt.upload,children:0===n.length?(0,r.jsx)("span",{children:"Select excel files."}):(0,r.jsx)(s.Z,{sx:{"& div":{margin:"2px"}},children:Array.from(n).map((function(e,t){return(0,r.jsx)(nt.Z,{label:e.name,size:"small"},"excel-".concat(t))}))})}),(0,r.jsxs)(s.Z,{sx:lt.notification,children:[!a.loading&&""!==a.error&&(0,r.jsx)(q.Z,{severity:"error",children:a.error}),!a.loading&&""!==a.msg&&(0,r.jsx)(q.Z,{severity:"success",children:a.msg})]}),(0,r.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,r.jsx)(ct,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!0,type:"file",name:"excel-files",onChange:l,disabled:a.loading}),(0,r.jsxs)(b.Z,{variant:"contained",component:"span",disabled:a.loading,children:["Select Files",(0,r.jsx)(X.Z,{size:20,color:"secondary",sx:{display:a.loading?"block":"none"}})]}),(0,r.jsx)(b.Z,{type:"submit",onClick:i,disabled:a.loading,children:"Submit"})]})]})};function ut(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){dt(e,t,n[t])}))}return e}var pt={loading:!1,error:"",msg:""},ht={updated_by:"",date_forecast:"",date_synced:"",date_valid:""};var bt=function(e){var t=e.getDateToString,n=(0,a.useState)([]),o=n[0],i=n[1],l=(0,a.useState)(pt),c=l[0],s=l[1],u=(0,a.useState)(ht),d=u[0],f=u[1],p=(0,Qe.tl)(tt.M.WEATHER_FORECASTS,"bicol","ten_day","name",1),h=p.documents,b=p.loading,m=p.error;(0,a.useEffect)((function(){b||""!==m||v(h)}),[b,m,h,v]);var v=(0,a.useCallback)((function(e){var n=Object.values(e[0].municipalities)[0][0],r={updated_by:e[0].updated_by,date_synced:t(e[0].date_created)};r.date_forecast=n.date_forecast,r.date_valid=n.date_range,f(r)}),[t]),g=function(){var e,t=(e=O().mark((function e(){var t,n,r,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new FormData,n=0;n<o.length;n+=1)t.append("excel-files",o[n]);return e.prev=2,s(ft({},pt,{loading:!0})),e.next=6,V(t);case 6:s((function(e){return ft({},pt,{loading:!1,msg:"Upload success."})})),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),r=e.t0.response?e.t0.response.data:e.t0.message,s(ft({},pt,{loading:!1,error:r})),e.abrupt("return");case 14:return e.prev=14,e.next=17,(0,et.vx)();case 17:a=e.sent,v(a),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error(e.t1.message);case 24:case"end":return e.stop()}}),e,null,[[2,9],[14,21]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ut(o,r,a,i,l,"next",e)}function l(e){ut(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsx)(st,{files:o,status:c,logs:d,handleSubmit:g,handleSelectFiles:function(e){s(pt),i(e.target.files)}})};var mt=function(e){var t=e.state,n=e.cycloneLoading,a=e.onSyncPress;return(0,r.jsxs)(s.Z,{sx:{fontSize:"14px"},children:[(0,r.jsx)(xe.Z,{openSnackbar:""!==t.error||""!==t.msg,message:""!==t.error?t.error:t.msg,severity:""!==t.error?"error":"success"}),(0,r.jsx)(p.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"Tropical Cyclone Bulletin Updater"}),(0,r.jsxs)(p.Z,{variant:"body2",sx:lt.subheader,children:["This panel updates ACAP's ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," content by manually initiating the  process of syncing PAGASA's latest published tropical cyclone data from their ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP."]}),(0,r.jsx)(p.Z,{variant:"body2",sx:lt.subheader,children:"Press the SYNC button below to start the data syncing process."}),(0,r.jsx)(it,{title:"Current Data Update Summary",children:!n&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",t.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",t.date_updated]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Summary:"}),"\xa0 ",t.summary]})]})}),(0,r.jsx)(b.Z,{variant:"contained",onClick:a,disabled:n||t.loading,children:"Sync"})]})},vt=n(1029);function gt(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jt(e,t,n[t])}))}return e}function St(e,t){return!t||"object"!==Ct(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e,t){return Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pt(e,t)}var Ct=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function At(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wt(e);if(t){var a=wt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return St(this,n)}}var Et={SPECIAL_WEATHER_CYCLONE:"".concat("https://amia-cis-temp.herokuapp.com/api","/cyclone")},kt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(o,e);var t,n,r,a=At(o);function o(){return xt(this,o),a.apply(this,arguments)}return t=o,n=[{key:"updateSpecialWeather",value:function(e){var t,n=this;return(t=O().mark((function t(){var r,a;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({body:e});case 2:return r=t.sent,t.next=5,C()(Ot({},r,{url:Et.SPECIAL_WEATHER_CYCLONE,method:"POST"}));case 5:return a=t.sent,t.abrupt("return",a.data);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){gt(o,r,a,i,l,"next",e)}function l(e){gt(o,r,a,i,l,"throw",e)}i(void 0)}))})()}}],n&&yt(t.prototype,n),r&&yt(t,r),o}(A.Z),_t=new kt,Tt=_t.updateSpecialWeather.bind(_t);function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void n(s)}l.done?t(c):Promise.resolve(c).then(r,a)}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Dt(e,t,n[t])}))}return e}function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var It=n(7294),Wt=It.useEffect,Nt=It.useState,Lt=It.useRef,Ut={loading:!1,error:"",msg:"",updated_by:"",date_updated:"",summary:""};var Mt=function(e){var t=e.getDateToString,n=Bt((0,Qe.ky)(vt.K.GLOBAL_COLLECTIONS,vt.K.CYCLONE_ADVISORY),3),a=n[0],o=n[1],i=n[2],l=Bt(Nt(Ut),2),c=l[0],s=l[1],u=Lt(!1);Wt((function(){return u.current=!0,function(){u.current=!1}}),[]),Wt((function(){if(!o){if(!u.current)return;s(i?{error:i}:{loading:!1,error:"",msg:"",updated_by:"system"===a.updated_by?"system":a.email,date_updated:t(a.date_updated),summary:a.summary})}}),[o,a,i,t]);var d=function(){var e,t=(e=O().mark((function e(){var t,n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Ft({},c,{loading:!0,error:"",msg:""})),e.next=4,Tt({});case 4:t=e.sent,n=new Date(1e3*t.date_updated._seconds),t.date_updated="".concat(n.toDateString()," ").concat(n.toLocaleTimeString("it-IT",ie.W6)),u.current&&s((function(e){return Ft({},e,{loading:!1,msg:"Successfully synced data.",updated_by:"system"===t.updated_by?"system":t.email,date_updated:t.date_updated,summary:t.summary})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),u.current&&s((function(t){return Ft({},t,{loading:!1,error:e.t0.message})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rt(o,r,a,i,l,"next",e)}function l(e){Rt(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsx)(mt,{state:c,cycloneLoading:o,onSyncPress:d})},Ht={tabsContainer:{marginTop:function(e){return e.spacing(8)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tabsMain:{marginTop:function(e){return e.spacing(4)}}};function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zt(e,t,n[t])}))}return e}var Vt=function(){var e=(0,a.useState)(0),t=e[0],n=e[1];return(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Z,{variant:"h5",children:"Weather Services Updater"}),(0,r.jsxs)("p",{children:["Update the site-wide ",(0,r.jsx)("strong",{children:"Weather Services"})," information for the ",(0,r.jsx)("strong",{children:"Seasonal"})," and ",(0,r.jsx)("strong",{children:"10-Day"})," Weather Forecasts by manually encoding the required data with reference from PAGASA's weather forecasts on ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast"}),"."]}),(0,r.jsxs)("p",{children:["Please take caution in updating these information because they will be automatically referenced by all site admins when creating crop and climate risks bulletins on the ",(0,r.jsx)("strong",{children:"Create Crop Bulletins"})," and ",(0,r.jsx)("strong",{children:"Create Risks Bulletins"})," Admin pages. Global data updates made by admins are also viewable on the site's public ",(0,r.jsx)("strong",{children:"ACAP Services"})," and ",(0,r.jsx)("strong",{children:"Crop Recommendations"})," pages."]}),(0,r.jsxs)(s.Z,{sx:Ht.tabsContainer,children:[(0,r.jsxs)(d.Z,{value:t,onChange:function(e,t){n(t)},"aria-label":"weather services updater",children:[(0,r.jsx)(u.Z,Gt({label:"Seasonal"},(0,f.P)(0))),(0,r.jsx)(u.Z,Gt({label:"10-Day"},(0,f.P)(1))),(0,r.jsx)(u.Z,Gt({label:"Tropical Cyclone"},(0,f.P)(2)))]}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(f.x,{value:t,index:0,children:(0,r.jsx)(Je,{})}),(0,r.jsx)(f.x,{value:t,index:1,children:(0,r.jsx)(bt,{getDateToString:ie.Xn})}),(0,r.jsx)(f.x,{value:t,index:2,children:(0,r.jsx)(Mt,{getDateToString:ie.Xn})})]})]})]})};var Yt=(0,l.Z)((function(e){var t=(0,o.I0)(),n=(0,o.v9)((function(e){return e.provinces.ids}));return(0,a.useEffect)((function(){0===n.length&&t((0,i.Q)())}),[t,n]),(0,r.jsx)(c.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:E.DW.ADMIN,children:(0,r.jsx)(Vt,{})})}))}},function(e){e.O(0,[9351,6153,9964,1704,1903,7823,6295,4039,2882,9576,6572,1433,9958,6597,3728,6454,1343,9774,2888,179],(function(){return t=1158,e(e.s=t);var t}));var t=e.O();_N_E=t}]);