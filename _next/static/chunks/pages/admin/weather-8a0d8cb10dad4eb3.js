(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3359],{6863:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(3366),o=n(7462),a=n(7294),i=n(6010),c=n(7192),l=n(1796),s=n(8216),u=n(1496),d=n(3616),p=n(8979);function f(e){return(0,p.Z)("MuiButtonGroup",e)}var h=(0,n(6087).Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),b=n(8363),g=n(5893);const m=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],v=(0,u.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${h.grouped}`]:t.grouped},{[`& .${h.grouped}`]:t[`grouped${(0,s.Z)(n.orientation)}`]},{[`& .${h.grouped}`]:t[`grouped${(0,s.Z)(n.variant)}`]},{[`& .${h.grouped}`]:t[`grouped${(0,s.Z)(n.variant)}${(0,s.Z)(n.orientation)}`]},{[`& .${h.grouped}`]:t[`grouped${(0,s.Z)(n.variant)}${(0,s.Z)(n.color)}`]},t.root,t[n.variant],!0===n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,"vertical"===n.orientation&&t.vertical]}})((({theme:e,ownerState:t})=>(0,o.Z)({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===t.variant&&{boxShadow:e.shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},"vertical"===t.orientation&&{flexDirection:"column"},{[`& .${h.grouped}`]:(0,o.Z)({minWidth:40,"&:not(:first-of-type)":(0,o.Z)({},"horizontal"===t.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===t.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===t.variant&&"horizontal"===t.orientation&&{marginLeft:-1},"outlined"===t.variant&&"vertical"===t.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,o.Z)({},"horizontal"===t.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===t.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===t.variant&&"horizontal"===t.orientation&&{borderRight:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===t.variant&&"vertical"===t.orientation&&{borderBottom:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===t.variant&&"inherit"!==t.color&&{borderColor:(0,l.Fq)(e.palette[t.color].main,.5)},"outlined"===t.variant&&"horizontal"===t.orientation&&{borderRightColor:"transparent"},"outlined"===t.variant&&"vertical"===t.orientation&&{borderBottomColor:"transparent"},"contained"===t.variant&&"horizontal"===t.orientation&&{borderRight:`1px solid ${e.palette.grey[400]}`,[`&.${h.disabled}`]:{borderRight:`1px solid ${e.palette.action.disabled}`}},"contained"===t.variant&&"vertical"===t.orientation&&{borderBottom:`1px solid ${e.palette.grey[400]}`,[`&.${h.disabled}`]:{borderBottom:`1px solid ${e.palette.action.disabled}`}},"contained"===t.variant&&"inherit"!==t.color&&{borderColor:e.palette[t.color].dark},{"&:hover":(0,o.Z)({},"outlined"===t.variant&&"horizontal"===t.orientation&&{borderRightColor:"currentColor"},"outlined"===t.variant&&"vertical"===t.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":(0,o.Z)({},"contained"===t.variant&&{boxShadow:"none"})},"contained"===t.variant&&{boxShadow:"none"})})));var y=a.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiButtonGroup"}),{children:l,className:u,color:p="primary",component:h="div",disabled:y=!1,disableElevation:x=!1,disableFocusRipple:j=!1,disableRipple:w=!1,fullWidth:O=!1,orientation:S="horizontal",size:Z="medium",variant:P="outlined"}=n,_=(0,r.Z)(n,m),C=(0,o.Z)({},n,{color:p,component:h,disabled:y,disableElevation:x,disableFocusRipple:j,disableRipple:w,fullWidth:O,orientation:S,size:Z,variant:P}),A=(e=>{const{classes:t,color:n,disabled:r,disableElevation:o,fullWidth:a,orientation:i,variant:l}=e,u={root:["root",l,"vertical"===i&&"vertical",a&&"fullWidth",o&&"disableElevation"],grouped:["grouped",`grouped${(0,s.Z)(i)}`,`grouped${(0,s.Z)(l)}`,`grouped${(0,s.Z)(l)}${(0,s.Z)(i)}`,`grouped${(0,s.Z)(l)}${(0,s.Z)(n)}`,r&&"disabled"]};return(0,c.Z)(u,f,t)})(C),E=a.useMemo((()=>({className:A.grouped,color:p,disabled:y,disableElevation:x,disableFocusRipple:j,disableRipple:w,fullWidth:O,size:Z,variant:P})),[p,y,x,j,w,O,Z,P,A.grouped]);return(0,g.jsx)(v,(0,o.Z)({as:h,role:"group",className:(0,i.Z)(A.root,u),ref:t,ownerState:C},_,{children:(0,g.jsx)(b.Z.Provider,{value:E,children:l})}))}))},8951:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(3366),o=n(7462),a=n(7294),i=n(7192),c=n(1496),l=n(3616),s=n(5861),u=n(8979);function d(e){return(0,u.Z)("MuiDialogContentText",e)}(0,n(6087).Z)("MuiDialogContentText",["root"]);var p=n(5893);const f=["children"],h=(0,c.ZP)(s.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var b=a.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiDialogContentText"}),a=(0,r.Z)(n,f),c=(e=>{const{classes:t}=e,n=(0,i.Z)({root:["root"]},d,t);return(0,o.Z)({},t,n)})(a);return(0,p.jsx)(h,(0,o.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:a},n,{classes:c}))}))},1158:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/weather",function(){return n(3112)}])},9132:function(e,t){"use strict";t.Z={tablecontainer:{marginTop:function(e){return e.spacing(1)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},borderRadius:function(e){return e.spacing(1)},boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tablecell:{border:"1px solid",textAlign:"center"},subheader:{marginBottom:function(e){return e.spacing(4)},maxWidth:"800px",color:"gray"},labels:{fontSize:"12px",color:function(e){return e.palette.secondary.light}},legend:{margin:function(e){return e.spacing(1)},fontSize:"14px",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"baseline"},"& ul":{listStyle:"none","& li":{marginRight:"10px"},span:{border:"1px solid #ccc",float:"left",width:"12px",height:"12px",margin:"4px"}},"& .wb_normal":{backgroundColor:"red",color:"#fff"},"& .b_normal":{backgroundColor:"yellow"},"& .near_normal":{backgroundColor:"#00c300"},"& .above_normal":{backgroundColor:"blue",color:"#fff"}}}},2509:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),o=n(9473),a=n(1163),i=n(7357),c=n(7906),l=n(295),s=n(3252),u=n(2882),d=n(3184),p=n(3816),f=n(1033),h=n(8078),b={container:{minHeight:"200px",width:"100%",border:"2px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(4)}}};var g=function(e){var t=e.rows,n=void 0===t?3:t,o=e.cols,a=void 0===o?3:o;return(0,r.jsx)(i.Z,{sx:b.container,children:Array.from(Array(n).keys()).map((function(e,t){return(0,r.jsx)("div",{style:{margin:"2px",display:"flex"},children:Array.from(Array(a).keys()).map((function(e,t){return(0,r.jsx)(h.Z,{animation:"wave",variant:"rectangular",height:25,sx:{margin:"3px",width:"".concat(Math.round(100/a),"%")}},"col-".concat(t))}))},"row-".concat(t))}))})},m=n(7426),v=n(213),y=n(7715),x=n(9132);var j=function(e){var t=e.weatherData,n=e.withBorder,h=void 0!==n&&n,b=e.fsLoading,j=void 0===b||b,w=(0,o.v9)((function(e){return e.provinces.entities})),O=(0,a.useRouter)(),S=function(e){var t="";if(0===Object.values(w).length)return"n/a";try{t=Object.values(w).find((function(t){return t.name===e})).label}catch(n){t="n/a"}return t},Z=function(e){var t=e.children;return h?(0,r.jsx)(u.Z,{sx:x.Z.tablecontainer,children:t}):(0,r.jsx)(u.Z,{children:t})};return(0,r.jsx)("div",{children:j?(0,r.jsx)(g,{rows:7,cols:7}):t.length>0?(0,r.jsxs)(Z,{children:[(0,r.jsxs)(c.Z,{sx:{minWidth:650},"aria-label":"simple table",size:"small",children:[(0,r.jsx)(d.Z,{children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(s.Z,{sx:{width:"20%"},children:"Province"}),t[0].mos.map((function(e,t){return(0,r.jsx)(s.Z,{sx:{textAlign:"center"},children:"".concat(e[0].toUpperCase()).concat(e.slice(1))},"".concat(e,"-").concat(t))}))]})}),(0,r.jsx)(l.Z,{children:t.map((function(e){return(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(s.Z,{children:S(e.name)}),e.months.map((function(e,t){return(0,r.jsx)(s.Z,{sx:{backgroundColor:m.tN[e.con],border:"1px solid #000",textAlign:"center",fontSize:"14px",padding:"10px",color:["above_normal","wb_normal"].includes(e.con)?"#fff":"#000"},children:e.val},"".concat(e.mo,"-").concat(t))}))]},e.name)}))})]}),(0,r.jsxs)(i.Z,{sx:x.Z.legend,children:[(0,r.jsxs)(v.Z,{children:["Encoded from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal (Rainfall) Forecast"})," web page ",(0,r.jsx)("br",{}),"by ","/admin/weather"===O.pathname?t[0].updated_by:"an admin"," on \xa0",(0,y.Xn)(t[0].date_created)]}),(0,r.jsx)("ul",{children:Object.values(m.MW).map((function(e){return(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{style:{backgroundColor:m.tN[e.label]}}),e.sync," (",e.content,")"]},e.id)}))})]})]}):(0,r.jsx)(f.Z,{})})}},213:function(e,t,n){"use strict";var r=n(5893),o=n(5861);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,n(1496).ZP)((function(e){return(0,r.jsx)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({component:"p",variant:"caption"},e))}))((function(e){var t=e.theme;return{color:t.palette.text.secondary,"& a":{color:t.palette.green.dark,textDecoration:"none"},"& a:visited":{color:t.palette.green.dark},"& a:hover, span:hover":{textDecoration:"underline"}}}));t.Z=i},1033:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893),o=n(5675),a=n(7357),i=n(5861),c=n(120),l={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(4)}}};var s=function(e){var t=e.message,n=void 0===t?"Failed to load data":t,s=e.style,u=void 0===s?{}:s;return(0,r.jsxs)(a.Z,{sx:l.container,style:u,children:[(0,r.jsx)(o.default,{unoptimized:!0,src:(0,c.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:c.imageLoader,alt:"Empty data"}),(0,r.jsx)(i.Z,{variant:"subtitle1",children:n})]})}},5322:function(e,t,n){"use strict";var r=n(5893),o=n(7294),a=n(5697),i=n.n(a),c=n(4866),l=n(6901);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=o.forwardRef((function(e,t){return(0,r.jsx)(l.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({elevation:6,ref:t,variant:"filled"},e))}));function d(e){var t=e.openSnackbar,n=e.message,a=e.severity,i=e.closeHandlerCB,l=void 0===i?function(){}:i,s=(0,o.useState)(t),d=s[0],p=s[1];(0,o.useEffect)((function(){p(t)}),[t]);var f=function(){p(!1),l()};return(0,r.jsx)(c.Z,{open:d,autoHideDuration:3e3,onClose:f,children:(0,r.jsx)(u,{onClose:f,severity:a,sx:{width:"100%"},children:n})})}d.propTypes={openSnackbar:i().bool,message:i().string,severity:i().string},t.Z=d},6601:function(e,t,n){"use strict";n.d(t,{x:function(){return c},P:function(){return l}});var r=n(5893),o=n(7357);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=function(e){var t=e.children,n=e.value,c=e.index,l=i(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({role:"tabpanel",hidden:n!==c,id:"custom-tabpanel-".concat(c),"aria-labelledby":"custom-tab-".concat(c)},l,{children:n===c&&(0,r.jsx)(o.Z,{sx:{p:3},children:t})}))};var l=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},3112:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ot}});var r=n(5893),o=n(7294),a=n(9473),i=n(4822),c=n(7682),l=n(3059),s=n(2530),u=n(7357),d=n(44),p=n(8409),f=n(6601),h=n(5861),b=n(1163),g=n(1057),m=n(6863),v=n(657),y=n(1425),x=n(6580),j=n(8951),w=n(7645),O=n(4051),S=n.n(O),Z=n(3539),P=n(9669),_=n.n(P),C=n(9431),A=n(7426);function E(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){E(a,r,o,i,c,"next",e)}function c(e){E(a,r,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}function L(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e,t){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(e,t)}var M=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}var I={BASE_API_URL:"https://amia-cis-temp.herokuapp.com/api",WEATHER_FORECAST_SEASONAL:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/seasonal/region"),WEATHER_FORECAST_PROVINCE:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/seasonal/province"),WEATHER_FORECAST_TEN_DAY:"".concat("https://amia-cis-temp.herokuapp.com/api","/weather/10day")},z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(a,e);var t,n,r,o=N(a);function a(){return k(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"upsertSeasonal",value:function(e){var t=this;return R(S().mark((function n(){var r,o;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,_()(B({},r,{url:I.WEATHER_FORECAST_SEASONAL,method:"POST"}));case 5:return o=n.sent,n.abrupt("return",o.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"upsertTenDay",value:function(e){var t=this;return R(S().mark((function n(){var r,o;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,_()(B({},r,{url:I.WEATHER_FORECAST_TEN_DAY,method:"POST"}));case 5:return o=n.sent,n.abrupt("return",o.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"getweathercondition",value:function(e){var t="";return e<=40&&(t=A.MW.WAY_BELOW_NORMAL.label),e>=41&&e<=80&&(t=A.MW.BELOW_NORMAL.label),e>=81&&e<=120&&(t=A.MW.NEAR_NORMAL.label),e>120&&(t=A.MW.ABOVE_NORMAL.label),t}}])&&T(t.prototype,n),r&&T(t,r),a}(C.Z),$=new z,H=$.upsertSeasonal.bind($),U=$.getweathercondition.bind($),G=$.upsertTenDay.bind($),V=n(6901),Y=n(8456),q={datagrid:{borderRadius:2,"& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(e){return e.palette.primary.dark},fontSize:16,"& select":{width:"100px",height:"32px",border:"none !important",outline:"none !important",fontSize:16}}},gridContainer:{height:500,"& .wb_normal":{backgroundColor:"red",color:"#fff"},"& .b_normal":{backgroundColor:"yellow"},"& .near_normal":{backgroundColor:"#00c300"},"& .above_normal":{backgroundColor:"blue",color:"#fff"}}};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){K(e,t,n[t])}))}return e}function ee(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te={loading:!1,show:!1,error:"",msg:"",saveDisabled:!1};var ne=function(e){var t=e.weatherData,n=e.onCancelClick,i=e.onAsyncFinish,c=(0,a.v9)((function(e){return e.provinces})),l=c.ids,s=c.entities,d=(0,o.useState)([]),p=d[0],f=d[1],h=(0,o.useState)([]),b=h[0],v=h[1],y=(0,o.useState)([]),x=y[0],j=y[1],w=(0,o.useState)(te),O=w[0],P=w[1],_=[{id:0,label:"Jan"},{id:1,label:"Feb"},{id:2,label:"Mar"},{id:3,label:"Apr"},{id:4,label:"May"},{id:5,label:"Jun"},{id:6,label:"Jul"},{id:7,label:"Aug"},{id:8,label:"Sep"},{id:9,label:"Oct"},{id:10,label:"Nov"},{id:11,label:"Dec"}];(0,o.useEffect)((function(){t.length>0&&W()}),[t.length,W]);var C=function(){var e,t=(e=S().mark((function e(){var t,n,r,o,a,c,l,s,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.getElementsByTagName("select"),n=[],r=!0,o=0;o<t.length;o+=1)a=document.getElementById("select-mo-".concat(o)),n.push(D(a.value));if(R(n)&&6===p.length){e.next=7;break}return P(Q({},te,{show:!0,loading:!1,error:"Invalid months sequence."})),e.abrupt("return");case 7:c=0;case 8:if(!(c<p.length)){e.next=20;break}l=0;case 10:if(!(l<p[c].length)){e.next=17;break}if(E(p[c][l])){e.next=14;break}return r=!1,e.abrupt("break",17);case 14:l+=1,e.next=10;break;case 17:c+=1,e.next=8;break;case 20:if(r){e.next=23;break}return P(Q({},te,{show:!0,error:"Invalid cell values."})),e.abrupt("return");case 23:return e.prev=23,P(Q({},te,{loading:!0})),e.next=27,H(T(n));case 27:i(),e.next=37;break;case 30:e.prev=30,e.t0=e.catch(23),s="",void 0!==e.t0.response&&(s=void 0!==e.t0.response.data?e.t0.response.data:""),""===s&&(s=e.t0.message),u=s.replaceAll(/Firebase/g,""),P((function(e){return Q({},e,{show:!0,loading:!1,error:u})}));case 37:case"end":return e.stop()}}),e,null,[[23,30]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){J(a,r,o,i,c,"next",e)}function c(e){J(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),E=function(e){return isNaN(e)||""===e?(P(Q({},te,{show:!0,error:"Not a number"})),!1):(P(te),!0)},R=function(e){for(var t=e.map((function(e){return e+1})),n=!0,r=0;r<t.length-1&&(!(1!==Math.abs(t[r+1]-t[r])||t[r+1]<t[r])||(n=!1,12===t[r]&&1===t[r+1]&&(n=!0),n));)r+=1;return n},k=function(e){var n=e.props.value,r=E(n)?n:"ERROR",o=e.id,a=(t.length>0?t[0].mos:[]).indexOf(e.field),i=ee(p),c=i[o];c[a]=r,i[o]=c,f((function(e){return i}))},T=function(e){for(var t={region:Object.values(s).length>0?Object.values(s)[0].region:"",provinces:[]},n=0;n<p.length;n+=1){for(var r={name:s[l[n]].label,months:[]},o=0;o<e.length;o+=1)r.months.push({mo:_[e[o]].label.toLowerCase(),val:p[n][o],con:U(p[n][o])});t.provinces.push(r)}return t},D=function(e){for(var t=0,n=0;n<_.length;n+=1)if(_[n].label.toLowerCase()===e.toLowerCase()){t=n;break}return t},W=function(){var e=function(e){var n=t[0].mos[e];a.push({field:n,headerName:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1)),width:110,editable:!0,sortable:!1,disableColumnMenu:!0,renderHeader:function(t){return(0,r.jsxs)("select",{onChange:function(t){return function(e,t){var n=e.target.value;document.getElementById("select-mo-".concat(t)).setAttribute("value",D(n))}(t,e)},id:"select-mo-".concat(e),defaultValue:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1)),children:[(0,r.jsx)("option",{children:"Month"}),_.map((function(e,t){return(0,r.jsx)("option",{children:e.label},"mo-".concat(t))}))]})}})},n=function(e){var n=function(n){var o=t[e],i=o.months.filter((function(e){return e.mo===o.mos[n]}));1===i.length?(r[o.mos[n]]=i[0].val,a.push(i[0].val)):(r[o.mos[n]]="n/a",a.push("n/a"))},r={},a=[],l=function(e){var t="";if(0===Object.values(s).length)return"n/a";try{t=Object.values(s).find((function(t){return t.name===e})).label}catch(n){t="n/a"}return t}(t[e].name);c[l]=t[e].name,r.id=e,r.rowId=e,r.province=l,r.editable=!0;for(var u=0;u<t[e].mos.length;u+=1)n(u);o.push(r),i.push(a)},o=[],a=[],i=[],c={};a.push({field:"province",headerName:"Province",width:180,sortable:!1,disableColumnMenu:!0});for(var l=0;l<t[0].mos.length;l+=1)e(l);for(var u=0;u<t.length;u+=1)n(u);j(a),v(o),f(i)};return(0,r.jsxs)("div",{style:{height:500,width:"100%"},children:[(0,r.jsxs)(u.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"baseline",marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{minWidth:"40%"},children:(0,r.jsx)(V.Z,{severity:""!==O.error?"error":"success",sx:{fontSize:"12px",minHeight:"32px",width:"100%",visibility:O.show?"initial":"hidden"},children:""!==O.error?O.error:O.msg})}),(0,r.jsxs)(m.Z,{variant:"outlined","aria-label":"outlined button controls group",sx:{float:"right",marginTop:"24px","& button":{width:"50%"}},children:[(0,r.jsx)(g.Z,{id:"cancel",onClick:n,disabled:O.loading,children:"Cancel"}),(0,r.jsxs)(g.Z,{onClick:function(){var e=function(){return document.getElementsByTagName("select").length};if(P(Q({},te,{loading:!0})),e()<6){var t=document.getElementsByClassName("MuiDataGrid-virtualScroller");if(t.length>0)var n=t[0].scrollWidth,r=setInterval((function(){n<=0&&(clearInterval(r),6===e()?C():P(Q({},te,{show:!0,loading:!1,error:"Please edit the table cells on a larger screen."}))),t[0].scrollLeft+=3,n-=3}))}else C()},disabled:O.loading||O.saveDisabled,variant:"contained",children:[(0,r.jsx)("span",{style:{display:O.loading?"none":"block"},children:"Save"})," \xa0",(0,r.jsx)(Y.Z,{size:20,color:"secondary",sx:{display:O.loading?"block":"none"}})]})]})]}),(0,r.jsx)(u.Z,{sx:q.gridContainer,children:(0,r.jsx)(Z._,{rows:b,columns:x,sx:q.datagrid,customH:!0,editMode:"row",rowsPerPageOptions:[],getCellClassName:function(e){return void 0!==A.re[e.field.toUpperCase()]?U(e.value):""},isCellEditable:function(){return!O.loading},onEditCellPropsChange:function(e){P(te),k(e)},initialState:{columns:{columnVisibilityModel:{rowId:!1}}}})})]})},re=n(2509),oe=n(9132);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie={seasonal_update:!1,tenday_update:!1};var ce=function(e){var t=e.weatherData,n=e.provinces,a=e.fsLoading,i=(0,o.useState)(ie),c=i[0],l=i[1],s=(0,o.useState)(!1),d=s[0],p=s[1],f=(0,b.useRouter)(),O=function(e){var t=e.target.id;l("cancel"===t?ie:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}({},c,ae({},t,!0)))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)(v.Z,{open:d,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(w.Z,{id:"data-saved-success",children:"Success"}),(0,r.jsx)(x.Z,{children:(0,r.jsx)(j.Z,{id:"alert-dialog-description",children:"The seasonal weather data are saved successfully."})}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(g.Z,{onClick:function(){f.push("/weather-services")},autoFocus:!0,children:"OK"})})]}),(0,r.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:function(e){return e.spacing(1)}},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Seasonal Weather Forecast Updater"}),(0,r.jsx)(m.Z,{variant:"outlined","aria-label":"outlined button controls group",children:!c.seasonal_update&&!c.tenday_update&&(0,r.jsx)(g.Z,{id:"seasonal_update",onClick:O,children:"Edit"})})]}),(0,r.jsxs)(h.Z,{variant:"body2",sx:oe.Z.subheader,children:["Copy the Bicol Region's ",(0,r.jsx)("strong",{children:"Rainfall Analysis Forecast"})," from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal Forecast"})," page for each province. Press the ",(0,r.jsx)("strong",{children:"Edit"})," button and double click a cell to start editing."]}),!c.seasonal_update&&(0,r.jsx)(re.Z,{weatherData:t,provinces:n,withBorder:!0,fsLoading:a}),c.seasonal_update&&(0,r.jsx)(ne,{weatherData:t,provinces:n,onCancelClick:O,onAsyncFinish:function(){return p((function(e){return!e}))}})]})},le=n(1234),se=n(560),ue=n(1496),de=n(7918);function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=(0,ue.ZP)((function(e){return(0,r.jsx)(u.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pe(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:t.spacing(1),marginBottom:t.spacing(3),"& ul":{listStyle:"none",paddingLeft:t.spacing(3)}}})),he=fe;var be=function(e){return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(4)}},variant:"h6",children:e.title}),(0,r.jsx)(he,{children:e.children})]})},ge={subheader:function(e){return{marginBottom:e.spacing(2),color:"gray",marginTop:e.spacing(1),"& a":{color:e.palette.green.dark,textDecoration:"none"},"& a:visited":{color:e.palette.green.dark},"& a:hover, span:hover":{textDecoration:"underline"}}},summary:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(3)},"& ul":{listStyle:"none"}},upload:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"90px",border:"1px solid gray",borderRadius:"8px",fontSize:"14px",color:function(e){return e.palette.text.secondary},padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(1)}},notification:{maxWidth:"500px",marginBottom:function(e){return e.spacing(2)}}},me=(0,ue.ZP)("input")({display:"none"});var ve=function(e){var t=e.files,n=void 0===t?[]:t,o=e.status,a=e.logs,i=e.handleSubmit,c=e.handleSelectFiles;return(0,r.jsxs)(u.Z,{sx:{"& li":{fontSize:"14px"}},children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"10-Day Weather Forecast Updater"}),(0,r.jsx)(h.Z,{variant:"body2",sx:ge.subheader,children:"This panel updates the site's 10-Day Weather Forecast data by manually uploading the excel files from PAGASA. Follow the steps to update the site's 10-Day Weather Forecast data:"}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:["Download all (10) excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10 Day Climate Forecast"})," web page."]}),(0,r.jsx)("li",{children:"Press the SELECT FILES button and select all the excel files."}),(0,r.jsx)("li",{children:"Press the SUBMIT button."}),(0,r.jsx)("li",{children:"Wait for the upload process to finish."})]}),(0,r.jsx)(be,{title:"Current Data Update Summary",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",a.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",a.date_valid]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",a.date_forecast]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",a.date_synced]})]})}),(0,r.jsx)(u.Z,{sx:ge.upload,children:0===n.length?(0,r.jsx)("span",{children:"Select excel files."}):(0,r.jsx)(u.Z,{sx:{"& div":{margin:"2px"}},children:Array.from(n).map((function(e,t){return(0,r.jsx)(de.Z,{label:e.name,size:"small"},"excel-".concat(t))}))})}),(0,r.jsxs)(u.Z,{sx:ge.notification,children:[!o.loading&&""!==o.error&&(0,r.jsx)(V.Z,{severity:"error",children:o.error}),!o.loading&&""!==o.msg&&(0,r.jsx)(V.Z,{severity:"success",children:o.msg})]}),(0,r.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,r.jsx)(me,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!0,type:"file",name:"excel-files",onChange:c,disabled:o.loading}),(0,r.jsxs)(g.Z,{variant:"contained",component:"span",disabled:o.loading,children:["Select Files",(0,r.jsx)(Y.Z,{size:20,color:"secondary",sx:{display:o.loading?"block":"none"}})]}),(0,r.jsx)(g.Z,{type:"submit",onClick:i,disabled:o.loading,children:"Submit"})]})]})};function ye(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xe(e,t,n[t])}))}return e}var we={loading:!1,error:"",msg:""},Oe={updated_by:"",date_forecast:"",date_synced:"",date_valid:""};var Se=function(e){var t=e.getDateToString,n=(0,o.useState)([]),a=n[0],i=n[1],l=(0,o.useState)(we),s=l[0],u=l[1],d=(0,o.useState)(Oe),p=d[0],f=d[1],h=(0,c.tl)(se.M.WEATHER_FORECASTS,"bicol","ten_day","name",1),b=h.documents,g=h.loading,m=h.error;(0,o.useEffect)((function(){g||""!==m||v(b)}),[g,m,b,v]);var v=(0,o.useCallback)((function(e){var n=Object.values(e[0].municipalities)[0][0],r={updated_by:e[0].updated_by,date_synced:t(e[0].date_created)};r.date_forecast=n.date_forecast,r.date_valid=n.date_range,f(r)}),[t]),y=function(){var e,t=(e=S().mark((function e(){var t,n,r,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new FormData,n=0;n<a.length;n+=1)t.append("excel-files",a[n]);return e.prev=2,u(je({},we,{loading:!0})),e.next=6,G(t);case 6:u((function(e){return je({},we,{loading:!1,msg:"Upload success."})})),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),r=e.t0.response?e.t0.response.data:e.t0.message,u(je({},we,{loading:!1,error:r})),e.abrupt("return");case 14:return e.prev=14,e.next=17,(0,le.vx)();case 17:o=e.sent,v(o),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error(e.t1.message);case 24:case"end":return e.stop()}}),e,null,[[2,9],[14,21]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ye(a,r,o,i,c,"next",e)}function c(e){ye(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsx)(ve,{files:a,status:s,logs:p,handleSubmit:y,handleSelectFiles:function(e){u(we),i(e.target.files)}})},Ze=n(5322);var Pe=function(e){var t=e.state,n=e.cycloneLoading,o=e.onSyncPress;return(0,r.jsxs)(u.Z,{sx:{fontSize:"14px"},children:[(0,r.jsx)(Ze.Z,{openSnackbar:""!==t.error||""!==t.msg,message:""!==t.error?t.error:t.msg,severity:""!==t.error?"error":"success"}),(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"Special Typhoon Advisory Updater"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:ge.subheader,children:["This panel updates ACAP's ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," content by manually initiating the  process of syncing PAGASA's latest published tropical cyclone data from their ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP."]}),(0,r.jsx)(h.Z,{variant:"body2",sx:ge.subheader,children:"Press the SYNC button below to start the data syncing process."}),(0,r.jsx)(be,{title:"Current Data Update Summary",children:!n&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",t.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",t.date_updated]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Summary:"}),"\xa0 ",t.summary]})]})}),(0,r.jsx)(g.Z,{variant:"contained",onClick:o,disabled:n||t.loading,children:"Sync"})]})},_e=n(1029);function Ce(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Re(e,t,n[t])}))}return e}function De(e,t){return!t||"object"!==Be(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e,t){return We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},We(e,t)}var Be=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}var Fe={SPECIAL_WEATHER_CYCLONE:"".concat("https://amia-cis-temp.herokuapp.com/api","/cyclone")},Me=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(a,e);var t,n,r,o=Le(a);function a(){return Ae(this,a),o.apply(this,arguments)}return t=a,n=[{key:"updateSpecialWeather",value:function(e){var t,n=this;return(t=S().mark((function t(){var r,o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({body:e});case 2:return r=t.sent,t.next=5,_()(Te({},r,{url:Fe.SPECIAL_WEATHER_CYCLONE,method:"POST"}));case 5:return o=t.sent,t.abrupt("return",o.data);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Ce(a,r,o,i,c,"next",e)}function c(e){Ce(a,r,o,i,c,"throw",e)}i(void 0)}))})()}}],n&&Ee(t.prototype,n),r&&Ee(t,r),a}(C.Z),Ne=new Me,Ie=Ne.updateSpecialWeather.bind(Ne),ze=n(7715);function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,o)}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ue(e,t,n[t])}))}return e}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){c=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ye=n(7294),qe=Ye.useEffect,Xe=Ye.useState,Je=Ye.useRef,Ke={loading:!1,error:"",msg:"",updated_by:"",date_updated:"",summary:""};var Qe=function(e){var t=e.getDateToString,n=Ve((0,c.ky)(_e.K.GLOBAL_COLLECTIONS,_e.K.CYCLONE_ADVISORY),3),o=n[0],a=n[1],i=n[2],l=Ve(Xe(Ke),2),s=l[0],u=l[1],d=Je(!1);qe((function(){return d.current=!0,function(){d.current=!1}}),[]),qe((function(){if(!a){if(!d.current)return;u(i?{error:i}:{loading:!1,error:"",msg:"",updated_by:"system"===o.updated_by?"system":o.email,date_updated:t(o.date_updated),summary:o.summary})}}),[a,o,i,t]);var p=function(){var e,t=(e=S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Ge({},s,{loading:!0,error:"",msg:""})),e.next=4,Ie({});case 4:t=e.sent,n=new Date(1e3*t.date_updated._seconds),t.date_updated="".concat(n.toDateString()," ").concat(n.toLocaleTimeString("it-IT",ze.W6)),d.current&&u((function(e){return Ge({},e,{loading:!1,msg:"Successfully synced data.",updated_by:"system"===t.updated_by?"system":t.email,date_updated:t.date_updated,summary:t.summary})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d.current&&u((function(t){return Ge({},t,{loading:!1,error:e.t0.message})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){He(a,r,o,i,c,"next",e)}function c(e){He(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsx)(Pe,{state:s,cycloneLoading:a,onSyncPress:p})},et={tabsContainer:{marginTop:function(e){return e.spacing(8)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tabsMain:{marginTop:function(e){return e.spacing(4)}}};function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tt(e,t,n[t])}))}return e}var rt=function(e){var t=(0,o.useState)(0),n=t[0],a=t[1];return(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Weather Services Updater"}),(0,r.jsxs)("p",{children:["Update the site-wide ",(0,r.jsx)("strong",{children:"Weather Services"})," information for the ",(0,r.jsx)("strong",{children:"Seasonal"})," and ",(0,r.jsx)("strong",{children:"10-Day"})," Weather Forecasts by manually encoding the required data with reference from PAGASA's weather forecasts on ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast"}),"."]}),(0,r.jsxs)("p",{children:["Please take caution in updating these information because they will be automatically referenced by all site admins when creating crop and climate risks bulletins on the ",(0,r.jsx)("strong",{children:"Create Crop Bulletins"})," and ",(0,r.jsx)("strong",{children:"Create Risks Bulletins"})," Admin pages. Global data updates made by admins are also viewable on the site's public ",(0,r.jsx)("strong",{children:"ACAP Services"})," and ",(0,r.jsx)("strong",{children:"Crop Recommendations"})," pages."]}),(0,r.jsxs)(u.Z,{sx:et.tabsContainer,children:[(0,r.jsxs)(p.Z,{value:n,onChange:function(e,t){a(t)},"aria-label":"weather services updater",children:[(0,r.jsx)(d.Z,nt({label:"Seasonal"},(0,f.P)(0))),(0,r.jsx)(d.Z,nt({label:"10-Day"},(0,f.P)(1))),(0,r.jsx)(d.Z,nt({label:"Special Typhoon"},(0,f.P)(2)))]}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(f.x,{value:n,index:0,children:(0,r.jsx)(ce,{weatherData:e.seasonal,fsLoading:e.fsLoading})}),(0,r.jsx)(f.x,{value:n,index:1,children:(0,r.jsx)(Se,{getDateToString:ze.Xn})}),(0,r.jsx)(f.x,{value:n,index:2,children:(0,r.jsx)(Qe,{getDateToString:ze.Xn})})]})]})]})};var ot=(0,l.Z)((function(e){var t=(0,a.I0)(),n=(0,a.v9)((function(e){return e.provinces.ids})),l=(0,c.m$)(se.M.WEATHER_FORECASTS,"bicol",se.M.SUB_SEASONAL,"name"),u=l.documents,d=l.loading;return(0,o.useEffect)((function(){0===n.length&&t((0,i.Q)())}),[t,n]),(0,r.jsx)(s.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:A.DW.ADMIN,children:(0,r.jsx)(rt,{fsLoading:d,accLevel:A.DW.ADMIN,seasonal:u})})}))}},function(e){e.O(0,[9351,6153,9964,1704,1903,5751,6295,4039,7944,3539,6572,1433,9958,3728,6454,9774,2888,179],(function(){return t=1158,e(e.s=t);var t}));var t=e.O();_N_E=t}]);