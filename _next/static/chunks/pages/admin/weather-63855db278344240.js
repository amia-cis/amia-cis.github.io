(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{1158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/weather",function(){return t(1189)}])},9132:function(e,n){"use strict";n.Z={tablecontainer:{marginTop:function(e){return e.spacing(1)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},borderRadius:function(e){return e.spacing(1)},boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tablecell:{border:"1px solid",textAlign:"center"},subheader:{marginBottom:function(e){return e.spacing(4)},maxWidth:"800px",color:"gray"},labels:{fontSize:"12px",color:function(e){return e.palette.secondary.light}},legend:{margin:function(e){return e.spacing(1)},fontSize:"14px",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},"& ul":{listStyle:"none","& li":{float:"left",marginRight:"10px"},span:{border:"1px solid #ccc",float:"left",width:"12px",height:"12px",margin:"4px"}}},caption:{color:function(e){return e.palette.text.secondary},"& a":{color:function(e){return e.palette.secondary.main},textDecoration:"none"},"& a:visited":{color:function(e){return e.palette.primary.dark}},"& a:hover, span:hover":{textDecoration:"underline"}}}},2509:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(5893),a=t(9473),o=t(1163),i=t(7357),s=t(7906),c=t(295),l=t(3252),u=t(2882),d=t(3184),f=t(3816),p=t(5861),h=t(1033),b=t(8078),g={container:{minHeight:"200px",width:"100%",border:"2px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(4)}}};var m=function(e){var n=e.rows,t=void 0===n?3:n,a=e.cols,o=void 0===a?3:a;return(0,r.jsx)(i.Z,{sx:g.container,children:Array.from(Array(t).keys()).map((function(e,n){return(0,r.jsx)("div",{style:{margin:"2px",display:"flex"},children:Array.from(Array(o).keys()).map((function(e,n){return(0,r.jsx)(b.Z,{animation:"wave",variant:"rectangular",height:25,sx:{margin:"3px",width:"".concat(Math.round(100/o),"%")}},"col-".concat(n))}))},"row-".concat(n))}))})},x=t(7426),v=t(9132);var y=function(e){var n=e.weatherData,t=e.withBorder,b=void 0!==t&&t,g=e.fsLoading,y=void 0===g||g,j=(0,a.v9)((function(e){return e.provinces.entities})),w=(0,o.useRouter)(),O=function(e){var n="";if(0===Object.values(j).length)return"n/a";try{n=Object.values(j).find((function(n){return n.name===e})).label}catch(t){n="n/a"}return n},S=function(e){var n=e.children;return b?(0,r.jsx)(u.Z,{sx:v.Z.tablecontainer,children:n}):(0,r.jsx)(u.Z,{children:n})};return(0,r.jsx)("div",{children:y?(0,r.jsx)(m,{rows:7,cols:7}):n.length>0?(0,r.jsxs)(S,{children:[(0,r.jsxs)(s.Z,{sx:{minWidth:650},"aria-label":"simple table",size:"small",children:[(0,r.jsx)(d.Z,{children:(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(l.Z,{sx:{width:"20%"},children:"Province"}),n[0].mos.map((function(e,n){return(0,r.jsx)(l.Z,{sx:{textAlign:"center"},children:"".concat(e[0].toUpperCase()).concat(e.slice(1))},"".concat(e,"-").concat(n))}))]})}),(0,r.jsx)(c.Z,{children:n.map((function(e){return(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(l.Z,{children:O(e.name)}),e.months.map((function(e,n){return(0,r.jsx)(l.Z,{sx:{backgroundColor:x.tN[e.con],border:"1px solid #000",textAlign:"center",fontSize:"14px",padding:"10px",color:["wetter","drier"].includes(e.con)?"#fff":"#000"},children:e.val},"".concat(e.mo,"-").concat(n))}))]},e.name)}))})]}),(0,r.jsxs)(i.Z,{sx:v.Z.legend,children:[(0,r.jsxs)(p.Z,{component:"p",variant:"caption",sx:v.Z.caption,children:["Encoded from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",children:"Seasonal (Rainfall) Forecast"})," web page",(0,r.jsx)("br",{}),"by ","/admin/weather"===w.pathname?n[0].updated_by:"an admin"," on \xa0",n[0].date_created.toDate().toDateString()]}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{style:{backgroundColor:x.tN[x.MW.NORMAL.label]}}),x.MW.NORMAL.sync]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{style:{backgroundColor:x.tN[x.MW.DRIER.label]}}),x.MW.DRIER.sync]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{style:{backgroundColor:x.tN[x.MW.WETTER.label]}}),x.MW.WETTER.sync]})]})]})]}):(0,r.jsx)(h.Z,{})})}},1033:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(5893),a=t(5675),o=t(7357),i=t(5861),s=t(120),c={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(4)}}};var l=function(e){var n=e.message,t=void 0===n?"Failed to load data":n,l=e.style,u=void 0===l?{}:l;return(0,r.jsxs)(o.Z,{sx:c.container,style:u,children:[(0,r.jsx)(a.default,{unoptimized:!0,src:(0,s.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:s.imageLoader,alt:"Empty data"}),(0,r.jsx)(i.Z,{variant:"subtitle1",children:t})]})}},6601:function(e,n,t){"use strict";t.d(n,{x:function(){return s},P:function(){return c}});var r=t(5893),a=t(7357);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=function(e){var n=e.children,t=e.value,s=e.index,c=i(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({role:"tabpanel",hidden:t!==s,id:"custom-tabpanel-".concat(s),"aria-labelledby":"custom-tab-".concat(s)},c,{children:t===s&&(0,r.jsx)(a.Z,{sx:{p:3},children:n})}))};var c=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},1189:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ke}});var r=t(5893),a=t(7294),o=t(9473),i=t(4822),s=t(7682),c=t(3059),l=t(2530),u=t(7357),d=t(44),f=t(8409),p=t(6601),h=t(5861),b=t(1163),g=t(1057),m=t(6863),x=t(657),v=t(1425),y=t(6580),j=t(8951),w=t(7645),O=t(4051),S=t.n(O),A=t(3539),k=t(9669),Z=t.n(k),E=t(9431),P=t(7426);function C(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,a)}function _(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){C(o,r,a,i,s,"next",e)}function s(e){C(o,r,a,i,s,"throw",e)}i(void 0)}))}}function R(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function D(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){T(e,n,t[n])}))}return e}function M(e,n){return!n||"object"!==I(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function N(e,n){return N=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},N(e,n)}var I=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=F(e);if(n){var a=F(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return M(this,t)}}var L={BASE_API_URL:"https://amia-cis.herokuapp.com/api",WEATHER_FORECAST_SEASONAL:"".concat("https://amia-cis.herokuapp.com/api","/weather/seasonal/region"),WEATHER_FORECAST_PROVINCE:"".concat("https://amia-cis.herokuapp.com/api","/weather/seasonal/province"),WEATHER_FORECAST_TEN_DAY:"".concat("https://amia-cis.herokuapp.com/api","/weather/10day")},H=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&N(e,n)}(o,e);var n,t,r,a=B(o);function o(){return R(this,o),a.apply(this,arguments)}return n=o,(t=[{key:"upsertSeasonal",value:function(e){var n=this;return _(S().mark((function t(){var r,a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({body:e});case 2:return r=t.sent,t.next=5,Z()(W({},r,{url:L.WEATHER_FORECAST_SEASONAL,method:"POST"}));case 5:return a=t.sent,t.abrupt("return",a.data);case 7:case"end":return t.stop()}}),t)})))()}},{key:"upsertTenDay",value:function(e){var n=this;return _(S().mark((function t(){var r,a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({body:e});case 2:return r=t.sent,t.next=5,Z()(W({},r,{url:L.WEATHER_FORECAST_TEN_DAY,method:"POST"}));case 5:return a=t.sent,t.abrupt("return",a.data);case 7:case"end":return t.stop()}}),t)})))()}},{key:"getweathercondition",value:function(e){var n="";return e<=40&&(n=P.MW.DRIER.label),e>=41&&e<=120&&(n=P.MW.NORMAL.label),e>120&&(n=P.MW.WETTER.label),n}}])&&D(n.prototype,t),r&&D(n,r),o}(E.Z),U=new H,z=U.upsertSeasonal.bind(U),G=U.getweathercondition.bind(U),q=U.upsertTenDay.bind(U),V=t(6901),J=t(8456),X={datagrid:{borderRadius:2,"& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(e){return e.palette.primary.dark},fontSize:16,"& select":{width:"100px",height:"32px",border:"none !important",outline:"none !important",fontSize:16}}},gridContainer:{height:500,"& .normal":{backgroundColor:"yellow"},"& .drier":{backgroundColor:"red"},"& .wetter":{backgroundColor:"blue"}}};function Y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function $(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,a)}function K(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){K(e,n,t[n])}))}return e}function ee(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne={loading:!1,show:!1,error:"",msg:"",saveDisabled:!1};var te=function(e){var n=e.weatherData,t=e.onCancelClick,i=e.onAsyncFinish,s=(0,o.v9)((function(e){return e.provinces})),c=s.ids,l=s.entities,d=(0,a.useState)([]),f=d[0],p=d[1],h=(0,a.useState)([]),b=h[0],x=h[1],v=(0,a.useState)([]),y=v[0],j=v[1],w=(0,a.useState)(ne),O=w[0],k=w[1],Z=[{id:0,label:"Jan"},{id:1,label:"Feb"},{id:2,label:"Mar"},{id:3,label:"Apr"},{id:4,label:"May"},{id:5,label:"Jun"},{id:6,label:"Jul"},{id:7,label:"Aug"},{id:8,label:"Sep"},{id:9,label:"Oct"},{id:10,label:"Nov"},{id:11,label:"Dec"}];(0,a.useEffect)((function(){n.length>0&&F()}),[n.length,F]);var E=function(){var e,n=(e=S().mark((function e(){var n,t,r,a,o,s,c,l,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=document.getElementsByTagName("select"),t=[],r=!0,a=0;a<n.length;a+=1)o=document.getElementById("select-mo-".concat(a)),t.push(T(o.value));if(_(t)&&6===f.length){e.next=7;break}return k(Q({},ne,{show:!0,loading:!1,error:"Invalid months sequence."})),e.abrupt("return");case 7:s=0;case 8:if(!(s<f.length)){e.next=20;break}c=0;case 10:if(!(c<f[s].length)){e.next=17;break}if(C(f[s][c])){e.next=14;break}return r=!1,e.abrupt("break",17);case 14:c+=1,e.next=10;break;case 17:s+=1,e.next=8;break;case 20:if(r){e.next=23;break}return k(Q({},ne,{show:!0,error:"Invalid cell values."})),e.abrupt("return");case 23:return e.prev=23,k(Q({},ne,{loading:!0})),e.next=27,z(D(t));case 27:i(),e.next=37;break;case 30:e.prev=30,e.t0=e.catch(23),l="",void 0!==e.t0.response&&(l=void 0!==e.t0.response.data?e.t0.response.data:""),""===l&&(l=e.t0.message),u=l.replaceAll(/Firebase/g,""),k((function(e){return Q({},e,{show:!0,loading:!1,error:u})}));case 37:case"end":return e.stop()}}),e,null,[[23,30]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){$(o,r,a,i,s,"next",e)}function s(e){$(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),C=function(e){return isNaN(e)||""===e?(k(Q({},ne,{show:!0,error:"Not a number"})),!1):(k(ne),!0)},_=function(e){for(var n=e.map((function(e){return e+1})),t=!0,r=0;r<n.length-1&&(!(1!==Math.abs(n[r+1]-n[r])||n[r+1]<n[r])||(t=!1,12===n[r]&&1===n[r+1]&&(t=!0),t));)r+=1;return t},R=function(e){var t=e.props.value,r=C(t)?t:"ERROR",a=e.id,o=(n.length>0?n[0].mos:[]).indexOf(e.field),i=ee(f),s=i[a];s[o]=r,i[a]=s,p((function(e){return i}))},D=function(e){for(var n={region:Object.values(l).length>0?Object.values(l)[0].region:"",provinces:[]},t=0;t<f.length;t+=1){for(var r={name:l[c[t]].label,months:[]},a=0;a<e.length;a+=1)r.months.push({mo:Z[e[a]].label.toLowerCase(),val:f[t][a],con:G(f[t][a])});n.provinces.push(r)}return n},T=function(e){for(var n=0,t=0;t<Z.length;t+=1)if(Z[t].label.toLowerCase()===e.toLowerCase()){n=t;break}return n},F=function(){var e=function(e){var t=n[0].mos[e];o.push({field:t,headerName:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),width:110,editable:!0,sortable:!1,disableColumnMenu:!0,renderHeader:function(n){return(0,r.jsxs)("select",{onChange:function(n){return function(e,n){var t=e.target.value;document.getElementById("select-mo-".concat(n)).setAttribute("value",T(t))}(n,e)},id:"select-mo-".concat(e),defaultValue:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),children:[(0,r.jsx)("option",{children:"Month"}),Z.map((function(e,n){return(0,r.jsx)("option",{children:e.label},"mo-".concat(n))}))]})}})},t=function(e){var t=function(t){var a=n[e],i=a.months.filter((function(e){return e.mo===a.mos[t]}));1===i.length?(r[a.mos[t]]=i[0].val,o.push(i[0].val)):(r[a.mos[t]]="n/a",o.push("n/a"))},r={},o=[],c=function(e){var n="";if(0===Object.values(l).length)return"n/a";try{n=Object.values(l).find((function(n){return n.name===e})).label}catch(t){n="n/a"}return n}(n[e].name);s[c]=n[e].name,r.id=e,r.rowId=e,r.province=c,r.editable=!0;for(var u=0;u<n[e].mos.length;u+=1)t(u);a.push(r),i.push(o)},a=[],o=[],i=[],s={};o.push({field:"province",headerName:"Province",width:180,sortable:!1,disableColumnMenu:!0});for(var c=0;c<n[0].mos.length;c+=1)e(c);for(var u=0;u<n.length;u+=1)t(u);j(o),x(a),p(i)};return(0,r.jsxs)("div",{style:{height:500,width:"100%"},children:[(0,r.jsxs)(u.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"baseline",marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{minWidth:"40%"},children:(0,r.jsx)(V.Z,{severity:""!==O.error?"error":"success",sx:{fontSize:"12px",minHeight:"32px",width:"100%",visibility:O.show?"initial":"hidden"},children:""!==O.error?O.error:O.msg})}),(0,r.jsxs)(m.Z,{variant:"outlined","aria-label":"outlined button controls group",sx:{float:"right",marginTop:"24px","& button":{width:"50%"}},children:[(0,r.jsx)(g.Z,{id:"cancel",onClick:t,disabled:O.loading,children:"Cancel"}),(0,r.jsxs)(g.Z,{onClick:function(){var e=function(){return document.getElementsByTagName("select").length};if(k(Q({},ne,{loading:!0})),e()<6){var n=document.getElementsByClassName("MuiDataGrid-virtualScroller");if(n.length>0)var t=n[0].scrollWidth,r=setInterval((function(){t<=0&&(clearInterval(r),6===e()?E():k(Q({},ne,{show:!0,loading:!1,error:"Please edit the table cells on a larger screen."}))),n[0].scrollLeft+=3,t-=3}))}else E()},disabled:O.loading||O.saveDisabled,variant:"contained",children:[(0,r.jsx)("span",{style:{display:O.loading?"none":"block"},children:"Save"})," \xa0",(0,r.jsx)(J.Z,{size:20,color:"secondary",sx:{display:O.loading?"block":"none"}})]})]})]}),(0,r.jsx)(u.Z,{sx:X.gridContainer,children:(0,r.jsx)(A._,{rows:b,columns:y,sx:X.datagrid,customH:!0,editMode:"row",rowsPerPageOptions:[],getCellClassName:function(e){return void 0!==P.re[e.field.toUpperCase()]?G(e.value):""},isCellEditable:function(){return!O.loading},onEditCellPropsChange:function(e){k(ne),R(e)},initialState:{columns:{columnVisibilityModel:{rowId:!1}}}})})]})},re=t(2509),ae=t(9132);function oe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ie={seasonal_update:!1,tenday_update:!1};var se=function(e){var n=e.weatherData,t=e.provinces,o=e.fsLoading,i=(0,a.useState)(ie),s=i[0],c=i[1],l=(0,a.useState)(!1),d=l[0],f=l[1],p=(0,b.useRouter)(),O=function(e){var n=e.target.id;c("cancel"===n?ie:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){oe(e,n,t[n])}))}return e}({},s,oe({},n,!0)))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)(x.Z,{open:d,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(w.Z,{id:"data-saved-success",children:"Success"}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(j.Z,{id:"alert-dialog-description",children:"The seasonal weather data are saved successfully."})}),(0,r.jsx)(v.Z,{children:(0,r.jsx)(g.Z,{onClick:function(){p.push("/weather-services")},autoFocus:!0,children:"OK"})})]}),(0,r.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:function(e){return e.spacing(1)}},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Seasonal Weather Forecast Updater"}),(0,r.jsx)(m.Z,{variant:"outlined","aria-label":"outlined button controls group",children:!s.seasonal_update&&!s.tenday_update&&(0,r.jsx)(g.Z,{id:"seasonal_update",onClick:O,children:"Edit"})})]}),(0,r.jsxs)(h.Z,{variant:"body2",sx:ae.Z.subheader,children:["Copy the Bicol Region's ",(0,r.jsx)("strong",{children:"Rainfall Analysis Forecast"})," from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",children:"Seasonal Forecast"})," page for each province. Press the ",(0,r.jsx)("strong",{children:"Edit"})," button and double click a cell to start editing."]}),!s.seasonal_update&&(0,r.jsx)(re.Z,{weatherData:n,provinces:t,withBorder:!0,fsLoading:o}),s.seasonal_update&&(0,r.jsx)(te,{weatherData:n,provinces:t,onCancelClick:O,onAsyncFinish:function(){return f((function(e){return!e}))}})]})},ce=t(1234),le=t(1496),ue=t(7918),de={subheader:{marginBottom:function(e){return e.spacing(2)},color:"gray",marginTop:function(e){return e.spacing(1)}},summary:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(3)},"& ul":{listStyle:"none"}},upload:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"90px",border:"1px solid gray",borderRadius:"8px",fontSize:"14px",color:function(e){return e.palette.text.secondary},padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(1)}},notification:{maxWidth:"500px",marginBottom:function(e){return e.spacing(2)}}},fe=(0,le.ZP)("input")({display:"none"});var pe=function(e){var n=e.files,t=void 0===n?[]:n,a=e.status,o=e.logs,i=e.handleSubmit,s=e.handleSelectFiles;return(0,r.jsxs)(u.Z,{sx:{"& li":{fontSize:"14px"}},children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"10-Day Weather Forecast Updater"}),(0,r.jsx)(h.Z,{variant:"body2",sx:de.subheader,children:"This panel updates the site's 10-Day Weather Forecast data by manually uploading the excel files from PAGASA. Follow the steps to update the site's 10-Day Weather Forecast data:"}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:["Download all (10) excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",children:"10 Day Climate Forecast"})," web page."]}),(0,r.jsx)("li",{children:"Press the SELECT FILES button and select all the excel files."}),(0,r.jsx)("li",{children:"Press the SUBMIT button."}),(0,r.jsx)("li",{children:"Wait for the upload process to finish."})]}),(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(4)}},variant:"h6",children:"Current Data Update Summary"}),(0,r.jsx)(u.Z,{sx:de.summary,children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",o.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",o.date_valid]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",o.date_forecast]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",o.date_synced]})]})}),(0,r.jsx)(u.Z,{sx:de.upload,children:0===t.length?(0,r.jsx)("span",{children:"Select excel files."}):(0,r.jsx)(u.Z,{sx:{"& div":{margin:"2px"}},children:Array.from(t).map((function(e,n){return(0,r.jsx)(ue.Z,{label:e.name,size:"small"},"excel-".concat(n))}))})}),(0,r.jsxs)(u.Z,{sx:de.notification,children:[!a.loading&&""!==a.error&&(0,r.jsx)(V.Z,{severity:"error",children:a.error}),!a.loading&&""!==a.msg&&(0,r.jsx)(V.Z,{severity:"success",children:a.msg})]}),(0,r.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,r.jsx)(fe,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!0,type:"file",name:"excel-files",onChange:s,disabled:a.loading}),(0,r.jsxs)(g.Z,{variant:"contained",component:"span",disabled:a.loading,children:["Select Files",(0,r.jsx)(J.Z,{size:20,color:"secondary",sx:{display:a.loading?"block":"none"}})]}),(0,r.jsx)(g.Z,{type:"submit",onClick:i,disabled:a.loading,children:"Submit"})]})]})};function he(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,a)}function be(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){he(o,r,a,i,s,"next",e)}function s(e){he(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ge(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function me(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ge(e,n,t[n])}))}return e}var xe={loading:!1,error:"",msg:""},ve=ge({updated_by:"",date_forecast:"",date_synced:"",date_valid:""},"updated_by","");var ye=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],o=(0,a.useState)(xe),i=o[0],s=o[1],c=(0,a.useState)(ve),l=c[0],u=c[1];(0,a.useEffect)((function(){d()}),[]);var d=function(){var e=be(S().mark((function e(){var n,t,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ce.vx)();case 3:n=e.sent,t=Object.values(n[0].municipalities)[0][0],(r={updated_by:n[0].updated_by,date_synced:n[0].date_created.toDate().toDateString()}).date_forecast=t.date_forecast,r.date_valid=t.date_range,u(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=be(S().mark((function e(){var t,r,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new FormData,r=0;r<n.length;r+=1)t.append("excel-files",n[r]);return e.prev=2,s(me({},xe,{loading:!0})),e.next=6,q(t);case 6:s((function(e){return me({},xe,{loading:!1,msg:"Upload success."})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),a=e.t0.response?e.t0.response.data:e.t0.message,s(me({},xe,{loading:!1,error:a}));case 13:try{d()}catch(o){console.error(o.message)}case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return(0,r.jsx)(pe,{files:n,status:i,logs:l,handleSubmit:f,handleSelectFiles:function(e){s(xe),t(e.target.files)}})},je={tabsContainer:{marginTop:function(e){return e.spacing(8)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tabsMain:{marginTop:function(e){return e.spacing(4)}}};function we(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){we(e,n,t[n])}))}return e}var Se=function(e){var n=(0,a.useState)(0),t=n[0],o=n[1];return(0,r.jsxs)("div",{children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Weather Services Updater"}),(0,r.jsxs)("p",{children:["Update the site-wide ",(0,r.jsx)("strong",{children:"Weather Services"})," information for the ",(0,r.jsx)("strong",{children:"Seasonal"})," and ",(0,r.jsx)("strong",{children:"10-Day"})," Weather Forecasts by manually encoding the required data with reference from PAGASA's weather forecasts on ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",children:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast"}),"."]}),(0,r.jsxs)("p",{children:["Please take caution in updating these information because they will be automatically referenced by all site admins when creating crop and climate risks bulletins on the ",(0,r.jsx)("strong",{children:"Create Crop Bulletins"})," and ",(0,r.jsx)("strong",{children:"Create Risks Bulletins"})," Admin pages. Global data updates made by admins are also viewable on the site's public ",(0,r.jsx)("strong",{children:"BACAP Services"})," and ",(0,r.jsx)("strong",{children:"Crop Recommendations"})," pages."]}),(0,r.jsxs)(u.Z,{sx:je.tabsContainer,children:[(0,r.jsxs)(f.Z,{value:t,onChange:function(e,n){o(n)},"aria-label":"weather services updater",children:[(0,r.jsx)(d.Z,Oe({label:"Seasonal Weather Forecast"},(0,p.P)(0))),(0,r.jsx)(d.Z,Oe({label:"10-Day Weather Forecast"},(0,p.P)(1)))]}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(p.x,{value:t,index:0,children:(0,r.jsx)(se,{weatherData:e.seasonal,fsLoading:e.fsLoading})}),(0,r.jsx)(p.x,{value:t,index:1,children:(0,r.jsx)(ye,{})})]})]})]})},Ae=t(560);var ke=(0,c.Z)((function(e){var n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.provinces.ids})),c=(0,s.m$)(Ae.M.WEATHER_FORECASTS,"bicol",Ae.M.SUB_SEASONAL,"name"),u=c.documents,d=c.loading;return(0,a.useEffect)((function(){0===t.length&&n((0,i.Q)())}),[n,t]),(0,r.jsx)(l.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:P.DW.ADMIN,children:(0,r.jsx)(Se,{fsLoading:d,accLevel:P.DW.ADMIN,seasonal:u})})}))},9431:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(4051),a=t.n(r),o=t(5152);function i(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,r;return n=e,(t=[{key:"setAuthHeaders",value:function(e){return s(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,n.next=4,o.I8.currentUser.getIdToken(!0);case 4:t=n.sent,n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(1),new Error(n.t0.message);case 10:e.headers.Authorization=t?"Bearer ".concat(t):"";case 11:case"end":return n.stop()}}),n,null,[[1,7]])})))()}},{key:"createRequestObject",value:function(e){var n=e.body,t=e.params,r=e.responseType,o=this;return s(a().mark((function e(){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={headers:{}},n&&(i.data=n),t&&(i.params=t),r&&(i.responseType=r),e.next=6,o.setAuthHeaders(i);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))()}}])&&c(n.prototype,t),r&&c(n,r),e}()}},function(e){e.O(0,[135,669,203,539,572,848,354,728,774,888,179],(function(){return n=1158,e(e.s=n);var n}));var n=e.O();_N_E=n}]);