(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{2176:function(e,n,t){"use strict";t.d(n,{D:function(){return m}});var r=t(7462),o=t(3366),i=t(7294),a=t(6010),l=t(1496),c=t(7192),s=t(3490),u=t(8836),d=t(5893);const p=["className","children"],f=(0,l.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(e,n)=>n.toolbarContainer})((({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(.5,.5,0)}))),m=i.forwardRef((function(e,n){const{className:t,children:i}=e,l=(0,o.Z)(e,p),m=(e=>{const{classes:n}=e;return(0,c.Z)({root:["toolbarContainer"]},s.d,n)})({classes:(0,u.B)().classes});return i?(0,d.jsx)(f,(0,r.Z)({ref:n,className:(0,a.Z)(t,m.root)},l,{children:i})):null}))},6132:function(e,n,t){"use strict";t.d(n,{S:function(){return f}});var r=t(7462),o=t(3366),i=t(7294),a=t(4696),l=t(269),c=t(7476),s=t(9630),u=t(8836),d=t(5893);const p=["onClick"],f=i.forwardRef((function(e,n){var t;const{onClick:i}=e,f=(0,o.Z)(e,p),m=(0,s.l)(),g=(0,u.B)(),{open:b,openedPanelValue:h}=(0,a.P)(m,l.e);return g.disableColumnSelector?null:(0,d.jsx)(g.components.BaseButton,(0,r.Z)({ref:n,size:"small",color:"primary","aria-label":m.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,d.jsx)(g.components.ColumnSelectorIcon,{})},f,{onClick:e=>{b&&h===c.y.columns?m.current.hidePreferences():m.current.showPreferences(c.y.columns),null==i||i(e)}},null==(t=g.componentsProps)?void 0:t.baseButton,{children:m.current.getLocaleText("toolbarColumns")}))}))},853:function(e,n,t){"use strict";t.d(n,{M:function(){return y}});var r=t(7462),o=t(3366),i=t(7294),a=t(1496),l=t(7192),c=t(8082),s=t(8216),u=t(198),d=t(4696),p=t(1207),f=t(269),m=t(7476),g=t(9630),b=t(8836),h=t(3490),x=t(5893);const v=["componentsProps"],w=(0,a.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,n)=>n.toolbarFilterList})((({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)}))),y=i.forwardRef((function(e,n){var t,a;const{componentsProps:y={}}=e,F=(0,o.Z)(e,v),C=y.button||{},j=(0,g.l)(),P=(0,b.B)(),S=(0,d.P)(j,p.DY),Z=(0,d.P)(j,u.WH),T=(0,d.P)(j,f.e),k=(e=>{const{classes:n}=e;return(0,l.Z)({root:["toolbarFilterList"]},h.d,n)})({classes:P.classes}),_=i.useMemo((()=>{if(T.open)return j.current.getLocaleText("toolbarFiltersTooltipHide");if(0===S.length)return j.current.getLocaleText("toolbarFiltersTooltipShow");const e=e=>Z[e.columnField].filterOperators.find((n=>n.value===e.operatorValue)).label||j.current.getLocaleText(`filterOperator${(0,s.Z)(e.operatorValue)}`).toString();return(0,x.jsxs)("div",{children:[j.current.getLocaleText("toolbarFiltersTooltipActive")(S.length),(0,x.jsx)(w,{className:k.root,children:S.map(((n,t)=>(0,r.Z)({},Z[n.columnField]&&(0,x.jsx)("li",{children:`${Z[n.columnField].headerName||n.columnField}\n                  ${e(n)}\n                  ${n.value}`},t))))})]})}),[j,T.open,S,Z,k]);return P.disableColumnFilter?null:(0,x.jsx)(P.components.BaseTooltip,(0,r.Z)({title:_,enterDelay:1e3},F,null==(t=P.componentsProps)?void 0:t.baseTooltip,{children:(0,x.jsx)(P.components.BaseButton,(0,r.Z)({ref:n,size:"small",color:"primary","aria-label":j.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,x.jsx)(c.Z,{badgeContent:S.length,color:"primary",children:(0,x.jsx)(P.components.OpenFilterButtonIcon,{})})},C,{onClick:e=>{var n;const{open:t,openedPanelValue:r}=T;t&&r===m.y.filters?j.current.hideFilterPanel():j.current.showFilterPanel(),null==(n=C.onClick)||n.call(C,e)}},null==(a=P.componentsProps)?void 0:a.baseButton,{children:j.current.getLocaleText("toolbarFilters")}))}))}))},3622:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return t(8601)}])},7513:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},welcome:{display:"grid",placeContent:"center",marginTop:function(e){return e.spacing(10)},textAlign:"center","& h5":{marginTop:function(e){return e.spacing(2)}}},conditionLegend:{maxWidth:{md:"100%",lg:"270px"},marginBottom:"32px",padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul":{fontSize:"14px"}},gridContainer:{marginTop:"24px",minHeight:500,width:1,"& .normal":{backgroundColor:"yellow"},"& .drier":{backgroundColor:"red"},"& .wetter":{backgroundColor:"blue"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}}}},8601:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(4051),o=t.n(r),i=t(5893),a=t(7294),l=t(8152),c=t(3059),s=t(1664),u=t(1163),d=t(5861),p=t(7357),f=t(1057),m=t(2176),g=t(6132),b=t(853),h=t(4343),x=t(7513),v=t(5337);function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function y(e){return(0,i.jsxs)(m.D,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){w(e,n,t[n])}))}return e}({},e,{children:[(0,i.jsx)(g.S,{}),(0,i.jsx)(b.M,{})]}))}var F=function(e){var n=e.rows,t=e.columns,r=e.loadingReports,o=(0,u.useRouter)();return(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Z,{variant:"h5",children:"Crop Recommendations"}),(0,i.jsxs)("p",{children:["Create and preview ",(0,i.jsx)("strong",{children:"10-Day"})," and ",(0,i.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,i.jsx)(s.default,{href:"/admin/bulletins/crops/create",passHref:!0,children:(0,i.jsx)(f.Z,{variant:"contained",children:"Create Bulletin"})}),(0,i.jsx)(p.Z,{sx:x.Z.gridContainer,style:{height:n.length<=4?"500px":"unset"},children:(0,i.jsx)(h._,{rows:n,columns:t,sx:v.Z.datagrid,autoHeight:n.length>=5,disableDensitySelector:!0,rowsPerPageOptions:[15,30,100],components:{Toolbar:y},loading:r,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:function(e){o.push({pathname:"/admin/bulletins/crops/view",query:{docId:e.row.docId}})}})})]})},C=t(2530),j=t(7426);function P(e,n,t,r,o,i,a){try{var l=e[i](a),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,o)}var S=(0,c.Z)((function(e){var n=(0,a.useRef)(!1),t=(0,a.useState)([]),r=t[0],c=t[1],s=(0,a.useState)([]),u=s[0],d=s[1],p=(0,a.useState)([]),f=p[0],m=p[1],g=(0,a.useState)(!0),b=g[0],h=g[1];return(0,a.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),(0,a.useEffect)((function(){if(null!==e.user&&!e.loading){var t=function(){var t,r=(t=o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,l.pr)(e.user.uid);case 3:r=t.sent,n.current&&(m(r),h(!1)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n.current&&(h(!1),console.error(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){P(i,r,o,a,l,"next",e)}function l(e){P(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();t()}}),[e.user,e.loading]),(0,a.useEffect)((function(){if(f.length>0){var e={crop:"Crop",province:"Province",municipality:"Municipality",updated_by:"Updated by",date_created:"Date Created"},n=[];["crop","province","municipality","updated_by","date_created"].forEach((function(t){n.push({field:t,headerName:e[t],width:200,editable:!1,sortable:!1,disableColumnMenu:!0})}));var t=f.map((function(e,n){return{id:n,docId:e.id,crop:e.crop,province:e.province,municipality:e.municipality,updated_by:e.updated_by,date_created:e.date_created.toDate().toDateString()}}));c(t),d(n)}}),[f]),(0,i.jsx)(C.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:j.DW.ADMIN,children:(0,i.jsx)(F,{rows:r,columns:u,loadingReports:b})})}))},5337:function(e,n){"use strict";n.Z={datagrid:{background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"8px","& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(e){return e.palette.primary.dark},fontSize:16}}}}},function(e){e.O(0,[3135,9669,4343,3728,8152,9774,2888,179],(function(){return n=3622,e(e.s=n);var n}));var n=e.O();_N_E=n}]);