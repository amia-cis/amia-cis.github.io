(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{7381:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(4938)),a=n(5893),o=(0,i.default)([(0,a.jsx)("path",{d:"M5 5v14h14V5H5zm9 12H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z",opacity:".3"},"0"),(0,a.jsx)("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64S3 4.72 3 5v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"},"1")],"AssignmentTwoTone");t.Z=o},8615:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(4938)),a=n(5893),o=(0,i.default)((0,a.jsx)("path",{d:"M14.5 2.5c0 1.5-1.5 6-1.5 6h-2S9.5 4 9.5 2.5C9.5 1.12 10.62 0 12 0s2.5 1.12 2.5 2.5zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm4.08-4.89c.18-.75.33-1.47.39-2.06C19.75 4.69 22 8.08 22 12c0 5.52-4.48 10-10 10S2 17.52 2 12c0-3.92 2.25-7.31 5.53-8.95.07.59.21 1.32.39 2.06C5.58 6.51 4 9.07 4 12c0 4.42 3.58 8 8 8s8-3.58 8-8c0-2.93-1.58-5.49-3.92-6.89zM18 12c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2 .98-3.77 2.48-4.86.23.81.65 2.07.65 2.07C8.43 9.93 8 10.92 8 12c0 2.21 1.79 4 4 4s4-1.79 4-4c0-1.08-.43-2.07-1.13-2.79 0 0 .41-1.22.65-2.07C17.02 8.23 18 10 18 12z"}),"CrisisAlert");t.Z=o},2795:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(4938)),a=n(5893),o=(0,i.default)([(0,a.jsx)("path",{d:"M13 4H6v16h12V9h-5V4zm3 14H8v-2h8v2zm0-6v2H8v-2h8z",opacity:".3"},"0"),(0,a.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"},"1")],"DescriptionTwoTone");t.Z=o},3622:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return n(3991)}])},9646:function(e,t,n){"use strict";var r=n(5893),i=n(5113);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=(0,n(1496).ZP)((function(e){return(0,r.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}}));t.Z=o},3991:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r=n(5893),i=n(7294),a=n(9473),o=n(5243),s=n(1163),c=n(7357),l=n(1664),u=n(6886),d=n(5861),p=n(1496),f=n(1796);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,p.ZP)((function(e){return(0,r.jsx)(u.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{textAlign:"center",cursor:"pointer",borderRadius:t.spacing(1),padding:t.spacing(2),"& a":{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},"& a:visited":{color:"rgba(0, 0, 0, 0.87)"},"& h6":{lineHeight:t.spacing(3)},"& svg":{color:t.palette.secondary.main},"&:hover, &:focus":{backgroundColor:(0,f.Fq)(t.palette.secondary.light,.3)}}})),x=v,m=n(9227),b=n(7381),y=n(2795),j=n(8615);var g=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(m.Z,{maxWidth:"sm",openButtonText:"Create Bulletin",title:"Select a Crop Bulletin Type",showButtons:!1,colorTheme:"secondary",children:(0,r.jsxs)(u.ZP,{container:!0,children:[(0,r.jsx)(x,{item:!0,xs:12,sm:4,children:(0,r.jsx)(l.default,{href:"/admin/bulletins/crops/seasonal/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(b.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"Regional Seasonal Climate"}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"Outlook and Advisory"})]})})}),(0,r.jsx)(x,{item:!0,xs:12,sm:4,children:(0,r.jsx)(l.default,{href:"/admin/bulletins/crops/tenday/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(y.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"10-Day Farm Weather Outlook"}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"and Advisory"})]})})}),(0,r.jsx)(x,{item:!0,xs:12,sm:4,children:(0,r.jsx)(l.default,{href:"/admin/bulletins/crops/special/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(j.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"Special Weather Advisory"})]})})})]})})})},w=n(4054),Z=n(3841),C=n(8972),S=n(9646),O=n(8360),z=n(5688),H=n(7392),P=n(2176),_=n(6132),E=n(853),T=n(3539),D=n(901);function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function A(e){return(0,r.jsx)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,r.jsxs)(P.D,k({},e,{children:[(0,r.jsx)(_.S,{}),(0,r.jsx)(E.M,{})]}))})}var M=function(e){var t=e.rows,n=e.columns,o=e.message,l=e.resetMessage,u=e.handleTypeChange,p=(0,i.useState)(H.Ry.SEASONAL),f=p[0],h=p[1],v=(0,a.v9)((function(e){return e.reports.status})),x=(0,a.v9)((function(e){return e.dashboard.reportType})),m=(0,s.useRouter)();return(0,i.useEffect)((function(){h(x)}),[x]),(0,r.jsxs)("div",{children:[(0,r.jsx)(z.Z,{openSnackbar:""!==o,message:o,severity:"info",closeHandlerCB:l}),(0,r.jsx)(d.Z,{variant:"h5",children:"Crop Recommendations"}),(0,r.jsxs)("p",{children:["Create and preview ",(0,r.jsx)("strong",{children:"10-Day"})," and ",(0,r.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,r.jsxs)(S.Z,{sx:{display:"flex",flexDirection:{sm:"column",md:"row"},justifyContent:"space-between",alignItems:"center",padding:"8px 16px 8px 24px"},children:[(0,r.jsx)(g,{}),(0,r.jsxs)(w.Z,{sx:{m:1,width:{xs:"100%",sm:"100%",md:300}},size:"small",children:[(0,r.jsx)(Z.Z,{id:"report-type",children:"Bulletin Type"}),(0,r.jsxs)(O.Z,{labelId:"report-type",id:"report-type",value:f,label:"Bulletin Type",onChange:u,children:[(0,r.jsx)(C.Z,{value:H.Ry.SEASONAL,children:"Seasonal Crop Recommendations"}),(0,r.jsx)(C.Z,{value:H.Ry.TEN_DAY,children:"10-Day Crop Recommendations"}),(0,r.jsx)(C.Z,{value:H.Ry.SPECIAL_WEATHER,children:"Special Weather Recommendations"})]})]})]}),(0,r.jsx)(c.Z,{style:{height:678,width:"100%",textAlign:"left"},children:(0,r.jsx)(S.Z,{sx:{height:"inherit",marginTop:"16px"},children:(0,r.jsx)(T._,{rows:t,columns:n,disableDensitySelector:!0,pageSize:10,rowsPerPageOptions:[10],components:{Toolbar:A},loading:v===D.G.PENDING,rowHeight:48,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:function(e){m.push({pathname:"/admin/bulletins/crops/report/view",query:{docId:e.row.docId}})}})})})]})},N=n(6383),I=n(1690),L=n(3063),B=n(7426);var V=(0,o.Z)((function(e){var t=(0,i.useState)([]),n=t[0],o=t[1],s=(0,i.useState)([]),c=s[0],l=s[1],u=(0,i.useState)(""),d=u[0],p=u[1],f=(0,a.v9)((function(e){return e.dashboard.reportType})),h=(0,i.useRef)(!1),v=(0,i.useRef)(!1),x=(0,a.I0)(),m=(0,a.v9)((function(e){return e.reports})),b=m.ids,y=m.entities,j=m.status;return(0,i.useEffect)((function(){return h.current=!0,function(){h.current=!1}}),[]),(0,i.useEffect)((function(){null===e.user||e.loading||0!==b.length||v.current||(v.current=!0,x((0,I.RC)({uid:e.user.uid,type:f})))}),[e.user,e.loading,b,f,x]),(0,i.useEffect)((function(){if([D.G.FULLFILLED,D.G.IDLE].includes(j)&&b.length>0){var e={crop:"Crop",province:"Province",municipality:"Municipality",type:"Bulletin Type",updated_by:"Updated by",date_created:"Date Created"},t={province:180,municipality:180,type:110,date_created:200},n=[];["crop","province","municipality","type","updated_by","date_created"].forEach((function(r){n.push({field:r,headerName:e[r],minWidth:t[r],flex:void 0===t[r]?1:0,editable:!1,sortable:!1,disableColumnMenu:!0})}));var r=b.map((function(e,t){return{id:t,docId:y[e].id,crop:y[e].crop,province:y[e].province,municipality:y[e].municipality,type:y[e].type,updated_by:y[e].updated_by,date_created:y[e].date_created}}));h.current&&(o(r),l(n))}}),[j,b,y]),(0,r.jsx)(N.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:B.DW.ADMIN,children:(0,r.jsx)(M,{rows:n,columns:c,loadingReports:j===D.G.PENDING,message:d,resetMessage:function(){return p("")},handleTypeChange:function(t){var n=t.target.value;x((0,I.RC)({uid:e.user.uid,type:n})).unwrap().then((function(e){e.length>0&&x((0,L.uq)(n))})).catch((function(){p("No ".concat(n," reports are available."))}))}})})}))}},function(e){e.O(0,[6284,2866,9964,1704,1903,7823,6295,4039,2882,7092,3539,1050,411,9774,2888,179],(function(){return t=3622,e(e.s=t);var t}));var t=e.O();_N_E=t}]);