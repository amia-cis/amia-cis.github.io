(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{7381:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4938)),o=n(5893),a=(0,i.default)([(0,o.jsx)("path",{d:"M5 5v14h14V5H5zm9 12H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z",opacity:".3"},"0"),(0,o.jsx)("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64S3 4.72 3 5v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"},"1")],"AssignmentTwoTone");t.Z=a},2795:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4938)),o=n(5893),a=(0,i.default)([(0,o.jsx)("path",{d:"M13 4H6v16h12V9h-5V4zm3 14H8v-2h8v2zm0-6v2H8v-2h8z",opacity:".3"},"0"),(0,o.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"},"1")],"DescriptionTwoTone");t.Z=a},3622:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return n(6746)}])},6746:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r=n(5893),i=n(7294),o=n(9473),a=n(3059),s=n(1163),c=n(1690),u=n(3063),l=n(7357),d=n(1664),p=n(6886),f=n(5861),h=n(1496);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,h.ZP)((function(e){return(0,r.jsx)(p.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{textAlign:"center",cursor:"pointer",borderRadius:t.spacing(1),padding:t.spacing(2),"& a":{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},"& a:visited":{color:"rgba(0, 0, 0, 0.87)"},"& h6":{lineHeight:t.spacing(3)},"& svg":{color:t.palette.primary.main},"&:hover, &:focus":{backgroundColor:t.palette.primary.light}}})),y=b,m=n(3501),x=n(7381),g=n(2795);var j=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(m.Z,{maxWidth:"sm",openButtonText:"Create Bulletin",title:"Select a Crop Bulletin Type",showButtons:!1,children:(0,r.jsxs)(p.ZP,{container:!0,children:[(0,r.jsx)(y,{item:!0,xs:12,sm:6,children:(0,r.jsx)(d.default,{href:"/admin/bulletins/crops/seasonal/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(x.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(f.Z,{variant:"subtitle1",children:"Regional Seasonal Climate"}),(0,r.jsx)(f.Z,{variant:"subtitle1",children:"Outlook and Advisory"})]})})}),(0,r.jsx)(y,{item:!0,xs:12,sm:6,children:(0,r.jsx)(d.default,{href:"/admin/bulletins/crops/tenday/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(g.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(f.Z,{variant:"subtitle1",children:"10-Day Farm Weather Outlook"}),(0,r.jsx)(f.Z,{variant:"subtitle1",children:"and Advisory"})]})})})]})})})},w=n(4054),O=n(3841),S=n(8972),Z=n(5113);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=(0,h.ZP)((function(e){return(0,r.jsx)(Z.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}})),P=E,z=n(8360),H=n(5322),_=n(7426),D=n(2176),N=n(6132),R=n(853),A=n(3539),T=n(901);function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function L(e){return(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,r.jsxs)(D.D,I({},e,{children:[(0,r.jsx)(N.S,{}),(0,r.jsx)(R.M,{})]}))})}var M=function(e){var t=e.rows,n=e.columns,a=e.user,d=e.message,p=e.resetMessage,h=(0,i.useState)(_.Ry.SEASONAL),v=h[0],b=h[1],y=(0,o.v9)((function(e){return e.reports.status})),m=(0,o.v9)((function(e){return e.dashboard.reportType})),x=(0,s.useRouter)(),g=(0,o.I0)();return(0,i.useEffect)((function(){b(m)}),[m]),(0,r.jsxs)("div",{children:[(0,r.jsx)(H.Z,{openSnackbar:""!==d,message:d,severity:"info",closeHandlerCB:p}),(0,r.jsx)(f.Z,{variant:"h5",children:"Crop Recommendations"}),(0,r.jsxs)("p",{children:["Create and preview ",(0,r.jsx)("strong",{children:"10-Day"})," and ",(0,r.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,r.jsxs)(P,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px 8px 24px"},children:[(0,r.jsx)(j,{}),(0,r.jsxs)(w.Z,{sx:{m:1,minWidth:300},size:"small",children:[(0,r.jsx)(O.Z,{id:"report-type",children:"Bulletin Type"}),(0,r.jsxs)(z.Z,{labelId:"report-type",id:"report-type",value:v,label:"Bulletin Type",onChange:function(e){var t=e.target.value;b(t),g((0,c.RC)({uid:a.uid,type:t})),g((0,u.u)(t))},children:[(0,r.jsx)(S.Z,{value:_.Ry.SEASONAL,children:"Seasonal Crop Recommendations"}),(0,r.jsx)(S.Z,{value:_.Ry.TEN_DAY,children:"10-Day Crop Recommendations"})]})]})]}),(0,r.jsx)(l.Z,{style:{height:677,width:"100%",textAlign:"left"},children:(0,r.jsx)(P,{sx:{height:"inherit",marginTop:"16px"},children:(0,r.jsx)(A._,{rows:t,columns:n,disableDensitySelector:!0,pageSize:10,rowsPerPageOptions:[10],components:{Toolbar:L},loading:y===T.G.PENDING,rowHeight:48,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:function(e){x.push({pathname:"/admin/bulletins/crops/report/view",query:{docId:e.row.docId}})}})})})]})},B=n(2530);var V=(0,a.Z)((function(e){var t=(0,i.useState)([]),n=t[0],a=t[1],s=(0,i.useState)([]),l=s[0],d=s[1],p=(0,i.useState)(""),f=p[0],h=p[1],v=(0,o.v9)((function(e){return e.dashboard.reportType})),b=(0,i.useRef)(!1),y=(0,o.I0)(),m=(0,o.v9)((function(e){return e.reports})),x=m.ids,g=m.entities,j=m.status;return(0,i.useEffect)((function(){return b.current=!0,function(){b.current=!1}}),[]),(0,i.useEffect)((function(){null===e.user||e.loading||0!==x.length||(v!==_.Ry.SEASONAL&&y((0,u.u)(_.Ry.SEASONAL)),y((0,c.RC)({uid:e.user.uid,type:_.Ry.SEASONAL})))}),[e.user,e.loading,x,v,y]),(0,i.useEffect)((function(){if([T.G.FULLFILLED,T.G.IDLE].includes(j)&&x.length>0){if(g[x[0]].type!==v)return h("No ".concat(v," reports are available.")),void y((0,u.u)(g[x[0]].type));var e={crop:"Crop",province:"Province",municipality:"Municipality",type:"Bulletin Type",updated_by:"Updated by",date_created:"Date Created"},t=[];["crop","province","municipality","type","updated_by","date_created"].forEach((function(n){t.push({field:n,headerName:e[n],flex:1,editable:!1,sortable:!1,disableColumnMenu:!0})}));var n=x.map((function(e,t){return{id:t,docId:g[e].id,crop:g[e].crop,province:g[e].province,municipality:g[e].municipality,type:g[e].type,updated_by:g[e].updated_by,date_created:g[e].date_created}}));b.current&&(a(n),d(t))}}),[x,j,g,v,y]),(0,r.jsx)(B.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:_.DW.ADMIN,children:(0,r.jsx)(M,{rows:n,columns:l,loadingReports:j===T.G.PENDING,user:e.user,message:f,resetMessage:function(){return h("")}})})}))}},function(e){e.O(0,[135,203,539,433,728,986,774,888,179],(function(){return t=3622,e(e.s=t);var t}));var t=e.O();_N_E=t}]);