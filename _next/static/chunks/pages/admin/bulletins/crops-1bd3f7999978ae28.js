(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{2176:function(e,n,r){"use strict";r.d(n,{D:function(){return m}});var t=r(7462),o=r(3366),i=r(7294),a=r(6010),l=r(1496),c=r(7192),s=r(3490),u=r(8836),d=r(5893);const p=["className","children"],f=(0,l.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(e,n)=>n.toolbarContainer})((({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(.5,.5,0)}))),m=i.forwardRef((function(e,n){const{className:r,children:i}=e,l=(0,o.Z)(e,p),m=(e=>{const{classes:n}=e;return(0,c.Z)({root:["toolbarContainer"]},s.d,n)})({classes:(0,u.B)().classes});return i?(0,d.jsx)(f,(0,t.Z)({ref:n,className:(0,a.Z)(r,m.root)},l,{children:i})):null}))},6132:function(e,n,r){"use strict";r.d(n,{S:function(){return f}});var t=r(7462),o=r(3366),i=r(7294),a=r(4696),l=r(269),c=r(7476),s=r(9630),u=r(8836),d=r(5893);const p=["onClick"],f=i.forwardRef((function(e,n){var r;const{onClick:i}=e,f=(0,o.Z)(e,p),m=(0,s.l)(),g=(0,u.B)(),{open:b,openedPanelValue:h}=(0,a.P)(m,l.e);return g.disableColumnSelector?null:(0,d.jsx)(g.components.BaseButton,(0,t.Z)({ref:n,size:"small",color:"primary","aria-label":m.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,d.jsx)(g.components.ColumnSelectorIcon,{})},f,{onClick:e=>{b&&h===c.y.columns?m.current.hidePreferences():m.current.showPreferences(c.y.columns),null==i||i(e)}},null==(r=g.componentsProps)?void 0:r.baseButton,{children:m.current.getLocaleText("toolbarColumns")}))}))},853:function(e,n,r){"use strict";r.d(n,{M:function(){return y}});var t=r(7462),o=r(3366),i=r(7294),a=r(1496),l=r(7192),c=r(8082),s=r(8216),u=r(198),d=r(4696),p=r(1207),f=r(269),m=r(7476),g=r(9630),b=r(8836),h=r(3490),x=r(5893);const v=["componentsProps"],w=(0,a.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,n)=>n.toolbarFilterList})((({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)}))),y=i.forwardRef((function(e,n){var r,a;const{componentsProps:y={}}=e,F=(0,o.Z)(e,v),C=y.button||{},j=(0,g.l)(),P=(0,b.B)(),S=(0,d.P)(j,p.DY),Z=(0,d.P)(j,u.WH),T=(0,d.P)(j,f.e),k=(e=>{const{classes:n}=e;return(0,l.Z)({root:["toolbarFilterList"]},h.d,n)})({classes:P.classes}),_=i.useMemo((()=>{if(T.open)return j.current.getLocaleText("toolbarFiltersTooltipHide");if(0===S.length)return j.current.getLocaleText("toolbarFiltersTooltipShow");const e=e=>Z[e.columnField].filterOperators.find((n=>n.value===e.operatorValue)).label||j.current.getLocaleText(`filterOperator${(0,s.Z)(e.operatorValue)}`).toString();return(0,x.jsxs)("div",{children:[j.current.getLocaleText("toolbarFiltersTooltipActive")(S.length),(0,x.jsx)(w,{className:k.root,children:S.map(((n,r)=>(0,t.Z)({},Z[n.columnField]&&(0,x.jsx)("li",{children:`${Z[n.columnField].headerName||n.columnField}\n                  ${e(n)}\n                  ${n.value}`},r))))})]})}),[j,T.open,S,Z,k]);return P.disableColumnFilter?null:(0,x.jsx)(P.components.BaseTooltip,(0,t.Z)({title:_,enterDelay:1e3},F,null==(r=P.componentsProps)?void 0:r.baseTooltip,{children:(0,x.jsx)(P.components.BaseButton,(0,t.Z)({ref:n,size:"small",color:"primary","aria-label":j.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,x.jsx)(c.Z,{badgeContent:S.length,color:"primary",children:(0,x.jsx)(P.components.OpenFilterButtonIcon,{})})},C,{onClick:e=>{var n;const{open:r,openedPanelValue:t}=T;r&&t===m.y.filters?j.current.hideFilterPanel():j.current.showFilterPanel(),null==(n=C.onClick)||n.call(C,e)}},null==(a=P.componentsProps)?void 0:a.baseButton,{children:j.current.getLocaleText("toolbarFilters")}))}))}))},3622:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return r(8601)}])},7513:function(e,n){"use strict";n.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},welcome:{display:"grid",placeContent:"center",marginTop:function(e){return e.spacing(10)},textAlign:"center","& h5":{marginTop:function(e){return e.spacing(2)}}},conditionLegend:{maxWidth:{md:"100%",lg:"270px"},marginBottom:"32px",padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul":{fontSize:"14px"}},gridContainer:{marginTop:"24px",minHeight:500,width:1,"& .normal":{backgroundColor:"yellow"},"& .drier":{backgroundColor:"red"},"& .wetter":{backgroundColor:"blue"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}}}},8601:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return S}});var t=r(4051),o=r.n(t),i=r(5893),a=r(7294),l=r(8152),c=r(3059),s=r(1664),u=r(1163),d=r(5861),p=r(7357),f=r(1057),m=r(2176),g=r(6132),b=r(853),h=r(4343),x=r(7513),v=r(5337);function w(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function y(e){return(0,i.jsxs)(m.D,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){w(e,n,r[n])}))}return e}({},e,{children:[(0,i.jsx)(g.S,{}),(0,i.jsx)(b.M,{})]}))}var F=function(e){var n=e.rows,r=e.columns,t=e.loadingReports,o=(0,u.useRouter)();return(0,i.jsxs)("div",{children:[(0,i.jsx)(d.Z,{variant:"h5",children:"Crop Recommendations"}),(0,i.jsxs)("p",{children:["Create and preview ",(0,i.jsx)("strong",{children:"10-Day"})," and ",(0,i.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,i.jsx)(s.default,{href:"/admin/bulletins/crops/create",passHref:!0,children:(0,i.jsx)(f.Z,{variant:"contained",children:"Create Bulletin"})}),(0,i.jsx)(p.Z,{sx:x.Z.gridContainer,style:{height:n.length<=4?"500px":"unset"},children:(0,i.jsx)(h._,{rows:n,columns:r,sx:v.Z.datagrid,autoHeight:n.length>=5,disableDensitySelector:!0,rowsPerPageOptions:[15,30,100],components:{Toolbar:y},loading:t,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:function(e){o.push({pathname:"/admin/bulletins/crops/view",query:{docId:e.row.docId}})}})})]})},C=r(2530),j=r(7426);function P(e,n,r,t,o,i,a){try{var l=e[i](a),c=l.value}catch(s){return void r(s)}l.done?n(c):Promise.resolve(c).then(t,o)}var S=(0,c.Z)((function(e){var n=(0,a.useRef)(!1),r=(0,a.useState)([]),t=r[0],c=r[1],s=(0,a.useState)([]),u=s[0],d=s[1],p=(0,a.useState)([]),f=p[0],m=p[1],g=(0,a.useState)(!0),b=g[0],h=g[1];return(0,a.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),(0,a.useEffect)((function(){if(null!==e.user&&!e.loading){var r=function(){var r,t=(r=o().mark((function r(){var t;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,l.pr)(e.user.uid);case 3:t=r.sent,n.current&&(m(t),h(!1)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),n.current&&(h(!1),console.error(r.t0.message));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(t,o){var i=r.apply(e,n);function a(e){P(i,t,o,a,l,"next",e)}function l(e){P(i,t,o,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();r()}}),[e.user,e.loading]),(0,a.useEffect)((function(){if(f.length>0){var e={crop:"Crop",province:"Province",municipality:"Municipality",updated_by:"Updated by",date_created:"Date Created"},n=[];["crop","province","municipality","updated_by","date_created"].forEach((function(r){n.push({field:r,headerName:e[r],width:200,editable:!1,sortable:!1,disableColumnMenu:!0})}));var r=f.map((function(e,n){return{id:n,docId:e.id,crop:e.crop,province:e.province,municipality:e.municipality,updated_by:e.updated_by,date_created:e.date_created.toDate().toDateString()}}));c(r),d(n)}}),[f]),(0,i.jsx)(C.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:j.DW.ADMIN,children:(0,i.jsx)(F,{rows:t,columns:u,loadingReports:b})})}))},5337:function(e,n){"use strict";n.Z={datagrid:{background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"8px","& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(e){return e.palette.primary.dark},fontSize:16}}}}},function(e){e.O(0,[135,669,343,728,152,774,888,179],(function(){return n=3622,e(e.s=n);var n}));var n=e.O();_N_E=n}]);