(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[406],{7381:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4938)),o=n(5893),a=(0,i.default)([(0,o.jsx)("path",{d:"M5 5v14h14V5H5zm9 12H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z",opacity:".3"},"0"),(0,o.jsx)("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm12-4h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64S3 4.72 3 5v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM19 19H5V5h14v14z"},"1")],"AssignmentTwoTone");t.Z=a},2795:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4938)),o=n(5893),a=(0,i.default)([(0,o.jsx)("path",{d:"M13 4H6v16h12V9h-5V4zm3 14H8v-2h8v2zm0-6v2H8v-2h8z",opacity:".3"},"0"),(0,o.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"},"1")],"DescriptionTwoTone");t.Z=a},3622:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops",function(){return n(3991)}])},4010:function(e,t,n){"use strict";var r=n(5893),i=n(5113);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=(0,n(1496).ZP)((function(e){return(0,r.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{padding:t.spacing(3),borderRadius:t.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(t.palette.bacap.border)}}));t.Z=a},3991:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(5893),i=n(7294),o=n(9473),a=n(3059),c=n(1163),s=n(7357),l=n(1664),u=n(6886),d=n(5861),p=n(1496),f=n(1796);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,p.ZP)((function(e){return(0,r.jsx)(u.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},e))}))((function(e){var t=e.theme;return{textAlign:"center",cursor:"pointer",borderRadius:t.spacing(1),padding:t.spacing(2),"& a":{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},"& a:visited":{color:"rgba(0, 0, 0, 0.87)"},"& h6":{lineHeight:t.spacing(3)},"& svg":{color:t.palette.secondary.main},"&:hover, &:focus":{backgroundColor:(0,f.Fq)(t.palette.secondary.light,.3)}}})),b=v,m=n(3501),y=n(7381),x=n(2795);var g=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(m.Z,{maxWidth:"sm",openButtonText:"Create Bulletin",title:"Select a Crop Bulletin Type",showButtons:!1,colorTheme:"secondary",children:(0,r.jsxs)(u.ZP,{container:!0,children:[(0,r.jsx)(b,{item:!0,xs:12,sm:6,children:(0,r.jsx)(l.default,{href:"/admin/bulletins/crops/seasonal/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(y.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"Regional Seasonal Climate"}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"Outlook and Advisory"})]})})}),(0,r.jsx)(b,{item:!0,xs:12,sm:6,children:(0,r.jsx)(l.default,{href:"/admin/bulletins/crops/tenday/create",passHref:!0,children:(0,r.jsxs)("a",{children:[(0,r.jsx)(x.Z,{sx:{fontSize:"90px"}}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"10-Day Farm Weather Outlook"}),(0,r.jsx)(d.Z,{variant:"subtitle1",children:"and Advisory"})]})})})]})})})},j=n(4054),w=n(3841),O=n(8972),Z=n(4010),S=n(8360),C=n(5322),P=n(7426),_=n(2176),z=n(6132),H=n(853),E=n(3539),D=n(901);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}function k(e){return(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,r.jsxs)(_.D,R({},e,{children:[(0,r.jsx)(z.S,{}),(0,r.jsx)(H.M,{})]}))})}var N=function(e){var t=e.rows,n=e.columns,a=e.message,l=e.resetMessage,u=e.handleTypeChange,p=(0,i.useState)(P.Ry.SEASONAL),f=p[0],h=p[1],v=(0,o.v9)((function(e){return e.reports.status})),b=(0,o.v9)((function(e){return e.dashboard.reportType})),m=(0,c.useRouter)();return(0,i.useEffect)((function(){h(b)}),[b]),(0,r.jsxs)("div",{children:[(0,r.jsx)(C.Z,{openSnackbar:""!==a,message:a,severity:"info",closeHandlerCB:l}),(0,r.jsx)(d.Z,{variant:"h5",children:"Crop Recommendations"}),(0,r.jsxs)("p",{children:["Create and preview ",(0,r.jsx)("strong",{children:"10-Day"})," and ",(0,r.jsx)("strong",{children:"Seasonal"})," crop bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]}),(0,r.jsxs)(Z.Z,{sx:{display:"flex",flexDirection:{sm:"column",md:"row"},justifyContent:"space-between",alignItems:"center",padding:"8px 16px 8px 24px"},children:[(0,r.jsx)(g,{}),(0,r.jsxs)(j.Z,{sx:{m:1,width:{xs:"100%",sm:"100%",md:300}},size:"small",children:[(0,r.jsx)(w.Z,{id:"report-type",children:"Bulletin Type"}),(0,r.jsxs)(S.Z,{labelId:"report-type",id:"report-type",value:f,label:"Bulletin Type",onChange:u,children:[(0,r.jsx)(O.Z,{value:P.Ry.SEASONAL,children:"Seasonal Crop Recommendations"}),(0,r.jsx)(O.Z,{value:P.Ry.TEN_DAY,children:"10-Day Crop Recommendations"})]})]})]}),(0,r.jsx)(s.Z,{style:{height:678,width:"100%",textAlign:"left"},children:(0,r.jsx)(Z.Z,{sx:{height:"inherit",marginTop:"16px"},children:(0,r.jsx)(E._,{rows:t,columns:n,disableDensitySelector:!0,pageSize:10,rowsPerPageOptions:[10],components:{Toolbar:k},loading:v===D.G.PENDING,rowHeight:48,initialState:{columns:{columnVisibilityModel:{rowId:!1}}},onRowClick:function(e){m.push({pathname:"/admin/bulletins/crops/report/view",query:{docId:e.row.docId}})}})})})]})},I=n(2530),M=n(1690),A=n(3063);var B=(0,a.Z)((function(e){var t=(0,i.useState)([]),n=t[0],a=t[1],c=(0,i.useState)([]),s=c[0],l=c[1],u=(0,i.useState)(""),d=u[0],p=u[1],f=(0,o.v9)((function(e){return e.dashboard.reportType})),h=(0,i.useRef)(!1),v=(0,i.useRef)(!1),b=(0,o.I0)(),m=(0,o.v9)((function(e){return e.reports})),y=m.ids,x=m.entities,g=m.status;return(0,i.useEffect)((function(){return h.current=!0,function(){h.current=!1}}),[]),(0,i.useEffect)((function(){null===e.user||e.loading||0!==y.length||v.current||(v.current=!0,b((0,M.RC)({uid:e.user.uid,type:f})))}),[e.user,e.loading,y,f,b]),(0,i.useEffect)((function(){if([D.G.FULLFILLED,D.G.IDLE].includes(g)&&y.length>0){var e={crop:"Crop",province:"Province",municipality:"Municipality",type:"Bulletin Type",updated_by:"Updated by",date_created:"Date Created"},t={province:180,municipality:180,type:110,date_created:200},n=[];["crop","province","municipality","type","updated_by","date_created"].forEach((function(r){n.push({field:r,headerName:e[r],minWidth:t[r],flex:void 0===t[r]?1:0,editable:!1,sortable:!1,disableColumnMenu:!0})}));var r=y.map((function(e,t){return{id:t,docId:x[e].id,crop:x[e].crop,province:x[e].province,municipality:x[e].municipality,type:x[e].type,updated_by:x[e].updated_by,date_created:x[e].date_created}}));h.current&&(a(r),l(n))}}),[g,y,x]),(0,r.jsx)(I.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:P.DW.ADMIN,children:(0,r.jsx)(N,{rows:n,columns:s,loadingReports:g===D.G.PENDING,message:d,resetMessage:function(){return p("")},handleTypeChange:function(t){var n=t.target.value;b((0,M.RC)({uid:e.user.uid,type:n})).unwrap().then((function(e){e.length>0&&b((0,A.uq)(n))})).catch((function(){p("No ".concat(n," reports are available."))}))}})})}))}},function(e){e.O(0,[9351,6153,9964,1704,1903,5751,6295,4039,7944,3539,1433,3728,986,9774,2888,179],(function(){return t=3622,e(e.s=t);var t}));var t=e.O();_N_E=t}]);