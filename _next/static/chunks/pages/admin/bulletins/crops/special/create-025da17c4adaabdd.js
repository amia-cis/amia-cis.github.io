(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{13063:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/special/create",function(){return t(52358)}])},52358:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return Z},default:function(){return U}});var r=t(34051),o=t.n(r),u=t(85893),i=t(67294),a=t(9473),c=t(87682),s=t(30340),l=t(66383),f=t(95243),p=t(30560),d=t(1029),v=t(61690),y=t(87006),b=t(24530),m=t(901),g=t(76490),h=t(33050),_=t(4463);function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return S(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,n,t){var r=(0,i.useState)([]),o=r[0],u=r[1];return(0,i.useEffect)((function(){if((null===e||void 0===e?void 0:e.data)&&(null===n||void 0===n?void 0:n.data)&&t.length>0&&0===o.length){var r=e.data.map((function(e){return e.province})).filter((function(e,n,t){return t.indexOf(e)===n})),i=e.data.reduce((function(e,n){return void 0===e[n.province]&&(e[n.province]=[]),e[n.province]=O(e[n.province]).concat(O(n.municipalities)),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){E(e,n,t[n])}))}return e}({},e)}),{}),a=O(t);a.forEach((function(n){n.disabled=!r.includes(n.label),n.municipalities.forEach((function(t){var r=e.data.findIndex((function(e){return e.province===t.province&&e.municipalities.includes(t.label)}));n.disabled?t.disabled=!0:(t.disabled=!i[n.label].includes(t.label),t.signal=r>-1?e.data[r].signal:0)}))})),u(a)}}),[e,n,t,o]),{affectedprovinces:o}}var A=t(68193),P=t(23766),L=t(41375),I=t(94640),x=t(16013),R=t(27392),C=t(47426),k=t(53063),N=t(12671),D=t(87661),T=t(77715);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Y(e,n,t,r,o,u,i){try{var a=e[u](i),c=a.value}catch(s){return void t(s)}a.done?n(c):Promise.resolve(c).then(r,o)}function G(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var u=e.apply(n,t);function i(e){Y(u,r,o,i,a,"next",e)}function a(e){Y(u,r,o,i,a,"throw",e)}i(void 0)}))}}function B(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){B(e,n,t[n])}))}return e}function W(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,u=[],i=!0,a=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(u.push(r.value),!n||u.length!==n);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==t.return||t.return()}finally{if(a)throw o}}return u}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var F={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:[],sel_month:null,processed:!1,loading:!1,error:"",success:"",sel_condition:{id:0,from:"weather_condition",label:C.MW.WAY_BELOW_NORMAL.label}},K={url:"",filename:""};var Z=!0,U=(0,f.Z)((function(e){var n=e.provinces,t=void 0===n?[]:n,r=e.user,f=e.onBtnLogoutClick,S=e.loading,E=(0,i.useState)(F),O=E[0],j=E[1],Y=(0,i.useState)([]),Z=Y[0],U=Y[1],V=(0,i.useState)([]),J=V[0],X=V[1],q=(0,i.useState)(null),$=q[0],z=q[1],Q=(0,I.Z)(O.sel_province,O.sel_municipality),ee=Q.days,ne=Q.loading,te=Q.error,re=Q.summary,oe=W((0,c.ky)(d.K.GLOBAL_COLLECTIONS,d.K.CYCLONE_ADVISORY),2),ue=oe[0],ie=oe[1],ae=W((0,c.ky)(p.M.WEATHER_FORECASTS,"bicol/".concat(p.M.SUB_SPECIAL_COMMON,"/").concat(p.M.COMMON_SPECIAL_TYPE.WIND_SPEED)),2),ce=ae[0],se=ae[1],le=w(ce,ue,t).affectedprovinces,fe=(0,P.Z)(O.sel_province,le),pe=(0,h.Z)(O.sel_province),de=pe.cropcalendar,ve=pe.loading,ye=pe.error,be=(0,g.Z)(de,O.sel_municipality),me=(0,_.Z)(Z,(0,T.aV)(!1),be),ge=me.cropslist,he=me.uniquecropstages,_e=me.error,Se=(0,A.Z)($,null,x.q.SPECIAL,!0),Ee=Se.recommendations,Oe=Se.farmoperations,we=Se.loading,Ae=Se.error,Pe=(0,L.Z)(Ee),Le=Pe.group,Ie=Pe.error,xe=(0,a.v9)((function(e){return e.reports})),Re=xe.status,Ce=xe.report,ke=(0,a.v9)((function(e){return e.dashboard.reportType})),Ne=(0,a.v9)((function(e){return e.dashboard.isEnglish})),De=(0,i.useState)(!0),Te=De[0],je=De[1],Ye=(0,i.useState)(!1),Ge=Ye[0],Be=Ye[1],Me=(0,i.useRef)(!1),We=(0,i.useState)(""),He=We[0],Fe=We[1],Ke=(0,i.useState)(K),Ze=Ke[0],Ue=Ke[1],Ve=(0,i.useState)(R.BF),Je=Ve[0],Xe=Ve[1],qe=(0,a.I0)();(0,i.useEffect)((function(){return Me.current=!0,function(){Me.current=!1}}),[]),(0,i.useEffect)((function(){qe((0,b.Km)([])),qe((0,N.s_)())}),[qe]),(0,i.useEffect)((function(){null!==re&&j((function(e){return M({},e,{sel_month:{label:(0,T.aV)()}})}))}),[re]),(0,i.useEffect)((function(){je(S||ve||we||ne||ie===m.G.PENDING||se===m.G.PENDING)}),[S,ve,we,ne,ie,se]),(0,i.useEffect)((function(){Ue(K)}),[Ne]),(0,i.useEffect)((function(){if(""!==ye||""!==Ae||""!==te||""!==_e){var e=ye||Ae||te||_e;j((function(n){return M({},n,{error:e})}))}else j((function(e){return M({},e,{error:""})}))}),[_e,Ae,te,ye]),(0,i.useEffect)((function(){null===O.sel_municipality||ne||ie===m.G.PENDING||Fe((function(e){var n,t,r,o;return(0,D.smsWriter)({type:D.SMS_TYPE.SPECIAL,replacements:(o={},B(o,D.REPLACE_KEYS.SPECIAL.TYPHOON_NAME,(null===ue||void 0===ue||null===(n=ue.meta)||void 0===n?void 0:n.typhoon_name)||"-"),B(o,D.REPLACE_KEYS.SPECIAL.TYPHOON_SIGNAL,(null===O||void 0===O||null===(t=O.sel_municipality)||void 0===t?void 0:t.signal)||0),B(o,D.REPLACE_KEYS.SPECIAL.MUNICIPALITY,(null===O||void 0===O||null===(r=O.sel_municipality)||void 0===r?void 0:r.label)||"-"),o)})}))}),[ee,ne,ue,ie,O.sel_municipality]),(0,i.useEffect)((function(){Re===m.G.FULLFILLED&&null!==Ce&&Me.current&&Xe((function(e){return M({},e,{msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:Ce.id})}))}),[Re,Ce]),(0,i.useEffect)((function(){Ie||null===Le||qe((0,b.Km)(Le))}),[Le,Ie,qe]),(0,i.useEffect)((function(){if(!S)if(he.length>0){var e=he.map((function(e){return e.code})).toString(),n=he.map((function(e){return e.label})).toString();z(e),j((function(e){return M({},e,{sel_crop:ge.map((function(e){return e.label})).toString().split(",").join(", "),sel_stage:n})}))}else qe((0,b.Km)([])),null!==O.sel_municipality&&j((function(e){return M({},e,{error:"No crop stages are available for this date on ".concat(e.sel_municipality,".")})}))}),[he,ge,S,,qe]);var $e=function(){var e=G(o().mark((function e(){var n,t,r,u,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===Ze.url){e.next=3;break}return Be(!0),e.abrupt("return");case 3:return j((function(e){return M({},e,{loading:!0,error:"",success:""})})),e.prev=4,n={region:"bicol",province:O.sel_province,municipality:O.sel_municipality,date:(new Date).toDateString(),operation:"preview",language:Ne?"en":"tag"},Be(!0),j((function(e){return M({},e,{loading:!0,error:""})})),e.next=10,(0,y.U1)(n);case 10:t=e.sent,r=new Blob([t],{type:"application/pdf"}),(u={}).href=URL.createObjectURL(r),u.download="".concat(O.sel_province,"_").concat(O.sel_municipality,".pdf"),Ue((function(e){return M({},e,{url:u.href,filename:u.download})})),j((function(e){return M({},e,{loading:!1,success:"Bulletin preview created."})})),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(4),i="",void 0!==e.t0.response&&(i=void 0!==e.t0.response.data&&"[object Blob]"===H(e.t0.response.data)?e.t0.response.data:""),""===i&&(i=e.t0.message),j((function(e){return M({},e,{loading:!1,error:i})}));case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=G(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xe(M({},Je,{loading:!0,msg:"Saving report..."}));try{n={region:"bicol",province:O.sel_province,municipality:O.sel_municipality,date:(new Date).toDateString(),operation:"create",language:Ne?"en":"tag"},qe((0,v.tR)(n)).unwrap().then((function(){ke!==R.Ry.SPECIAL_WEATHER&&(qe((0,k.uq)(R.Ry.SPECIAL_WEATHER)),qe((0,v.RC)({uid:r.uid,type:R.Ry.SPECIAL_WEATHER})))})).catch((function(e){Me.current&&Xe((function(n){return M({},n,{msg:e,loading:!1,savesuccess:!1,docId:null})}))}))}catch(o){t="",void 0!==o.response&&(t=void 0!==o.response.data&&"[object Blob]"===H(o.response.data)?o.response.data:""),""===t&&(t=o.message),j((function(e){return M({},e,{loading:!1,error:t})}))}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.jsx)(l.Z,{loading:S,user:r,onBtnLogoutClick:f,accLevel:C.DW.ADMIN,children:(0,u.jsx)(s.Z,{optsprovinces:le,optsmunicipalities:fe,optscrops:ge,optscropstages:he,optsactivities:Oe,sel_options:O,loading:Te,isloadingreport:Re===m.G.PENDING,isdisabled:!1===(null===ue||void 0===ue?void 0:ue.has_cyclone),open:Ge,message:Je,smstext:He,pageTitle:"Special Weather Bulletin",pageDescription:"Create <strong>Special Weather</strong> crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download.",pdfPreview:Ze,onSelectItemChange:function(e,n){var t=n.from,r=n.label;if(Ue(K),J.length>0&&X([]),""!==O.error&&j((function(e){return M({},e,{error:""})})),Object.keys(n).includes("id"))switch(t){case"province":z(null),j((function(e){return M({},e,{sel_province:r,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null})}));break;case"municipality":z(null),j((function(e){return M({},e,{sel_municipality:r,sel_crop:null,sel_stage:null,sel_activity:null})})),U(de.filter((function(e){return e.municipality===r})))}else if("province"===t){var o=O.sel_month;j(M({},F,{sel_month:o})),z(null)}else"municipality"===t&&(j(M({},O,{sel_municipality:null,sel_crop:null,sel_day:null,sel_stage:null,sel_activity:null})),z(null))},handlePreview:$e,handleSave:ze,toggleViewerOpen:function(){Be((function(e){return!e}))},resetSelections:function(){var e=O.sel_month;j(M({},F,{sel_month:e})),z(null),qe((0,b.Km)([]))},togglePrompt:function(){Xe((function(e){return M({},R.BF,{isOpen:!e.isOpen})}))}})})}))},87682:function(e,n,t){"use strict";t.d(n,{ky:function(){return p},Kx:function(){return d},m$:function(){return v},tl:function(){return y}});var r=t(34051),o=t.n(r),u=t(67294),i=t(25321),a=t(15152);function c(e,n,t,r,o,u,i){try{var a=e[u](i),c=a.value}catch(s){return void t(s)}a.done?n(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var u=e.apply(n,t);function i(e){c(u,r,o,i,a,"next",e)}function a(e){c(u,r,o,i,a,"throw",e)}i(void 0)}))}}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){l(e,n,t[n])}))}return e}function p(e,n){var t=(0,u.useState)(null),r=t[0],c=t[1],l=(0,u.useState)(!0),f=l[0],p=l[1],d=(0,u.useState)(""),v=d[0],y=d[1],b=(0,u.useRef)(!0);return(0,u.useEffect)((function(){var t=function(){var t=s(o().mark((function t(){var r,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,i.JU)(a.db,e,n),t.next=4,(0,i.QT)(r);case 4:(u=t.sent).exists()&&b.current&&(c(u.data()),p(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),y(t.t0.message),p(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return b.current=!1}}),[e,n]),[r,f,v]}function d(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,u.useState)([]),c=r[0],l=r[1],p=(0,u.useState)(!0),d=p[0],v=p[1],y=(0,u.useState)(""),b=y[0],m=y[1],g=(0,u.useRef)(!0);return(0,u.useEffect)((function(){var r=function(){var r=s(o().mark((function r(){var u,c,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,u=(0,i.hJ)(a.db,e),c=t||(0,i.IO)(u,(0,i.Xo)(n,"asc")),r.next=5,(0,i.PL)(c);case 5:s=r.sent,g.current&&(l(s.docs.map((function(e){return f({},e.data())}))),v(!1)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),m(r.t0.message),v(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){return g.current=!1}}),[e,n,t]),{documents:c,loading:d,error:b}}function v(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=(0,u.useState)([]),l=c[0],p=c[1],d=(0,u.useState)(!0),v=d[0],y=d[1],b=(0,u.useState)(""),m=b[0],g=b[1],h=(0,u.useRef)(!0);return(0,u.useEffect)((function(){var u=function(){var u=s(o().mark((function u(){var c,s;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,c=(0,i.IO)((0,i.hJ)(a.db,e,n,t),(0,i.Xo)(r)),o.next=4,(0,i.PL)(c);case 4:s=o.sent,h.current&&(p(s.docs.map((function(e){return f({},e.data())}))),y(!1)),o.next=12;break;case 8:o.prev=8,o.t0=o.catch(0),g(o.t0.message),y(!1);case 12:case"end":return o.stop()}}),u,null,[[0,8]])})));return function(){return u.apply(this,arguments)}}();return u(),function(){return h.current=!1}}),[e,n,t,r]),{documents:l,loading:v,error:m}}function y(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4?arguments[4]:void 0,l=(0,u.useState)([]),p=l[0],d=l[1],v=(0,u.useState)(!0),y=v[0],b=v[1],m=(0,u.useState)(""),g=m[0],h=m[1],_=(0,u.useRef)(!0);return(0,u.useEffect)((function(){var u=function(){var u=s(o().mark((function u(){var s,l;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,s=(0,i.hJ)(a.db,e,n,t),""!==r&&(s=(0,i.IO)(s,(0,i.Xo)(r))),c&&(s=(0,i.IO)(s,(0,i.b9)(c))),o.next=6,(0,i.PL)(s);case 6:l=o.sent,_.current&&(d(l.docs.map((function(e){return f({},e.data())}))),b(!1)),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(0),h(o.t0.message),b(!1);case 14:case"end":return o.stop()}}),u,null,[[0,10]])})));return function(){return u.apply(this,arguments)}}();return u(),function(){return _.current=!1}}),[e,n,t,r,c]),{documents:p,loading:y,error:g}}},1029:function(e,n,t){"use strict";t.d(n,{K:function(){return h},d:function(){return _}});var r=t(34051),o=t.n(r),u=t(94763),i=t(15152),a=t(47426),c=t(27392);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,n,t,r,o,u,i){try{var a=e[u](i),c=a.value}catch(s){return void t(s)}a.done?n(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var u=e.apply(n,t);function i(e){l(u,r,o,i,a,"next",e)}function a(e){l(u,r,o,i,a,"throw",e)}i(void 0)}))}}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,n){return!n||"object"!==m(n)&&"function"!==typeof n?s(e):n}function b(e,n){return b=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},b(e,n)}var m=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=v(e);if(n){var o=v(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return y(this,t)}}var h={MEDIA_ASSETS:"n_page_media",ASSETS:"n_page_assets",PAGE_SEARCH:"n_page_search",GLOBAL_COLLECTIONS:"w_services",TYPHOON_ADVISORY:"typhoon_advisory",CYCLONE_ADVISORY:"cyclone_advisory"},_=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&b(e,n)}(t,e);var n=g(t);function t(){var e;p(this,t);var r=s(e=n.apply(this,arguments));d(s(e),"getPageAssetsDoc",function(){var e=f(o().mark((function e(n,t){var u,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a.length>2&&void 0!==a[2]&&a[2],i=[],e.prev=2,e.next=5,r.getDocumentData(h.ASSETS,n);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",[]);case 8:if(t){e.next=10;break}return e.abrupt("return",i);case 10:if(!u){e.next=14;break}return e.abrupt("return",i.data.filter((function(e){return e.page===t})));case 14:return e.abrupt("return",i.data.filter((function(e){return e.page===t})).map((function(e){return e.url})));case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),console.error(e.t0.message),new Error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(n,t){return e.apply(this,arguments)}}());var u=s(e);d(s(e),"getTyphoonAdvisory",f(o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.doc(u.db,h.GLOBAL_COLLECTIONS,h.TYPHOON_ADVISORY),e.next=3,u.getDoc(n);case 3:if(!(t=e.sent).exists()){e.next=6;break}return e.abrupt("return",t.data());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))));var l=s(e);return d(s(e),"getWeatherForecast",function(){var e=f(o().mark((function e(n,t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getNestedCollectionData(h.WEATHER_FORECASTS,n,t,"name");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),d(s(e),"getPdfDownloadURL",function(){var e=f(o().mark((function e(n){var t,r,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:c.Ry.SEASONAL,r="",e.t0=t,e.next=e.t0===c.Ry.SEASONAL?5:e.t0===c.Ry.TEN_DAY?7:e.t0===c.Ry.SPECIAL_WEATHER?9:11;break;case 5:return r=a.Do.PDF_STORAGE_SEASONAL,e.abrupt("break",12);case 7:return r=a.Do.PDF_STORAGE_TENDAY,e.abrupt("break",12);case 9:return r=a.Do.PDF_STORAGE_SPECIAL,e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:return e.prev=12,u=(0,i.iH)(i.tO,"".concat(r,"/").concat(n)),e.next=16,(0,i.Jt)(u);case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t1=e.catch(12),new Error(e.t1.message);case 22:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(n){return e.apply(this,arguments)}}()),e}return t}(u.Z)}},function(e){e.O(0,[6284,2866,9964,9522,1903,6279,6295,4039,2882,7092,6572,1050,3523,7702,1241,9774,2888,179],(function(){return n=13063,e(e.s=n);var n}));var n=e.O();_N_E=n}]);