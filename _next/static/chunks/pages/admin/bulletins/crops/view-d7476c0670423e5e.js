(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{1930:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/view",function(){return t(2086)}])},7513:function(n,e){"use strict";e.Z={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},welcome:{display:"grid",placeContent:"center",marginTop:function(n){return n.spacing(10)},textAlign:"center","& h5":{marginTop:function(n){return n.spacing(2)}}},conditionLegend:{maxWidth:{md:"100%",lg:"270px"},marginBottom:"32px",padding:function(n){return n.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},autocomplete:{marginTop:function(n){return n.spacing(1)}},recSeasonal:{marginTop:function(n){return n.spacing(5)},"& p, ul":{fontSize:"14px"}},datagrid:{background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"8px","& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(n){return n.palette.primary.dark},fontSize:16}},gridContainer:{marginTop:"24px",minHeight:500,width:1,"& .normal":{backgroundColor:"yellow"},"& .drier":{backgroundColor:"red"},"& .wetter":{backgroundColor:"blue"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}}}},1033:function(n,e,t){"use strict";t.d(e,{Z:function(){return s}});var r=t(5893),o=t(5675),i=t(7357),a=t(5861),c=t(120),u={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(n){return n.spacing(2)},color:function(n){return n.palette.text.secondary},borderStyle:"dashed",padding:function(n){return n.spacing(2)},marginTop:function(n){return n.spacing(4)}}};var s=function(n){var e=n.message,t=void 0===e?"Failed to load data":e;return(0,r.jsxs)(i.Z,{sx:u.container,children:[(0,r.jsx)(o.default,{unoptimized:!0,src:(0,c.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:c.imageLoader,alt:"Empty data"}),(0,r.jsx)(a.Z,{variant:"subtitle1",children:t})]})}},2086:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return M}});var r=t(4051),o=t.n(r),i=t(5893),a=t(7294),c=t(1163),u=t(3835),s=t(8152),l=t(7357),d=t(1057),p=t(6863),f=t(7720),x=t(5861),h=t(7702),b=t(8078),v={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},divider:{marginTop:"32px",marginBottom:"32px"},text:{marginTop:"16px",marginBottom:"16px"}};var g=function(){return(0,i.jsxs)(l.Z,{sx:v.container,children:[(0,i.jsx)(l.Z,{sx:{width:"300px"},children:[1,2,3,4,5,6,7,8].map((function(n){return(0,i.jsx)(b.Z,{variant:"text"},"up-".concat(n))}))}),(0,i.jsx)(f.Z,{sx:v.divider}),(0,i.jsx)(l.Z,{children:[1,2,3,4,5,6,7,8].map((function(n){return(0,i.jsx)(b.Z,{variant:"rectangular",sx:v.text},"down-".concat(n))}))})]})},y=t(1033),m=t(9536),j=t(8456),w=t(657),O=t(1425),k=t(7645),R=t(6580),S=t(3946),P={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"50px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(n){return n.palette.grey[500]}}};function E(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function C(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){C(n,e,t[e])}))}return n}function _(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(n);!(a=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(u){c=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}(n,e)||function(n,e){if(!n)return;if("string"===typeof n)return E(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=function(n){var e=n.loading,t=void 0!==e&&e,r=n.isOpen,o=void 0!==r&&r,c=n.IconSVG,u=void 0===c?null:c,s=n.closeHandler,l=void 0===s?null:s,p=n.confirmHandler,f=void 0===p?null:p,x=n.maxWidth,h=void 0===x?"sm":x,b=n.openButtonText,v=void 0===b?"Click":b,g=n.cancelBtnText,y=void 0===g?"Cancel":g,E=n.confirmBtnText,C=void 0===E?"Ok":E,Z=n.title,F=void 0===Z?"Window Title":Z,B=n.contentText,D=void 0===B?"":B,A=n.error,W=void 0===A?"":A,z=_(a.useState({open:null}),2),I=z[0],L=z[1];(0,a.useEffect)((function(){null===I.open&&L(T({},I,{open:void 0!==o&&o}))}),[I,o]);var M=function(){L(T({},I,{open:!1}))};return(0,i.jsxs)("div",{children:[v&&(0,i.jsxs)(d.Z,{disableElevation:!0,variant:"contained",color:"primary",onClick:function(){L(T({},I,{open:!0}))},sx:P.button,children:[u&&(0,i.jsx)(u,{sx:P.icon}),v]}),(0,i.jsxs)(w.Z,{maxWidth:h,fullWidth:!0,open:I.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,i.jsxs)(k.Z,{children:[(0,i.jsx)("span",{children:F}),(0,i.jsx)(S.Z,{"aria-label":"close",sx:P.closeButton,onClick:M,children:(0,i.jsx)(m.Z,{})})]}),(0,i.jsxs)(R.Z,{sx:P.dialogContent,children:[(0,i.jsx)("div",{children:D}),(0,i.jsx)("div",{className:"error",children:W})]}),(0,i.jsxs)(O.Z,{sx:P.dialogActions,children:[(0,i.jsx)(d.Z,{onClick:M||l,disabled:t,children:y}),(0,i.jsxs)(d.Z,{variant:"contained",disabled:t,onClick:f,children:[(0,i.jsx)("span",{style:{display:t?"none":"block"},children:C}),(0,i.jsx)(j.Z,{size:24,color:"secondary",sx:{display:t?"block":"none"}})]})]})]})]})},F=t(7513);var B=function(n){var e=n.report,t=n.loading,r=n.user,o=n.onBtnClick,a=n.onBackBtnClick,c=n.onDeleteClick;return(0,i.jsx)(h.Z,{loading:t,user:r,onBtnLogoutClick:o,children:t||e.loading?(0,i.jsx)(g,{}):void 0!==e.stages?(0,i.jsxs)(l.Z,{container:!0,sx:F.Z.container,children:[(0,i.jsxs)(l.Z,{sx:{marginBottom:"32px",display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(x.Z,{variant:"h5",children:"Crop Recommendation Summary"}),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(d.Z,{disableElevation:!0,variant:"contained",color:"primary",sx:F.Z.button,onClick:a,children:"Back"})," \xa0",(0,i.jsx)(Z,{isOpen:!1,maxWidth:"sm",openButtonText:"Delete",title:"Delete Report",contentText:""!==e.info?e.info:"Are you sure you want to delete this Bulletin report log?",confirmBtnText:""!==e.info?"Ok":"Delete",confirmHandler:c,loading:e.deleting})]})]}),(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Province:"})," ",e.province]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Municipality:"})," ",e.municipality]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Crop:"})," ",e.crop]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Month:"})," ",e.month]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Crop Stage(s):"})," ",e.stages.toString().split(",").join(", ")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Activities:"})," ",e.activities.toString().split(",").join(", ")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Created by:"})," ",e.updated_by]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Date created:"})," ",e.date_created.toDate().toDateString()]}),(0,i.jsxs)(x.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,i.jsx)(f.Z,{sx:{marginTop:"32px"}})]}),(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:e.recommendations}})]}):(0,i.jsx)(y.Z,{})})};function D(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,o)}function A(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){D(i,r,o,a,c,"next",n)}function c(n){D(i,r,o,a,c,"throw",n)}a(void 0)}))}}function W(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){W(n,e,t[e])}))}return n}var I={loading:!0,error:"",info:"",deleting:!1};function L(){var n=(0,a.useState)(I),e=n[0],t=n[1],r=(0,c.useRouter)(),l=(0,u.aC)();(0,a.useEffect)((function(){if(e.loading&&Object.keys(r.query).length>0){var n=function(){var n=A(o().mark((function n(){var e;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,s.fL)(r.query.docId);case 3:e=n.sent,t((function(n){return z({},n,{loading:!1},e)})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(z({},I,{loading:!1,error:n.t0.message}));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()}}),[r,e.loading]),(0,a.useEffect)((function(){l.loading||l.user||r.push("/admin/login")}),[l.user,l.loading,r]);var d=function(){var n=A(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.logOut();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),t(z({},I,{loading:!1,error:n.t0.message}));case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}(),p=function(){var n=A(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e.info){n.next=13;break}return n.prev=1,t(z({},e,{deleting:!0})),n.next=5,(0,s.GR)(e.id);case 5:t((function(n){return z({},n,{deleting:!1,info:"Report deleted."})})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t(z({},I,{deleting:!1,error:n.t0.message}));case 11:n.next=14;break;case 13:r.push("/admin/bulletins/crops");case 14:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}();return(0,i.jsx)(B,{loading:l.loading,user:l.user,report:e,onBtnClick:d,onBackBtnClick:function(){r.push("/admin/bulletins/crops")},onDeleteClick:p})}L.customLayout=!0,L.adminPage=!0;var M=L},8152:function(n,e,t){"use strict";t.d(e,{Zn:function(){return A},GR:function(){return W},fL:function(){return I},pr:function(){return L},pl:function(){return z}});var r=t(4051),o=t.n(r),i=t(9669),a=t.n(i),c=t(9431);function u(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,o)}function s(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){u(i,r,o,a,c,"next",n)}function c(n){u(i,r,o,a,c,"throw",n)}a(void 0)}))}}function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function d(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function p(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f(n){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},f(n)}function x(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){p(n,e,t[e])}))}return n}function h(n,e){return!e||"object"!==v(e)&&"function"!==typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function b(n,e){return b=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},b(n,e)}var v=function(n){return n&&"undefined"!==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function g(n){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=f(n);if(e){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return h(this,t)}}var y={BASE_API_URL:"https://amia-cis.herokuapp.com/api",CREATE_REPORT:"".concat("https://amia-cis.herokuapp.com/api","/reports/seasonal/crops"),REPORTS_CROPS:"reports_crops"},m=function(n){!function(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&b(n,e)}(c,n);var e,t,r,i=g(c);function c(){return l(this,c),i.apply(this,arguments)}return e=c,(t=[{key:"createReport",value:function(n){var e=this;return s(o().mark((function t(){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createRequestObject({body:n});case 2:return r=t.sent,t.next=5,a()(x({},r,{url:y.CREATE_REPORT,method:"POST"}));case 5:return i=t.sent,t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t)})))()}},{key:"deleteReport",value:function(n){var e=this;return s(o().mark((function t(){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={docId:n},t.next=3,e.createRequestObject({body:r});case 3:return i=t.sent,t.next=6,a()(x({},i,{url:y.CREATE_REPORT,method:"DELETE"}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()}},{key:"previewBulletin",value:function(n){var e=this;return s(o().mark((function t(){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createRequestObject({body:n,responseType:"blob"});case 2:return r=t.sent,t.next=5,a()(x({},r,{url:y.CREATE_REPORT,method:"POST"}));case 5:return i=t.sent,t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t)})))()}}])&&d(e.prototype,t),r&&d(e,r),c}(c.Z),j=t(4763);function w(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function O(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,o)}function k(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){O(i,r,o,a,c,"next",n)}function c(n){O(i,r,o,a,c,"throw",n)}a(void 0)}))}}function R(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function S(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P(n){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},P(n)}function E(n,e){return!e||"object"!==T(e)&&"function"!==typeof e?w(n):e}function C(n,e){return C=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},C(n,e)}var T=function(n){return n&&"undefined"!==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function _(n){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=P(n);if(e){var o=P(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return E(this,t)}}var Z="reports_crops",F=function(n){!function(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&C(n,e)}(t,n);var e=_(t);function t(){var n;R(this,t);var r=w(n=e.apply(this,arguments));S(w(n),"getBulletin",function(){var n=k(o().mark((function n(e){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.getDocumentData(Z,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());var i=w(n);return S(w(n),"getBulletins",function(){var n=k(o().mark((function n(e){var t,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.collection(i.db,Z),r=i.query(t,i.where("uid","==",e)),n.next=4,i.getCollectionData(Z,"",r);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n}return t}(j.Z),B=new m,D=new F,A=B.createReport.bind(B),W=B.deleteReport.bind(B),z=B.previewBulletin.bind(B),I=D.getBulletin.bind(D),L=D.getBulletins.bind(D)}},function(n){n.O(0,[611,669,203,986,899,774,888,179],(function(){return e=1930,n(n.s=e);var e}));var e=n.O();_N_E=e}]);