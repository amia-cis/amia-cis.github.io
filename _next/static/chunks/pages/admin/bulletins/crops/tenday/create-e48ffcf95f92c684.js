(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5507],{7947:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/tenday/create",function(){return t(242)}])},242:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return oe},default:function(){return ce}});var r=t(4051),i=t.n(r),a=t(5893),o=t(7294),c=t(9473),u=t(7682),l=t(1163),s=t(1664),f=t(5675),p=t(6660),d=t(1023),m=t(6295),v=t(1057),b=t(6863),y=t(7357),h=t(6886),g=t(3946),_=t(1903),x=t(5861),S=t(1829),w=t(7517),O=t(9227),j=t(5688),E=t(2094),k=t(901),P=t(2671),Z=t(6938);function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}var I=[{key:"sel_province",label:"Province"},{key:"sel_municipality",label:"Municipality"},{key:"sel_crop",label:"Crop"},{key:"sel_month",label:"Date"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}];var L=function(e){var n=(0,l.useRouter)(),t=(0,c.I0)(),r=e.sel_options,i=e.provinces,o=e.optsmunicipalities,u=e.error,R=e.open,L=e.message,A=e.smstext,C=e.loading,D=e.onSelectItemChange,T=e.handlePreview,M=e.togglePrompt,B=e.toggleViewerOpen,F=e.pdfPreview,G=e.resetSelections,W=e.generateRecommendations,Y=e.handleSave,U=(0,c.v9)((function(e){return e.reports})),V=U.report,J=U.status,K=function(){V&&(t((0,P.s_)()),n.push("/admin/bulletins/crops/report/view/?docId=".concat(V.id)))},z=function(){var e="Loading...";return i.length>0&&(e=null===r.sel_province?"Select a province":"Province"),e};return(0,a.jsxs)("div",{children:[(0,a.jsx)(O.Z,{isOpen:L.isOpen,maxWidth:"xs",openButtonText:null,title:L.title,contentText:L.msg,loading:L.loading,modalCancelHandlerCB:function(){L.savesuccess?K():M()},modalConfirmHandlerCB:function(){L.savesuccess?K():Y()}}),(0,a.jsx)(E.Z,{open:R,pdfPreview:F,error:r.error,loading:r.loading,toggleViewerOpen:B}),(0,a.jsx)(j.Z,{openSnackbar:""!==u,message:u,severity:"warning"}),(0,a.jsxs)(h.ZP,{container:!0,sx:Z.Z.container,children:[(0,a.jsxs)(y.Z,{sx:Z.Z.headerText,children:[(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(x.Z,{variant:"h5",children:"10-Day Farm Weather Outlook and Advisory Bulletin"}),(0,a.jsxs)("p",{children:["Create ",(0,a.jsx)("strong",{children:"10-Day Farm Weather Outlook and Advisory"})," crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]})]}),(0,a.jsx)(y.Z,{children:(0,a.jsx)(g.Z,{"aria-label":"exit",size:"medium",children:(0,a.jsx)(s.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,a.jsx)(d.Z,{fontSize:"inherit"})})})})]}),(0,a.jsxs)(h.ZP,{item:!0,sx:Z.Z.item,xs:12,lg:4,children:[(0,a.jsx)(x.Z,{variant:"h6",children:"Selection Options"}),(0,a.jsx)(m.Z,{disablePortal:!0,id:"province",value:r.sel_province,disabled:0===i.length||C||J===k.G.PENDING,options:i,sx:Z.Z.autocomplete,size:"small",PaperComponent:S.Z,renderInput:function(e){return(0,a.jsx)(_.Z,N({},e,{label:z()}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return D(e,N({},n,{from:"province"}))}}),(0,a.jsx)(m.Z,{disablePortal:!0,id:"municipality",value:r.sel_municipality,disabled:0===o.length||C||J===k.G.PENDING,options:o,sx:Z.Z.autocomplete,size:"small",PaperComponent:S.Z,renderInput:function(e){return(0,a.jsx)(_.Z,N({},e,{label:null===r.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return D(e,N({},n,{from:"municipality"}))}}),(0,a.jsxs)(b.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:J===k.G.PENDING||0===i.length||null===r.sel_municipality||"-"===r.sel_crop,sx:{marginTop:"16px",float:"right"},children:[(0,a.jsx)(v.Z,{variant:"outlined",onClick:G,children:"Reset"}),(0,a.jsx)(v.Z,{variant:"contained",onClick:W,children:"Generate"})]})]}),(0,a.jsx)(h.ZP,{item:!0,sx:Z.Z.item,xs:12,lg:8,children:(0,a.jsxs)(y.Z,{sx:Z.Z.selectionSummary,children:[(0,a.jsx)(x.Z,{variant:"h6",children:"Selection Summary"}),null===r.sel_province?(0,a.jsxs)(y.Z,{sx:Z.Z.welcome,children:[(0,a.jsx)(f.default,{unoptimized:!0,src:(0,p.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:p.imageLoader,alt:"Empty data"}),(0,a.jsxs)(y.Z,{sx:{marginTop:"16px"},children:[(0,a.jsx)(x.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,a.jsx)(x.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,a.jsx)(y.Z,{sx:Z.Z.summary,children:I.map((function(e,n){return(0,a.jsxs)("div",{children:[(0,a.jsxs)(x.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[e.label,": \xa0"]}),(0,a.jsx)(x.Z,{variant:"body2",style:{display:"inline-block"},children:null!==r[e.key]?["sel_stage","sel_crop","sel_activity","sel_month"].includes(e.key)?r[e.key]:r[e.key].label:""})]},"selected-".concat(n))}))}),""!==u&&(0,a.jsx)(x.Z,{variant:"caption",sx:{color:"red"},children:u})]})})]}),(0,a.jsx)(w.Z,{options:r,smstext:A,handlePreview:T,toggleViewerOpen:B,pdfPreview:F,handleSave:M})]})},A=t(6383),C=t(5243),D=t(1690),T=t(4680),M=t(6375),B=t(7599),F=t(6867),G=t(8152),W=t(7246),Y=t(7715),U=t(7392),V=t(7426),J=t(3063),K=t(7661);function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function H(e,n,t,r,i,a,o){try{var c=e[a](o),u=c.value}catch(l){return void t(l)}c.done?n(u):Promise.resolve(u).then(r,i)}function X(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){H(a,r,i,o,c,"next",e)}function c(e){H(a,r,i,o,c,"throw",e)}o(void 0)}))}}function q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){q(e,n,t[n])}))}return e}function Q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(u){c=!0,i=u}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}}(e,n)||te(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e,n){if(e){if("string"===typeof e)return z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?z(e,n):void 0}}var re={sel_province:null,sel_municipality:null,sel_crop:"-",sel_stage:"-",sel_activity:"-",sel_month:"-",processed:!1,loading:!1,error:"",success:"",sel_condition:{id:0,from:"weather_condition",label:V.MW.WAY_BELOW_NORMAL.label}},ie={url:"",filename:""},ae={province:"",municipality:"",rainfall:"",date_range:"",day_format:"",date_now:(new Date).toDateString()};var oe=!0,ce=(0,C.Z)((function(e){var n=Q((0,u.ky)(T.o.STATIC_RECOMMENDATIONS,"data"),2),t=n[0],r=n[1],l=(0,c.v9)((function(e){return e.cropcalendar})),s=l.entities,f=l.error,p=l.status,d=(0,c.v9)((function(e){return e.recommendations})),m=d.entities,v=d.error,b=d.status,y=(0,c.v9)((function(e){return e.tendayweather})),h=y.entities,g=y.error,_=y.status,x=(0,c.v9)((function(e){return e.reports})),S=x.error,w=x.status,O=x.report,j=(0,c.v9)((function(e){return e.dashboard.reportType})),E=(0,o.useState)([]),Z=E[0],R=E[1],N=(0,o.useState)({}),I=N[0],C=N[1],z=(0,o.useState)(re),H=z[0],te=z[1],oe=(0,o.useState)([]),ce=oe[0],ue=oe[1],le=(0,o.useState)(ae),se=le[0],fe=le[1],pe=(0,o.useState)(ie),de=pe[0],me=pe[1],ve=(0,o.useState)(""),be=ve[0],ye=ve[1],he=(0,o.useState)(!1),ge=he[0],_e=he[1],xe=(0,o.useState)(U.BF),Se=xe[0],we=xe[1],Oe=(0,o.useState)(""),je=Oe[0],Ee=Oe[1],ke=(0,o.useState)(!1),Pe=(ke[0],ke[1]),Ze=(0,o.useRef)(!1),Re=(0,c.I0)();(0,o.useEffect)((function(){return Ze.current=!0,function(){Ze.current=!1}}),[]),(0,o.useEffect)((function(){Re((0,W.Km)([])),Re((0,P.s_)())}),[Re]),(0,o.useEffect)((function(){ye((function(e){return g||v||f||S}))}),[g,v,f,S]),(0,o.useEffect)((function(){Pe((function(e){return _||b||p}))}),[_,b,p]),(0,o.useEffect)((function(){w===k.G.FULLFILLED&&null!==O&&Ze.current&&we((function(e){return $({},e,{msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:O.id})}))}),[w,O]),(0,o.useEffect)((function(){if(e.municipalities.length>0&&!r){var n={};R(e.municipalities.reduce((function(e,t){return-1===e.findIndex((function(e){return e.label===t.province}))?(e=ee(e).concat([{id:e.length,label:t.province}]),n[t.province]=[{id:0,label:t.name}]):n[t.province].push({id:n[t.province].length,label:t.name}),e}),[])),C(n)}}),[e.municipalities,r]),(0,o.useEffect)((function(){if(_===k.G.FULLFILLED&&null!==H.sel_municipality){if(0===Object.values(h).length)return void ye("Weather data is currently not available.");var e=Object.values(h).find((function(e){return e.municipality===H.sel_municipality.label}));if(!e)return void ye("10-Day weather data is not available for the municipality.");var n=JSON.parse(e.data).find((function(e){return e.day_format===(0,Y.aV)(!1)}));if(!n)return void ye("Weather data for the current date is not available at the moment.");Ee((function(n){var t;return(0,K.smsWriter)({type:K.SMS_TYPE.TENDAY,replacements:(t={},q(t,K.REPLACE_KEYS.TENDAY.MUNICIPALITY,H.sel_municipality.label),q(t,K.REPLACE_KEYS.TENDAY.FORECAST,JSON.parse(e.data).reduce((function(e,n){return e+="".concat(n.day_format," - ").concat(n.rainfall,"\n")}),"")),t)})}));var t=new Date(1e3*n.date_start.seconds),r=(0,Y.Mn)(t),i=Object.values(V.MW).find((function(e){return e.tenday===n.rainfall}));fe((function(e){return $({},e,{province:n.province,municipality:n.municipality,rainfall:n.rainfall,date_range:n.date_range,day_format:n.day_format,condition:i.label||"",condition_acap:i.label_acap,format:i.sync,format_tenday:i.tenday,percentage:i.content,months:r})}))}}),[_,h,H.sel_municipality]);var Ne=(0,o.useCallback)((function(e){switch(se.condition){case V.MW.BELOW_NORMAL.label:case V.MW.NEAR_NORMAL.label:return JSON.parse(e.normal).map((function(e){return{id:t.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return t.subs.find((function(n){return n.id===e})).description}))}}));case V.MW.ABOVE_NORMAL.label:return JSON.parse(e.wetter).map((function(e){return{id:t.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return t.subs.find((function(n){return n.id===e})).description}))}}));case V.MW.WAY_BELOW_NORMAL.label:return JSON.parse(e.drier).map((function(e){return{id:t.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return t.subs.find((function(n){return n.id===e})).description}))}}))}}),[se,t]),Ie=(0,o.useCallback)((function(e){var n="".concat(se.condition_acap,"_sms");return void 0!==e[n]?t.sms.find((function(t){return t.id===e[n]})).description:""}),[se,t]);(0,o.useEffect)((function(){if(p===k.G.FULLFILLED&&b===k.G.FULLFILLED&&null!==H.sel_municipality&&!H.processed&&""!==se.rainfall){var e=Object.values(m).map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n}));(e.includes("Rainfed Rice")||e.includes("Irrigated Rice"))&&e.push("Rice");var n=Object.keys(se.months),t=[],r=[];Object.values(s).filter((function(i){var a=[];return n.forEach((function(n){if(""!==i[n]){var o=se.months[n],c=i[n].split(","),u=[];if(0===c.length)return;if(!e.includes(i.crop))return;if(o.includes(V.Vs.FIRST_HALF)){if(""===c[0])return;u.includes(c[0])||u.push(c[0])}if(o.includes(V.Vs.SECOND_HALF)){var l="";1===c.length&&(l=c[0]),2===c.length&&(l=""!==c[1]?c[1]:c[0]),u.includes(l)||u.push(l)}if(0===u.length)return;u.forEach((function(e){t.includes(e)||t.push(e)})),r.includes(i.crop)||r.push(i.crop)}a.push(""!==i[n])})),a.includes(!0)}));var i=t.map((function(e){return V.MZ[e.toUpperCase()]})),a=Object.values(m).filter((function(e){return r.includes("Rice")&&["Irrigated Rice","Rainfed Rice"].includes(e.crop)?e.province===H.sel_province.label&&e.municipality===H.sel_municipality.label&&i.includes(e.stage):e.province===H.sel_province.label&&e.municipality===H.sel_municipality.label&&i.includes(e.stage)&&r.includes(e.crop)})).map((function(e){return e.activity})).filter((function(e,n,t){return t.indexOf(e)===n})).toString().split(",").join(", ");te((function(e){return $({},e,{processed:!0,sel_month:se.date_range,sel_crop:r.length>0?r.toString().split(",").join(", "):"-",sel_stage:t.length>0?t.map((function(e){return V.MZ[e.toUpperCase()]})).toString().split(",").join(", "):"-",sel_activity:a.length>0?a:"-",sel_condition:{label:se.condition,format:se.format,tenday:se.format_tenday,current_date:se.day_format}})}))}}),[p,b,s,m,se,H,Ne,Ie,Re]);var Le=function(){var e=X(i().mark((function e(n,t){var r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.from,a=t.label,n&&n.preventDefault(),me(ie),!a){e.next=20;break}e.t0=r,e.next="province"===e.t0?7:"municipality"===e.t0?13:17;break;case 7:return te($({},re,{sel_province:t})),ye(""),ue(I[a]),Re((0,F.R)(a)),Re((0,W.Km)([])),e.abrupt("break",18);case 13:ye(""),te($({},H,{sel_municipality:t,processed:!1,sel_crop:"-",sel_stage:"-",sel_activity:"-",sel_month:"-",error:""}));try{Re((0,M.a)({province:H.sel_province.label,municipality:a})),Re((0,B.A)({province:H.sel_province.label,municipality:a})),Re((0,W.Km)([]))}catch(i){te((function(e){return $({},e,{loading:!1,error:i.message})}))}return e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:e.next=29;break;case 20:e.t1=r,e.next="province"===e.t1?23:"municipality"===e.t1?25:28;break;case 23:return Ce(),e.abrupt("break",29);case 25:return te($({},H,{sel_municipality:null,processed:!1,sel_crop:"-",sel_stage:"-",sel_activity:"-",sel_month:"-"})),Re((0,W.Km)([])),e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ae=function(){var e=X(i().mark((function e(){var n,t,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===de.url){e.next=3;break}return _e(!0),e.abrupt("return");case 3:return te((function(e){return $({},e,{loading:!0,error:"",success:""})})),e.prev=4,n={region:"bicol",province:H.sel_province.label,municipality:H.sel_municipality.label,date:se.date_now,operation:"preview"},_e(!0),te((function(e){return $({},e,{loading:!0,error:""})})),e.next=10,(0,G.bM)(n);case 10:t=e.sent,r=new Blob([t],{type:"application/pdf"}),(a={}).href=URL.createObjectURL(r),a.download="".concat(H.sel_province.label,"_").concat(H.sel_municipality.label,".pdf"),me((function(e){return $({},e,{url:a.href,filename:a.download})})),te((function(e){return $({},e,{loading:!1,success:"Bulletin preview created."})})),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(4),o="",void 0!==e.t0.response&&(o=void 0!==e.t0.response.data&&"[object Blob]"===ne(e.t0.response.data)?e.t0.response.data:""),""===o&&(o=e.t0.message),te((function(e){return $({},e,{loading:!1,error:o})}));case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){te(re),ue([]),Re((0,W.Km)([]))},De=function(){var n=X(i().mark((function n(){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:we($({},Se,{loading:!0,msg:"Saving report..."}));try{t={region:"bicol",province:H.sel_province.label,municipality:H.sel_municipality.label,date:se.date_now,operation:"create"},Re((0,D.a0)(t)).unwrap().then((function(){j!==U.Ry.TEN_DAY&&(Re((0,J.uq)(U.Ry.TEN_DAY)),Re((0,D.RC)({uid:e.user.uid,type:U.Ry.TEN_DAY})))})).catch((function(e){Ze.current&&we((function(n){return $({},n,{msg:e,loading:!1,savesuccess:!1,docId:null})}))}))}catch(i){r="",void 0!==i.response&&(r=void 0!==i.response.data&&"[object Blob]"===ne(i.response.data)?i.response.data:""),""===r&&(r=i.message),te((function(e){return $({},e,{loading:!1,error:r})}))}case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,a.jsx)(A.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:V.DW.ADMIN,children:(0,a.jsx)(L,{sel_options:H,provinces:Z,loading:r||_===k.G.PENDING||b===k.G.PENDING||p===k.G.PENDING,optsmunicipalities:ce,onSelectItemChange:Le,handlePreview:Ae,toggleViewerOpen:function(){_e((function(e){return!e}))},pdfPreview:de,resetSelections:Ce,generateRecommendations:function(){var e=H.sel_crop.split(", "),n=H.sel_stage.split(", "),t=Object.values(m).filter((function(t){return e.includes("Rice")&&["Irrigated Rice","Rainfed Rice"].includes(t.crop)?t.province===H.sel_province.label&&t.municipality===H.sel_municipality.label&&n.includes(t.stage):t.province===H.sel_province.label&&t.municipality===H.sel_municipality.label&&n.includes(t.stage)&&e.includes(t.crop)}));Re((0,W.Km)(t.map((function(e){return $({},e,{recommendations:Ne(e),smsRecommendations:Ie(e)})}))))},handleSave:De,togglePrompt:function(){we((function(e){return $({},U.BF,{isOpen:!e.isOpen})}))},error:be,open:ge,message:Se,smstext:je})})}))},7682:function(e,n,t){"use strict";t.d(n,{ky:function(){return p},Kx:function(){return d},m$:function(){return m},tl:function(){return v}});var r=t(4051),i=t.n(r),a=t(7294),o=t(5321),c=t(5152);function u(e,n,t,r,i,a,o){try{var c=e[a](o),u=c.value}catch(l){return void t(l)}c.done?n(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){u(a,r,i,o,c,"next",e)}function c(e){u(a,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}function p(e,n){var t=(0,a.useState)(null),r=t[0],u=t[1],s=(0,a.useState)(!0),f=s[0],p=s[1],d=(0,a.useState)(""),m=d[0],v=d[1],b=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var t=function(){var t=l(i().mark((function t(){var r,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,o.JU)(c.db,e,n),t.next=4,(0,o.QT)(r);case 4:(a=t.sent).exists()&&b.current&&(u(a.data()),p(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),v(t.t0.message),p(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return b.current=!1}}),[e,n]),[r,f,m]}function d(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(0,a.useState)([]),u=r[0],s=r[1],p=(0,a.useState)(!0),d=p[0],m=p[1],v=(0,a.useState)(""),b=v[0],y=v[1],h=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var r=function(){var r=l(i().mark((function r(){var a,u,l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=(0,o.hJ)(c.db,e),u=t||(0,o.IO)(a,(0,o.Xo)(n,"asc")),r.next=5,(0,o.PL)(u);case 5:l=r.sent,h.current&&(s(l.docs.map((function(e){return f({},e.data())}))),m(!1)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),y(r.t0.message),m(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){return h.current=!1}}),[e,n,t]),{documents:u,loading:d,error:b}}function m(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=(0,a.useState)([]),s=u[0],p=u[1],d=(0,a.useState)(!0),m=d[0],v=d[1],b=(0,a.useState)(""),y=b[0],h=b[1],g=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var a=function(){var a=l(i().mark((function a(){var u,l;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,u=(0,o.IO)((0,o.hJ)(c.db,e,n,t),(0,o.Xo)(r)),i.next=4,(0,o.PL)(u);case 4:l=i.sent,g.current&&(p(l.docs.map((function(e){return f({},e.data())}))),v(!1)),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),h(i.t0.message),v(!1);case 12:case"end":return i.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){return g.current=!1}}),[e,n,t,r]),{documents:s,loading:m,error:y}}function v(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4?arguments[4]:void 0,s=(0,a.useState)([]),p=s[0],d=s[1],m=(0,a.useState)(!0),v=m[0],b=m[1],y=(0,a.useState)(""),h=y[0],g=y[1],_=(0,a.useRef)(!0);return(0,a.useEffect)((function(){var a=function(){var a=l(i().mark((function a(){var l,s;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,l=(0,o.hJ)(c.db,e,n,t),""!==r&&(l=(0,o.IO)(l,(0,o.Xo)(r))),u&&(l=(0,o.IO)(l,(0,o.b9)(u))),i.next=6,(0,o.PL)(l);case 6:s=i.sent,_.current&&(d(s.docs.map((function(e){return f({},e.data())}))),b(!1)),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(0),g(i.t0.message),b(!1);case 14:case"end":return i.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){return _.current=!1}}),[e,n,t,r,u]),{documents:p,loading:v,error:h}}}},function(e){e.O(0,[6284,2866,9964,4609,1903,7823,6295,4039,2882,7092,6572,1050,8041,6249,9774,2888,179],(function(){return n=7947,e(e.s=n);var n}));var n=e.O();_N_E=n}]);