(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5507],{6863:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(3366),i=t(7462),o=t(7294),a=t(6010),l=t(7192),c=t(1796),s=t(8216),u=t(1496),d=t(3616),p=t(8979);function f(e){return(0,p.Z)("MuiButtonGroup",e)}var b=(0,t(6087).Z)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),m=t(8363),g=t(5893);const h=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],v=(0,u.ZP)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[{[`& .${b.grouped}`]:n.grouped},{[`& .${b.grouped}`]:n[`grouped${(0,s.Z)(t.orientation)}`]},{[`& .${b.grouped}`]:n[`grouped${(0,s.Z)(t.variant)}`]},{[`& .${b.grouped}`]:n[`grouped${(0,s.Z)(t.variant)}${(0,s.Z)(t.orientation)}`]},{[`& .${b.grouped}`]:n[`grouped${(0,s.Z)(t.variant)}${(0,s.Z)(t.color)}`]},n.root,n[t.variant],!0===t.disableElevation&&n.disableElevation,t.fullWidth&&n.fullWidth,"vertical"===t.orientation&&n.vertical]}})((({theme:e,ownerState:n})=>(0,i.Z)({display:"inline-flex",borderRadius:e.shape.borderRadius},"contained"===n.variant&&{boxShadow:e.shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},{[`& .${b.grouped}`]:(0,i.Z)({minWidth:40,"&:not(:first-of-type)":(0,i.Z)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1}),"&:not(:last-of-type)":(0,i.Z)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:"1px solid "+("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"inherit"!==n.color&&{borderColor:(0,c.Fq)(e.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&{borderRight:`1px solid ${e.palette.grey[400]}`,[`&.${b.disabled}`]:{borderRight:`1px solid ${e.palette.action.disabled}`}},"contained"===n.variant&&"vertical"===n.orientation&&{borderBottom:`1px solid ${e.palette.grey[400]}`,[`&.${b.disabled}`]:{borderBottom:`1px solid ${e.palette.action.disabled}`}},"contained"===n.variant&&"inherit"!==n.color&&{borderColor:e.palette[n.color].dark},{"&:hover":(0,i.Z)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":(0,i.Z)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"})})));var x=o.forwardRef((function(e,n){const t=(0,d.Z)({props:e,name:"MuiButtonGroup"}),{children:c,className:u,color:p="primary",component:b="div",disabled:x=!1,disableElevation:y=!1,disableFocusRipple:j=!1,disableRipple:_=!1,fullWidth:w=!1,orientation:O="horizontal",size:Z="medium",variant:S="outlined"}=t,R=(0,r.Z)(t,h),E=(0,i.Z)({},t,{color:p,component:b,disabled:x,disableElevation:y,disableFocusRipple:j,disableRipple:_,fullWidth:w,orientation:O,size:Z,variant:S}),C=(e=>{const{classes:n,color:t,disabled:r,disableElevation:i,fullWidth:o,orientation:a,variant:c}=e,u={root:["root",c,"vertical"===a&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${(0,s.Z)(a)}`,`grouped${(0,s.Z)(c)}`,`grouped${(0,s.Z)(c)}${(0,s.Z)(a)}`,`grouped${(0,s.Z)(c)}${(0,s.Z)(t)}`,r&&"disabled"]};return(0,l.Z)(u,f,n)})(E),k=o.useMemo((()=>({className:C.grouped,color:p,disabled:x,disableElevation:y,disableFocusRipple:j,disableRipple:_,fullWidth:w,size:Z,variant:S})),[p,x,y,j,_,w,Z,S,C.grouped]);return(0,g.jsx)(v,(0,i.Z)({as:b,role:"group",className:(0,a.Z)(C.root,u),ref:n,ownerState:E},R,{children:(0,g.jsx)(m.Z.Provider,{value:k,children:c})}))}))},7947:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/tenday/create",function(){return t(1130)}])},9758:function(e,n,t){"use strict";var r=t(5893),i=t(5113);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,r.jsx)(i.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({},e,{elevation:15}))}},1130:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return ne},default:function(){return te}});var r=t(4051),i=t.n(r),o=t(5893),a=t(7294),l=t(9473),c=t(7682),s=t(5675),u=t(6295),d=t(1057),p=t(6863),f=t(7357),b=t(6886),m=t(1903),g=t(5861),h=t(9758),v=t(120),x=t(1664),y=t(8456),j=t(7720),_=t(44),w=t(8409),O=t(7426),Z=t(901),S={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}}};function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}function C(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var k=function(e){var n=function(e){var n=e.children,t=e.value,r=e.index,i=C(e,["children","value","index"]);return(0,o.jsx)("div",E({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},i,{children:t===r&&(0,o.jsx)(f.Z,{sx:{p:3},children:n})}))},t=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},r=e.options,i=e.handleSave,c=e.handlePreview,s=(0,l.v9)((function(e){return e.recommendations})),u=s.status,m=s.filtered_recommendations,h=(0,l.v9)((function(e){return e.cropcalendar.status})),v=(0,l.v9)((function(e){return e.tendayweather.status})),k=(0,a.useState)({}),P=k[0],F=k[1],L=(0,a.useState)([]),D=L[0],N=L[1],A=(0,a.useState)(0),W=A[0],T=A[1];return(0,a.useEffect)((function(){m.length>0&&(F(m.reduce((function(e,n){return void 0===e?e=R({},n.crop,[n]):void 0===e[n.crop]?e[n.crop]=[n]:e[n.crop].push(n),e}),{})),N(m.map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n}))))}),[m]),(0,o.jsxs)(b.ZP,{container:!0,sx:S.container,gap:3,style:{marginTop:"24px"},children:[(0,o.jsxs)(b.ZP,{item:!0,sx:S.item,xs:12,lg:12,children:[(0,o.jsxs)(f.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsx)(g.Z,{variant:"h6",children:"Crop Recommendations"}),(0,o.jsx)(y.Z,{size:24,color:"primary",sx:{display:u===Z.G.PENDING||h===Z.G.PENDING||v===Z.G.PENDING?"block":"none"}})]}),m.length>0&&(0,o.jsxs)(f.Z,{children:[(0,o.jsxs)(f.Z,{sx:{display:{md:"block",lg:"flex"}},children:[(0,o.jsx)(g.Z,{variant:"h5",sx:{display:0===r.sel_activity.length?"none":"block",flexGrow:{xs:12,sm:3}},children:"10-Day Farm Weather Outlook and Advisory"}),(0,o.jsx)(f.Z,{sx:{flexGrow:{xs:12,sm:1}},children:null!==r.sel_month&&(0,o.jsxs)(f.Z,{sx:S.conditionLegend,style:{color:[O.MW.ABOVE_NORMAL.label,O.MW.WAY_BELOW_NORMAL.label].includes(r.sel_condition.label)?"#fff":"#000",backgroundColor:O.tN[r.sel_condition.label]},children:[(0,o.jsx)(g.Z,{variant:"subtitle2",children:"10-Day Weather Outlook for Today"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:r.sel_condition.current_date})," \xa0",(0,o.jsxs)("span",{children:[r.sel_condition.format," ","(",r.sel_condition.tenday,")"]})]})]})})]}),(0,o.jsxs)(f.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"}},children:[(0,o.jsx)(f.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,o.jsxs)(w.Z,{value:W,onChange:function(e,n){T(n)},"aria-label":"basic tabs example",children:[(0,o.jsx)(_.Z,E({label:"PDF FORM"},t(0))),(0,o.jsx)(_.Z,E({label:"SMS FORM"},t(1)))]})}),(0,o.jsx)(n,{value:W,index:0,children:D.map((function(e,n){return(0,o.jsxs)(f.Z,{sx:S.recSeasonal,children:[(0,o.jsx)(g.Z,{variant:"h5",children:e}),P[e].map((function(e,n){return(0,o.jsxs)(f.Z,{sx:S.recSeasonal,children:[(0,o.jsxs)(g.Z,{variant:"h6",children:[e.stage," - ",e.activity]}),e.recommendations.map((function(e,t){return e.ul?(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:e.id}),e.subs.length>0&&(0,o.jsx)("ul",{children:e.subs.map((function(e,t){return(0,o.jsx)("li",{children:e},"sub-".concat(n,"-").concat(t))}))})]},"main-".concat(n,"-").concat(t)):(0,o.jsx)("p",{children:e.id},"main-".concat(n,"-").concat(t))}))]},"rec-".concat(n))})),n<D.length-1&&(0,o.jsx)(j.Z,{sx:{margin:"48px 0 48px 0"}})]},"rec-".concat(n))}))}),(0,o.jsx)(n,{value:W,index:1,children:m.reduce((function(e,n){return e+=n.smsRecommendations+" "}),"")})]})]})]}),(0,o.jsxs)(f.Z,{sx:{marginBottom:"16px",width:"100%",display:m.length>0?"block":"none"},children:[(0,o.jsx)("br",{}),(0,o.jsx)(j.Z,{}),(0,o.jsx)("br",{}),""!==r.error&&(0,o.jsxs)(g.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",r.error]}),(0,o.jsxs)(p.Z,{size:"large","aria-label":"large button group",sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,o.jsx)(x.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,o.jsx)(d.Z,{disabled:r.loading,children:"Cancel"})}),(0,o.jsxs)(d.Z,{disabled:r.loading,onClick:c,children:[(0,o.jsx)("span",{style:{display:r.loading?"none":"block"},children:"Preview"})," ","\xa0",(0,o.jsx)(y.Z,{size:20,color:"secondary",sx:{display:r.loading?"block":"none"}})]}),(0,o.jsx)(d.Z,{variant:"contained",onClick:i,disableElevation:!0,disabled:r.loading,children:"Save"})]})]})]})},P={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}}};function F(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){F(e,n,t[n])}))}return e}var D=[{key:"sel_province",label:"Province"},{key:"sel_municipality",label:"Municipality"},{key:"sel_crop",label:"Crop"},{key:"sel_month",label:"Date"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}];var N=function(e){var n=e.sel_options,t=e.provinces,r=e.optsmunicipalities,i=e.loading,a=e.onSelectItemChange,l=e.handlePreview,c=e.toggleViewerOpen,x=e.pdfPreview,y=e.resetSelections,j=e.generateRecommendations,_=function(){var e="Loading...";return t.length>0&&(e=null===n.sel_province?"Select a province":"Province"),e};return(0,o.jsxs)("div",{children:[(0,o.jsxs)(b.ZP,{container:!0,sx:P.container,children:[(0,o.jsxs)(f.Z,{sx:{marginBottom:"32px"},children:[(0,o.jsx)(g.Z,{variant:"h5",children:"10-Day Farm Weather Outlook and Advisory Bulletin"}),(0,o.jsxs)("p",{children:["Create ",(0,o.jsx)("strong",{children:"10-Day Farm Weather Outlook and Advisory"})," crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download."]})]}),(0,o.jsxs)(b.ZP,{item:!0,sx:P.item,xs:12,lg:4,children:[(0,o.jsx)(g.Z,{variant:"h6",children:"Selection Options"}),(0,o.jsx)(u.Z,{disablePortal:!0,id:"province",value:n.sel_province,disabled:0===t.length||i,options:t,sx:P.autocomplete,size:"small",PaperComponent:h.Z,renderInput:function(e){return(0,o.jsx)(m.Z,L({},e,{label:_()}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return a(e,L({},n,{from:"province"}))}}),(0,o.jsx)(u.Z,{disablePortal:!0,id:"municipality",value:n.sel_municipality,disabled:0===r.length||i,options:r,sx:P.autocomplete,size:"small",PaperComponent:h.Z,renderInput:function(e){return(0,o.jsx)(m.Z,L({},e,{label:null===n.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){return a(e,L({},n,{from:"municipality"}))}}),(0,o.jsxs)(p.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:i||0===t.length||null===n.sel_municipality||"-"===n.sel_crop,sx:{marginTop:"16px",float:"right"},children:[(0,o.jsx)(d.Z,{variant:"outlined",onClick:y,children:"Reset"}),(0,o.jsx)(d.Z,{variant:"contained",onClick:j,children:"Submit"})]})]}),(0,o.jsx)(b.ZP,{item:!0,sx:P.item,xs:12,lg:8,children:(0,o.jsxs)(f.Z,{sx:P.selectionSummary,children:[(0,o.jsx)(g.Z,{variant:"h6",children:"Selection Summary"}),null===n.sel_province?(0,o.jsxs)(f.Z,{sx:P.welcome,children:[(0,o.jsx)(s.default,{unoptimized:!0,src:(0,v.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:v.imageLoader,alt:"Empty data"}),(0,o.jsxs)(f.Z,{sx:{marginTop:"16px"},children:[(0,o.jsx)(g.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,o.jsx)(g.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,o.jsx)(f.Z,{sx:P.summary,children:D.map((function(e,t){return(0,o.jsxs)("div",{children:[(0,o.jsxs)(g.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[e.label,": \xa0"]}),(0,o.jsx)(g.Z,{variant:"body2",style:{display:"inline-block"},children:null!==n[e.key]?["sel_stage","sel_crop","sel_activity","sel_month"].includes(e.key)?n[e.key]:n[e.key].label:""})]},"selected-".concat(t))}))})]})})]}),(0,o.jsx)(k,{options:n,handlePreview:l,toggleViewerOpen:c,pdfPreview:x})]})},A=t(2530),W=t(3059),T=t(4680),M=t(6375),I=t(7599),z=t(6867),B=t(7246);function $(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function G(e,n,t,r,i,o,a){try{var l=e[o](a),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,i)}function V(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){G(o,r,i,a,l,"next",e)}function l(e){G(o,r,i,a,l,"throw",e)}a(void 0)}))}}function H(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){H(e,n,t[n])}))}return e}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){l=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||Y(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,n){if(e){if("string"===typeof e)return $(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$(e,n):void 0}}var q={sel_province:null,sel_municipality:null,sel_crop:"-",sel_stage:"-",sel_activity:"-",sel_month:"-",processed:!1,loading:!1,error:"",success:"",sel_condition:{id:0,from:"weather_condition",label:O.MW.WAY_BELOW_NORMAL.label}},X={url:"",filename:""},Q={preview:!1,savesuccess:!1,docId:""},ee={province:"",municipality:"",rainfall:"",date_range:"",day_format:"",date_now:(new Date).toDateString()};var ne=!0,te=(0,W.Z)((function(e){var n=U((0,c.ky)(T.o.STATIC_RECOMMENDATIONS,"data"),2),t=n[0],r=n[1],s=(0,l.v9)((function(e){return e.cropcalendar})),u=s.entities,d=s.status,p=(0,l.v9)((function(e){return e.recommendations})),f=p.entities,b=p.status,m=(0,l.v9)((function(e){return e.tendayweather})),g=m.entities,h=m.status,v=(0,a.useState)([]),x=v[0],y=v[1],j=(0,a.useState)({}),_=j[0],w=j[1],S=(0,a.useState)(q),R=S[0],E=S[1],C=(0,a.useState)([]),k=C[0],P=C[1],F=(0,a.useState)(ee),L=F[0],D=F[1],W=(0,a.useState)(X),$=W[0],G=(W[1],(0,a.useState)(Q)),Y=(G[0],G[1]),ne=(0,l.I0)();(0,a.useEffect)((function(){ne((0,B.Km)([]))}),[ne]),(0,a.useEffect)((function(){if(e.municipalities.length>0&&!r){var n={};y(e.municipalities.reduce((function(e,t){return-1===e.findIndex((function(e){return e.label===t.province}))?(e=J(e).concat([{id:e.length,label:t.province}]),n[t.province]=[{id:0,label:t.name}]):n[t.province].push({id:n[t.province].length,label:t.name}),e}),[])),w(n)}}),[e.municipalities,r]),(0,a.useEffect)((function(){if(h===Z.G.FULLFILLED&&null!==R.sel_municipality){if(0===Object.values(g).length)return;var e=Object.values(g).find((function(e){return e.municipality===R.sel_municipality.label})),n=JSON.parse(e.data).find((function(e){return e.day_format===function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=(new Date).toDateString();return e?n:n.substring(0,n.length-5)}(!1)})),t=new Date(1e3*n.date_start.seconds),r=oe(t),i=Object.values(O.MW).find((function(e){return e.tenday===n.rainfall}));D((function(e){return K({},e,{province:n.province,municipality:n.municipality,rainfall:n.rainfall,date_range:n.date_range,day_format:n.day_format,condition:i.label||"",condition_acap:i.label_acap,format:i.sync,format_tenday:i.tenday,percentage:i.content,months:r})}))}}),[h,g,R.sel_municipality]);var te=(0,a.useCallback)((function(e){switch(L.condition){case O.MW.BELOW_NORMAL.label:case O.MW.NEAR_NORMAL.label:return JSON.parse(e.normal).map((function(e){return{id:t.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return t.subs.find((function(n){return n.id===e})).description}))}}));case O.MW.ABOVE_NORMAL.label:return JSON.parse(e.wetter).map((function(e){return{id:t.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return t.subs.find((function(n){return n.id===e})).description}))}}));case O.MW.WAY_BELOW_NORMAL.label:return JSON.parse(e.drier).map((function(e){return{id:t.mains.find((function(n){return n.id===e.id})).description,ul:e.ul,subs:e.subs.map((function(e){return t.subs.find((function(n){return n.id===e})).description}))}}))}}),[L,t]),re=(0,a.useCallback)((function(e){var n="".concat(L.condition_acap,"_sms");return void 0!==e[n]?t.sms.find((function(t){return t.id===e[n]})).description:""}),[L,t]);(0,a.useEffect)((function(){if(d===Z.G.FULLFILLED&&b===Z.G.FULLFILLED&&null!==R.sel_municipality&&!R.processed){var e=Object.values(f).map((function(e){return e.crop})).filter((function(e,n,t){return t.indexOf(e)===n}));(e.includes("Rainfed Rice")||e.includes("Irrigated Rice"))&&e.push("Rice");var n=Object.keys(L.months),t=[],r=[];Object.values(u).filter((function(i){var o=[];return n.forEach((function(n){if(""!==i[n]){var a=L.months[n],l=i[n].split(",");if(0===l.length)return;if(!e.includes(i.crop))return;if(a===O.Vs.FIRST_HALF)t.includes(l[0])||t.push(l[0]);else if(a===O.Vs.SECOND_HALF){var c="";1===l.length&&(c=l[0]),2===l.length&&(c=""!==l[1]?l[1]:l[0]),t.includes(c)||t.push(c)}r.includes(i.crop)||r.push(i.crop)}o.push(""!==i[n])})),o.includes(!0)}));var i=t.map((function(e){return O.MZ[e.toUpperCase()]})),o=Object.values(f).filter((function(e){return r.includes("Rice")&&["Irrigated Rice","Rainfed Rice"].includes(e.crop)?e.province===R.sel_province.label&&e.municipality===R.sel_municipality.label&&i.includes(e.stage):e.province===R.sel_province.label&&e.municipality===R.sel_municipality.label&&i.includes(e.stage)&&r.includes(e.crop)})).map((function(e){return e.activity})).filter((function(e,n,t){return t.indexOf(e)===n})).toString().split(",").join(", ");E((function(e){return K({},e,{processed:!0,sel_month:L.date_range,sel_crop:r.length>0?r.toString().split(",").join(", "):"-",sel_stage:t.length>0?t.map((function(e){return O.MZ[e.toUpperCase()]})).toString().split(",").join(", "):"-",sel_activity:o.length>0?o:"-",sel_condition:{label:L.condition,format:L.format,tenday:L.format_tenday,current_date:L.day_format}})}))}}),[d,b,u,f,L,R,te,re,ne]);var ie=function(){var e=V(i().mark((function e(n,t){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.from,o=t.label,n&&n.preventDefault(),!o){e.next=17;break}e.t0=r,e.next="province"===e.t0?6:"municipality"===e.t0?11:14;break;case 6:return E(K({},q,{sel_province:t})),P(_[o]),ne((0,z.R)(o)),ne((0,B.Km)([])),e.abrupt("break",15);case 11:E(K({},R,{sel_municipality:t,processed:!1,sel_crop:"-",sel_stage:"-",sel_activity:"-",sel_month:"-"}));try{ne((0,M.a)({province:R.sel_province.label,municipality:o})),ne((0,I.A)({province:R.sel_province.label,municipality:o})),ne((0,B.Km)([]))}catch(i){E((function(e){return K({},e,{loading:!1,error:i.message})}))}return e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:e.next=26;break;case 17:e.t1=r,e.next="province"===e.t1?20:"municipality"===e.t1?22:25;break;case 20:return le(),e.abrupt("break",26);case 22:return E(K({},R,{sel_municipality:null,processed:!1,sel_crop:"-",sel_stage:"-",sel_activity:"-",sel_month:"-"})),ne((0,B.Km)([])),e.abrupt("break",26);case 25:return e.abrupt("break",26);case 26:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),oe=function(e){var n=e.getMonth(),t=Object.values(O.re).find((function(e){return e.num===n})).code,r=e.getDate(),i=function(e,n){return new Date(e,n+1,0).getDate()}(e.getFullYear(),n),o=H({},t,r>Math.floor(i/2)?O.Vs.SECOND_HALF:O.Vs.FIRST_HALF);r+10>i&&(o[Object.values(O.re).find((function(e){return e.num===n+1})).code]=O.Vs.FIRST_HALF);return o},ae=function(){var e=V(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){E(q),P([]),ne((0,B.Km)([]))};return(0,o.jsx)(A.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:O.DW.ADMIN,children:(0,o.jsx)(N,{sel_options:R,provinces:x,loading:r||h===Z.G.PENDING||b===Z.G.PENDING||d===Z.G.PENDING,optsmunicipalities:k,onSelectItemChange:ie,handlePreview:ae,toggleViewerOpen:function(){Y((function(e){return!e}))},pdfPreview:$,resetSelections:le,generateRecommendations:function(){var e=R.sel_crop.split(", "),n=R.sel_stage.split(", "),t=Object.values(f).filter((function(t){return e.includes("Rice")&&["Irrigated Rice","Rainfed Rice"].includes(t.crop)?t.province===R.sel_province.label&&t.municipality===R.sel_municipality.label&&n.includes(t.stage):t.province===R.sel_province.label&&t.municipality===R.sel_municipality.label&&n.includes(t.stage)&&e.includes(t.crop)}));ne((0,B.Km)(t.map((function(e){return K({},e,{recommendations:te(e),smsRecommendations:re(e)})}))))}})})}))}},function(e){e.O(0,[3135,6572,3728,9774,2888,179],(function(){return n=7947,e(e.s=n);var n}));var n=e.O();_N_E=n}]);