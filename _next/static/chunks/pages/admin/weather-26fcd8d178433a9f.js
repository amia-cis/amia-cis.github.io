(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3359],{1158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/weather",function(){return t(6926)}])},9227:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(5893),a=t(7294),o=t(5697),i=t.n(o),l=t(1057),s=t(9536),c=t(8456),u=t(4666),d=t(1425),f=t(7645),p=t(6580),h=t(3946),m={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(e){return e.palette.grey[500]}}};function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var n=y(a.useState({open:null}),2),t=n[0],o=n[1],i=e.loading,x=void 0!==i&&i,b=e.isOpen,v=void 0!==b&&b,j=e.showButtons,S=void 0===j||j,w=e.maxWidth,O=void 0===w?"sm":w,C=e.IconSVG,P=void 0===C?null:C,A=e.modalExtraHandlerCB,k=void 0===A?null:A,Z=e.modalCancelHandlerCB,_=void 0===Z?null:Z,T=e.modalConfirmHandlerCB,E=void 0===T?null:T,D=e.modalOpenHandlerCB,I=void 0===D?null:D,M=e.isDisabled,B=void 0!==M&&M,R=e.openButtonText,F=void 0===R?"Click":R,L=e.title,U=void 0===L?"Window Title":L,N=e.extraBtnText,W=void 0===N?"":N,z=e.cancelBtnText,H=void 0===z?"Cancel":z,V=e.confirmBtnText,G=void 0===V?"Ok":V,Y=e.contentText,Q=void 0===Y?"":Y,X=e.error,$=void 0===X?"":X,K=e.colorTheme,q=void 0===K?"primary":K;(0,a.useEffect)((function(){o((function(e){return g({},e,{open:v})}))}),[v]);var J=function(){o(g({},t,{open:!1})),_&&_()};return(0,r.jsxs)("div",{children:[F&&(0,r.jsxs)(l.Z,{disabled:B,disableElevation:!0,variant:"contained",color:q,onClick:function(){o(g({},t,{open:!0})),I&&I()},sx:m.button,children:[P&&(0,r.jsx)(P,{sx:m.icon}),F]}),(0,r.jsxs)(u.Z,{maxWidth:O,fullWidth:!0,open:t.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("span",{children:U}),(0,r.jsx)(h.Z,{"aria-label":"close",sx:m.closeButton,onClick:J,disabled:x,children:(0,r.jsx)(s.Z,{})})]}),(0,r.jsxs)(p.Z,{sx:m.dialogContent,children:[""!==Q&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:Q}),(0,r.jsx)("div",{className:"error",children:$})]}),e.children]}),S&&(0,r.jsxs)(d.Z,{sx:m.dialogActions,children:[""!==W&&(0,r.jsx)(l.Z,{onClick:k||J,disabled:x,children:W}),(0,r.jsx)(l.Z,{onClick:_||J,disabled:x,children:H}),(0,r.jsxs)(l.Z,{variant:"contained",disabled:x,onClick:E||J,children:[(0,r.jsx)("span",{style:{display:x?"none":"block"},children:G}),(0,r.jsx)(c.Z,{size:24,color:"secondary",sx:{display:x?"block":"none"}})]})]})]})]})}v.propTypes={loading:i().bool,isOpen:i().bool,showButtons:i().bool,maxWidth:i().string,IconSVG:i().elementType,modalCancelHandlerCB:i().func,modalConfirmHandlerCB:i().func,modalOpenHandlerCB:i().func,modalExtraHandlerCB:i().func,openButtonText:i().string,cancelBtnText:i().string,confirmBtnText:i().string,extraBtnText:i().string,title:i().string,contentText:i().string,children:i().node,error:i().string,isDisabled:i().bool,colorTheme:i().string};var j=v},5688:function(e,n,t){"use strict";var r=t(5893),a=t(7294),o=t(5697),i=t.n(o),l=t(4866),s=t(6901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=a.forwardRef((function(e,n){return(0,r.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,o=e.severity,i=e.closeHandlerCB,s=void 0===i?function(){}:i,c=(0,a.useState)(n),d=c[0],f=c[1];(0,a.useEffect)((function(){f(n)}),[n]);var p=function(){f(!1),s()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:p,children:(0,r.jsx)(u,{onClose:p,severity:o,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:i().bool,message:i().string,severity:i().string},n.Z=d},1338:function(e,n,t){"use strict";t.d(n,{x:function(){return l},P:function(){return s}});var r=t(5893),a=t(7357);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=function(e){var n=e.children,t=e.value,l=e.index,s=i(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({role:"tabpanel",hidden:t!==l,id:"custom-tabpanel-".concat(l),"aria-labelledby":"custom-tab-".concat(l)},s,{children:t===l&&(0,r.jsx)(a.Z,{sx:{p:3},children:n})}))};var s=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},6926:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Vn}});var r=t(5893),a=t(7294),o=t(9473),i=t(4822),l=t(5243),s=t(6383),c=t(7357),u=t(44),d=t(8409),f=t(1338),p=t(9646),h=t(5861),m=t(6399),x=t(4051),b=t.n(x),g=t(512),y=t(9209),v=t(7715),j=t(901),S=t(560),w=t(1057),O=t(6886),C=t(7109),P=t(1903),A=t(265),k=t(5697),Z=t.n(k),_=t(1496);function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var E=(0,_.ZP)((function(e){return(0,r.jsx)(P.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){T(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{width:"100%",fontSize:"12px",marginTop:n.spacing(1),"& .MuiOutlinedInput-root":{paddingRight:0,paddingLeft:0},"& .MuiOutlinedInput-input":{padding:n.spacing(1)}}})),D=E,I=t(9227),M=t(5688),B=t(7346),R=t(2701);function F(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var L=(0,_.ZP)((function(e){return(0,r.jsx)(w.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){F(e,n,t[n])}))}return e}({},e))}))((function(e){return{width:"150px",height:e.theme.spacing(5)}})),U=L,N={container:{marginTop:"16px",width:"100%"},textfield:{fontSize:"14px"},fileInputContainer:{height:"0px",width:"0px",overflow:"hidden"}},W=t(7840);function z(e){var n=e.file,t=e.state,o=e.name,i=e.label,l=void 0===i?"":i,s=e.textContent,u=void 0===s?"":s,d=e.fileAccepts,f=e.isDisabled,p=void 0!==f&&f,m=e.handleUpload,x=e.onUploadClick,b=e.handleResetMessage,g=e.setSelectedFile,y=e.clearFile,v=(0,a.useRef)();return(0,a.useEffect)((function(){null===n&&(v.current.value=null)}),[n]),(0,r.jsxs)(O.ZP,{container:!0,sx:N.container,children:[t.open&&(0,r.jsx)(I.Z,{isOpen:!0,title:"Upload file",contentText:t.modalMsg,loading:t.loading,openButtonText:null,modalCancelHandlerCB:b,modalConfirmHandlerCB:m}),""!==t.msg&&(0,r.jsx)(M.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:b}),(0,r.jsxs)(O.ZP,{item:!0,xs:12,lg:6,sx:N.wrapper,children:[(0,r.jsx)(h.Z,{variant:"subtitle2",children:l}),(0,r.jsx)(W.Z,{children:u}),(0,r.jsx)(D,{size:"small",disabled:!0,value:null!==n?n[0].name:"",sx:{fontSize:"10px"},InputProps:{style:N.textfield,startAdornment:(0,r.jsxs)(U,{variant:"outlined",disableElevation:!0,component:"label",disabled:t.loading||p,sx:{width:"48px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(e){null!==n&&y(e)},children:[null===n?(0,r.jsx)(R.Z,{}):(0,r.jsx)(B.Z,{}),(0,r.jsx)(c.Z,{sx:N.fileInputContainer,children:(0,r.jsx)("input",{type:"file",multiple:!0,ref:v,accept:d||".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:o||"excelfile",onChange:g,style:{border:"1px solid"}})})]}),endAdornment:(0,r.jsx)(U,{size:"small",component:"span",variant:"contained",disableElevation:!0,disabled:null===n||t.loading,sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:x,children:"Upload"})}})]})]})}z.propTypes={file:Z().object,state:Z().object,name:Z().string,label:Z().string,textContent:Z().string,fileAccepts:Z().string,isDisabled:Z().bool,handleUpload:Z().func,onUploadClick:Z().func,handleResetMessage:Z().func,setSelectedFile:Z().func,clearFile:Z().func};var H=z;function V(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function G(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){V(o,r,a,i,l,"next",e)}function l(e){V(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Y(e,n,t[n])}))}return e}var X="success",$="error",K={msg:"",type:"",modalMsg:"Upload selected file?",loading:!1,open:!1};function q(e){var n=e.label,t=e.name,o=void 0===t?"somefile":t,i=e.textContent,l=e.fileAccepts,s=e.isDisabled,c=void 0!==s&&s,u=e.fileUploadMethod,d=e.onFileSelectedCB,f=(0,a.useState)(null),p=f[0],h=f[1],m=(0,a.useState)(K),x=m[0],g=m[1],y=function(){var e=G(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(n.target.files),d&&d(n.target.files);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=G(b().mark((function e(n){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=18;break}return n.preventDefault(),e.prev=2,(t=new FormData).append(o,p[0]),g(Q({},x,{loading:!0,modalMsg:"Uploading file..."})),e.next=8,u(t);case 8:g((function(e){return Q({},K,{msg:"Upload success.",type:X})})),h((function(e){return null})),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),r="",void 0!==e.t0.response&&(r=void 0!==e.t0.response.data?e.t0.response.data:""),""===r&&(r=e.t0.message),g((function(e){return Q({},K,{msg:r,type:$})}));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(H,{file:p,state:x,label:n,name:o,textContent:i,fileAccepts:l,isDisabled:c,handleUpload:v,onUploadClick:function(){return g(Q({},x,{open:!0}))},handleResetMessage:function(){return g(K)},setSelectedFile:y,clearFile:function(e){e.preventDefault(),h((function(e){return null})),g((function(e){return K})),d&&d(null)}})}q.propTypes={name:Z().string,label:Z().string,textContent:Z().string,fileAccepts:Z().string,isDisabled:Z().bool,fileUploadMethod:Z().func,onFileSelectedCB:Z().func};var J=q,ee={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"250px"}},ne=t(1908),te=t(8857),re=t(9269);var ae=function(e){var n=e.state,t=e.file,a=e.isDisabled,o=e.handleInputChange,i=e.handleClearClick,l=e.handleFileUpload,s=e.handleFileSelected;return(0,r.jsxs)(O.ZP,{container:!0,sx:ee.container,children:[(0,r.jsx)(O.ZP,{item:!0,xs:12,children:(0,r.jsx)(J,{label:"Upload an excel file",name:"excelfile",fileAccepts:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",isDisabled:a,fileUploadMethod:l,onFileSelectedCB:s})}),(0,r.jsxs)(O.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Tropical Cyclone Input"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:ee.text,children:["Select PAGASA's shared seasonal weather forecast excel file on the ",(0,r.jsx)("strong",{children:"Upload an excel file"})," selector to unlock the Tropical Cyclone Input items below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Then, enter the number of tropical cyclones for each month with reference to its picture on the 3rd tab ",(0,r.jsx)("br",{})," from the selected PAGASA-shared seasonal weather forecast excel file."]})]}),(0,r.jsx)(O.ZP,{item:!0,xs:12,lg:7,children:n.map((function(e,n){return(0,r.jsx)(P.Z,{id:"month-".concat(n),size:"small",label:e.full,value:e.value,placeholder:"".concat(e.full," no. of cyclones"),sx:ee.rowItem,disabled:a||null===t,onChange:o,InputProps:{startAdornment:(0,r.jsx)(C.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})})}},n)}))}),(0,r.jsx)(O.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(O.ZP,{item:!0,xs:4,sx:{marginTop:"12px"},children:(0,r.jsx)(w.Z,{variant:"text",onClick:i,disableElevation:!0,children:"Clear All"})})]})};function oe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ie(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function le(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){ie(o,r,a,i,l,"next",e)}function l(e){ie(o,r,a,i,l,"throw",e)}i(void 0)}))}}function se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){se(e,n,t[n])}))}return e}function ue(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return oe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oe(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=["1st month","2nd month","3rd month","4th month","5th month","6th month"];var fe=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=(0,a.useState)(null),l=i[0],s=i[1],c=(0,o.I0)(),u=(0,o.v9)((function(e){return e.seasonalweather.status}));(0,a.useEffect)((function(){6===de.length&&t(de.reduce((function(e,n,t){return ue(e).concat([{id:t,full:n,month:n,isValid:!1,value:""}])}),[]))}),[false]);var d=function(){t(n.map((function(e){return ce({},e,{isValid:!1,value:""})})))},f=function(){var e=le(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=le(b().mark((function e(r,a){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.filter((function(e){return!e.isValid})).length>=1)){e.next=4;break}a(new Error("Please check your tropical cyclones list input")),e.next=18;break;case 4:return e.prev=4,e.next=7,(0,g.BZ)(t);case 7:return o=e.sent,e.next=10,(0,g.eg)({type:S.M.SUB_SEASONAL_COMMON,body:{data:n.map((function(e){return{id:e.id,value:e.value}})),region:"bicol",type:S.M.COMMON_SEASONAL_REGIONAL_TYPE.CYCLONES_COUNT}});case 10:c((0,y.Mj)(o.map((function(e){return ce({},e,{date_created:(0,v.NK)(e.date_created)})})))),d(),r(!0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),a(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(ae,{state:n,file:l,isDisabled:u===j.G.PENDING,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",a=e.target,o=a.id,i=a.value,l=o.split("-")[1],s=ue(n);s[l]&&("clear"===r?(s[l].value="",s[l].isValid=!1):(s[l].value=i,i.length>=10?s[l].isValid=!1:s[l].isValid=""!==i),t((function(e){return s})))},handleClearClick:d,handleFileUpload:f,handleFileSelected:function(e){s(e),e||d()}})},pe=t(5677),he=t(6863),me={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"parent","& .MuiOutlinedInput-root":{paddingLeft:function(e){return e.spacing(2)}}},btnCancel:{height:function(e){return e.spacing(5)},width:"40px",borderTopLeftRadius:0,borderBottomLeftRadius:0,"& span":{marginRight:0}},btnGroup:{marginTop:"8px","& button":{width:"110px"},display:{sm:"flex",md:"unset"},flexDirection:{sm:"column"}}},xe=t(3343);var be=function(e){var n=e.state,t=e.message,a=e.log,o=e.isLoading,i=e.handleInputChange,l=e.handleDeleteClick,s=e.handleClearClick,c=e.handleReset,u=e.handleAddClick,d=e.handleSaveClick,f=e.handleCancelSaveClick,p=e.handleResetMsg,m=e.onSaveClick;return(0,r.jsxs)(O.ZP,{container:!0,sx:me.container,children:[t.openLoadingModal&&(0,r.jsx)(I.Z,{isOpen:!0,title:"Save changes",contentText:t.modalMsg,loading:o,openButtonText:null,modalConfirmHandlerCB:m,modalCancelHandlerCB:f}),""!==t.msg&&(0,r.jsx)(M.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:p}),(0,r.jsxs)(O.ZP,{item:!0,xs:12,sx:{marginTop:"24px",marginBottom:"8px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Weather Systems that May Affect the Region"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:me.text,children:["Below is a list of other weather systems that may affect the region. Edit the existing contents or add/delete some items,",(0,r.jsx)("br",{}),"then press the ",(0,r.jsx)("strong",{children:"SAVE"})," button to save your changes. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Press the ",(0,r.jsx)("strong",{children:"RESET"})," button to undo your changes to the last SAVE point. Press the ",(0,r.jsx)("strong",{children:"CLEAR ALL"})," button to remove all items."]}),(0,r.jsx)(W.Z,{children:o?"Loading...":"Updated by ".concat(a.updated_by," on ").concat(a.date_created,".")})]}),(0,r.jsx)(O.ZP,{item:!0,xs:12,lg:6,children:n.map((function(e,n){return(0,r.jsx)(D,{id:"misc-".concat(n),size:"small",label:e.full,value:e.value,placeholder:"Enter a weather system",sx:me.rowItem,disabled:o,onChange:i,InputProps:{startAdornment:(0,r.jsx)(C.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})}),endAdornment:(0,r.jsx)(U,{disableElevation:!0,disabled:o,startIcon:(0,r.jsx)(xe.Z,{fontSize:"small"}),sx:me.btnCancel,onClick:function(){return l(n)}})}},n)}))}),(0,r.jsx)(O.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(O.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,r.jsxs)(he.Z,{variant:"text",disableElevation:!0,size:"small",sx:me.btnGroup,disabled:o,children:[(0,r.jsx)(U,{onClick:s,children:"Clear All"}),(0,r.jsx)(U,{onClick:c,children:"Reset"}),(0,r.jsx)(U,{onClick:u,children:"Add"}),(0,r.jsx)(U,{onClick:d,variant:"contained",children:"Save"})]})})]})};function ge(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ye(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ve(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ye(e,n,t[n])}))}return e}function je(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return ge(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ge(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Se="success",we="error",Oe="info",Ce={msg:"",type:"",modalMsg:"Save changes to the weather systems list?",openLoadingModal:!1};var Pe=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=(0,a.useState)(Ce),l=i[0],s=i[1],c=(0,a.useState)(!1),u=c[0],d=c[1],f=(0,o.I0)(),p=(0,a.useRef)(!1),h=(0,o.v9)((function(e){return e.seasonalcommon_misc})),m=h.ids,x=h.entities,b=h.status,g=h.updated_by,y=h.date_created;(0,a.useEffect)((function(){return p.current=!0,f((0,pe.h)()).unwrap().then((function(){p.current&&d(!0)})),function(){p.current=!1}}),[f]),(0,a.useEffect)((function(){b===j.G.FULLFILLED&&m.length>0&&u&&v()}),[b,m,u,v]);var v=(0,a.useCallback)((function(){p.current&&(s((function(e){return Ce})),t((function(e){return Object.values(x).map((function(e){return ve({},e,{isValid:!0})}))})))}),[x]);return(0,r.jsx)(be,{state:n,message:l,log:{updated_by:g,date_created:y},isLoading:b===j.G.PENDING,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",a=e.target,o=a.id,i=a.value,l=o.split("-")[1],s=je(n);s[l]&&("clear"===r?(s[l].value="",s[l].isValid=!1):(s[l].value=i,i.length>=30?s[l].isValid=!1:s[l].isValid=""!==i),p.current&&t((function(e){return s})))},handleClearClick:function(){return t([])},handleDeleteClick:function(e){p.current&&t((function(t){return n.reduce((function(n,t,r){return r!==e&&(n=je(n).concat([t])),n}),[]).map((function(e,n){return ve({},e,{id:n})}))}))},handleReset:v,handleAddClick:function(){if(25!==n.length&&p.current){var e=je(n);e.push({id:e.length,value:""}),t(e)}},handleSaveClick:function(){return s(ve({},l,{openLoadingModal:!0}))},handleCancelSaveClick:function(){return s(ve({},l,{openLoadingModal:!1}))},handleResetMsg:function(){return s(Ce)},onSaveClick:function(){p.current&&(void 0===n.find((function(e){return""===e.value}))?(s(ve({},l,{modalMsg:"Saving..."})),f((0,pe.O)(n)).unwrap().then((function(){p.current&&s((function(e){return ve({},Ce,{msg:"Successfully saved changes.",type:Se})}))})).catch((function(e){p.current&&s((function(n){return ve({},Ce,{msg:e,type:we})}))}))):s((function(e){return ve({},e,{msg:"Please check your input",type:Oe,openLoadingModal:!1})})))}})},Ae=t(9132);var ke=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:function(e){return e.spacing(1)}},children:(0,r.jsx)(h.Z,{variant:"h6",children:"Seasonal Weather Forecast Updater"})}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{variant:"h7",children:(0,r.jsx)("strong",{children:"Upload an Excel File"})}),(0,r.jsxs)(h.Z,{variant:"body2",sx:Ae.Z.subheader,children:["Update ACAP's seasonal weather forecast rainfall, tropical cyclones, and weather systems affecting the region data by uploading the updated seasonal weather forecast raw data in the excel file provided by PAGASA by clicking the SEARCH button, followed by clicking the UPLOAD button under the ",(0,r.jsx)("strong",{children:"Upload an Excel File"})," option below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"You can use the attached seasonal weather forecast excel file from PAGASA as an example when uploading an excel file. The excel file should follow the format and structure of the attached sample.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://firebasestorage.googleapis.com/v0/b/climate-webservices.appspot.com/o/files%2Fseasonal_forecast_example_v2.xlsx?alt=media&token=4835bc36-3e63-4200-b83b-a00616c14cda",target:"__blank",children:"[example excel file]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{withBorder:!0}),(0,r.jsx)(fe,{}),(0,r.jsx)(Pe,{})]})]})},Ze=t(7682),_e=t(1234),Te=t(7918),Ee=t(8456),De=t(6901);function Ie(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Me=(0,_.ZP)((function(e){return(0,r.jsx)(c.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Ie(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:n.spacing(1),marginBottom:n.spacing(3),"& ul":{listStyle:"none",paddingLeft:n.spacing(3)}}})),Be=Me;var Re=function(e){return(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(4)}},variant:"h6",children:e.title}),(0,r.jsx)(Be,{children:e.children})]})},Fe=t(7426),Le=t(5675),Ue=t(120);var Ne=function(e){var n=e.text,t=e.label,a=e.imagePath;return(0,r.jsx)(c.Z,{sx:{borderRadius:"4px",margin:"4px",padding:"8.5px 14px 8.5px 8.5px",fontSize:"1rem",lineHeight:"1.4375em","& span":{marginLeft:"8px"}},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(Le.default,{unoptimized:!0,src:(0,Ue.assetPrefixer)(a),height:20,width:20,loader:Ue.imageLoader,alt:"moon phase"}),(0,r.jsxs)("span",{children:[t,":"]}),(0,r.jsx)("span",{children:n})]})})},We={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"16px",maxWidth:{xs:"100%",sm:"300px"}},btnGroup:{"& button":{width:"110px"},display:{sm:"flex",md:"unset"},flexDirection:{sm:"column"}}};var ze=function(e){var n=e.state,t=e.message,a=e.log,o=e.isDisabled,i=e.isViewInfo,l=e.handleInputChange,s=e.handleClearClick,u=e.handleSaveClick,d=e.handleCancelSaveClick,f=e.handleSwitchClick,p=e.onSaveClick;return(0,r.jsxs)(O.ZP,{container:!0,sx:We.container,children:[t.openLoadingModal&&(0,r.jsx)(I.Z,{isOpen:!0,title:"Save changes",contentText:t.modalMsg,loading:o,openButtonText:null,modalConfirmHandlerCB:p,modalCancelHandlerCB:d}),""!==t.msg&&(0,r.jsx)(M.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:d}),(0,r.jsxs)(O.ZP,{item:!0,xs:12,sx:{marginTop:"32px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Moon Phases Input"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:We.text,children:["Listed below are the moon phases data for the 10-Day weather outlook PDF moon phases section.",(0,r.jsx)("br",{}),"Click the ",(0,r.jsx)("strong",{children:"EDIT"})," button to start editing it's content."]}),(0,r.jsxs)(W.Z,{children:["Updated by ",a.updated_by," on ",a.date_created,"."]})]}),(0,r.jsxs)(O.ZP,{item:!0,xs:12,lg:7,sx:{marginTop:"8px"},children:[i?n.map((function(e,n){return(0,r.jsx)(Ne,{text:e.value,label:e.label,imagePath:e.image},n)})):n.map((function(e,n){return(0,r.jsx)(P.Z,{id:"month-".concat(n),size:"small",label:e.label,value:e.value,placeholder:"".concat(e.label," date i.e., 29-Jun-22"),sx:We.rowItem,disabled:o,onChange:l,InputProps:{startAdornment:(0,r.jsx)(C.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})})}},n)})),(0,r.jsx)(c.Z,{sx:{marginTop:"24px",marginLeft:"8px"},children:(0,r.jsx)(he.Z,{variant:"text",size:"small",disabled:o,disableElevation:!0,sx:We.btnGroup,children:i?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U,{variant:"contained",onClick:f,children:"Edit"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U,{onClick:s,children:"Clear All"}),(0,r.jsx)(U,{onClick:f,children:"Cancel"}),(0,r.jsx)(U,{variant:"contained",onClick:u,disabled:o,children:"Save"})]})})})]})]})};function He(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ve(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function Ge(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Ge(e,n,t[n])}))}return e}function Qe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||$e(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,n){if(e){if("string"===typeof e)return He(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?He(e,n):void 0}}var Ke={NEW_MOON:{code:"new_moon",label:"New Moon"},FIRST_QUARTER:{code:"first_quarter",label:"First Quarter"},FULL_MOON:{code:"full_moon",label:"Full Moon"},LAST_QUARTER:{code:"last_quarter",label:"Last Quarter"}},qe={msg:"",type:"",action:"view",loading:!1,modalMsg:"Save changes to the moon phases list?",openLoadingModal:!1},Je={updated_by:"",date_created:""};var en=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],o=(0,a.useState)(qe),i=o[0],l=o[1],s=(0,a.useState)(Je),c=s[0],u=s[1],d=(0,a.useState)(!0),f=d[0],p=d[1],h=(0,a.useRef)(!1),m=Qe((0,Ze.ky)(S.M.WEATHER_FORECASTS,"bicol/".concat(S.M.SUB_TENDAY_COMMON,"/").concat(S.M.COMMON_TENDAY_TYPE.MOON_PHASES)),3),x=m[0],y=m[1],j=m[2];(0,a.useEffect)((function(){return h.current=!0,t(Object.values(Ke).reduce((function(e,n,t){return Xe(e).concat([{id:t,value:"-",phase:n.code,label:n.label,image:"images/icons/moon/".concat(n.code,".svg"),isValid:!1}])}),[])),function(){h.current=!1}}),[]),(0,a.useEffect)((function(){!y&&h.current&&x&&(w(x),u((function(e){return Ye({},e,{updated_by:x.updated_by,date_created:(0,v.Xn)(x.date_created)})}))),""!==j&&h.current&&l(Ye({},qe,{msg:j,type:Fe.C7.ERROR}))}),[x,y,j,w]);var w=(0,a.useCallback)((function(e){if(e){var r=Xe(n);e.data.forEach((function(e,n){r[n].value=e.value,r[n].isValid=""!==e.value})),t((function(e){return r}))}}),[n]),O=function(e){f||w(e||x),p((function(e){return!e}))},C=function(){var e,t=(e=b().mark((function e(){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,l(Ye({},qe,{loading:!0,openLoadingModal:!0,modalMsg:"Saving changes..."})),e.next=6,(0,g.eg)({type:S.M.SUB_TENDAY_COMMON,body:{region:"bicol",type:S.M.COMMON_TENDAY_TYPE.MOON_PHASES,data:n.map((function(e,n){return{id:n,value:e.value,phase:e.phase}}))}});case 6:t=e.sent,h.current&&(l((function(e){return Ye({},qe,{msg:"Successfully saved changes",type:Fe.C7.SUCCESS})})),u((function(e){return Ye({},e,{updated_by:t.updated_by,date_created:(0,v.NK)(t.date_created)})})),O(t)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),h.current&&(r="",void 0!==e.t0.response&&(r=void 0!==e.t0.response.data?e.t0.response.data:""),""===r&&(r=e.t0.message),l(Ye({},qe,{msg:r,type:Fe.C7.ERROR})));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Ve(o,r,a,i,l,"next",e)}function l(e){Ve(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsx)(ze,{state:n,message:i,log:c,isDisabled:i.loading,isViewInfo:f,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",a=e.target,o=a.id,i=a.value,l=o.split("-")[1],s=Xe(n);s[l]&&("clear"===r?(s[l].value="",s[l].isValid=!1):(s[l].value=i,i.length>=10?s[l].isValid=!1:s[l].isValid=""!==i),t((function(e){return s})))},handleClearClick:function(){t(n.map((function(e){return Ye({},e,{isValid:!1,value:""})})))},handleSaveClick:function(){void 0===n.find((function(e){return""===e.value}))?l(Ye({},i,{openLoadingModal:!0})):l((function(e){return Ye({},e,{msg:"Please check your input",type:Fe.C7.INFO,openLoadingModal:!1})}))},handleCancelSaveClick:function(){return l(qe)},handleSwitchClick:function(){return O(null)},onSaveClick:C})},nn={subheader:function(e){return{marginBottom:e.spacing(2),color:"gray",marginTop:e.spacing(1),"& a":{color:e.palette.green.dark,textDecoration:"none"},"& a:visited":{color:e.palette.green.dark},"& a:hover, span:hover":{textDecoration:"underline"}}},summary:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(3)},"& ul":{listStyle:"none"}},upload:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"90px",border:"1px solid gray",borderRadius:"8px",fontSize:"14px",color:function(e){return e.palette.text.secondary},padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(1)}},notification:{maxWidth:"500px",marginBottom:function(e){return e.spacing(2)}}},tn=(0,_.ZP)("input")({display:"none"});var rn=function(e){var n=e.files,t=void 0===n?[]:n,a=e.status,o=e.logs,i=e.handleSubmit,l=e.handleSelectFiles;return(0,r.jsxs)(c.Z,{sx:{"& li":{fontSize:"14px"}},children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"10-Day Weather Forecast Updater"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:nn.subheader,children:["ACAP's system updates its internal 10-Day Weather Forecast data by automatically downloading, parsing, and uploading the 10-day weather forecast excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10-Day Climate Forecast"})," web page to ACAP's database.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"ACAP's daily automatic 10-Day Weather Forecast updating runs daily between 9:00 AM to 12:00 PM PH time.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"This panel updates the site's 10-Day Weather Forecast data by allowing admins to manually upload the excel files downloaded from PAGASA's web page. Follow the steps to update the site's 10-Day Weather Forecast data:"]}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:["Download all (10) excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10 Day Climate Forecast"})," web page."]}),(0,r.jsx)("li",{children:"Press the SELECT FILES button and select all the excel files."}),(0,r.jsx)("li",{children:"Press the SUBMIT button."}),(0,r.jsx)("li",{children:"Wait for the upload process to finish."})]}),(0,r.jsx)(Re,{title:"Current Data Update Summary",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",o.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",o.date_valid]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",o.date_forecast]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",o.date_synced]})]})}),(0,r.jsx)(c.Z,{sx:nn.upload,children:0===t.length?(0,r.jsx)("span",{children:"Select excel files."}):(0,r.jsx)(c.Z,{sx:{"& div":{margin:"2px"}},children:Array.from(t).map((function(e,n){return(0,r.jsx)(Te.Z,{label:e.name,size:"small"},"excel-".concat(n))}))})}),(0,r.jsxs)(c.Z,{sx:nn.notification,children:[!a.loading&&""!==a.error&&(0,r.jsx)(De.Z,{severity:"error",children:a.error}),!a.loading&&""!==a.msg&&(0,r.jsx)(De.Z,{severity:"success",children:a.msg})]}),(0,r.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,r.jsx)(tn,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!0,type:"file",name:"excel-files",onChange:l,disabled:a.loading}),(0,r.jsxs)(U,{variant:"text",component:"span",size:"small",disabled:a.loading,disableElevation:!0,sx:{width:"110px"},children:["Select Files",(0,r.jsx)(Ee.Z,{size:20,color:"secondary",sx:{display:a.loading?"block":"none"}})]}),(0,r.jsx)(U,{type:"submit",variant:"contained",size:"small",onClick:i,disabled:a.loading,disableElevation:!0,sx:{width:"110px"},children:"Submit"})]}),(0,r.jsx)(en,{})]})};function an(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function on(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){on(e,n,t[n])}))}return e}var sn={loading:!1,error:"",msg:""},cn={updated_by:"",date_forecast:"",date_synced:"",date_valid:""};var un=function(e){var n=e.getDateToString,t=(0,a.useState)([]),o=t[0],i=t[1],l=(0,a.useState)(sn),s=l[0],c=l[1],u=(0,a.useState)(cn),d=u[0],f=u[1],p=(0,Ze.tl)(S.M.WEATHER_FORECASTS,"bicol","ten_day","name",1),h=p.documents,m=p.loading,x=p.error;(0,a.useEffect)((function(){!m&&""===x&&h.length>0&&y(h)}),[m,x,h,y]);var y=(0,a.useCallback)((function(e){var t=Object.values(e[0].municipalities)[0][0],r={updated_by:e[0].updated_by,date_synced:n(e[0].date_created)};r.date_forecast=t.date_forecast,r.date_valid=t.date_range,f(r)}),[n]),v=function(){var e,n=(e=b().mark((function e(){var n,t,r,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new FormData,t=0;t<o.length;t+=1)n.append("excel-files",o[t]);return e.prev=2,c(ln({},sn,{loading:!0})),e.next=6,(0,g.pc)(n);case 6:c((function(e){return ln({},sn,{loading:!1,msg:"Upload success."})})),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),r=e.t0.response?e.t0.response.data:e.t0.message,c(ln({},sn,{loading:!1,error:r})),e.abrupt("return");case 14:return e.prev=14,e.next=17,(0,_e.vx)();case 17:a=e.sent,y(a),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error(e.t1.message);case 24:case"end":return e.stop()}}),e,null,[[2,9],[14,21]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){an(o,r,a,i,l,"next",e)}function l(e){an(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(rn,{files:o,status:s,logs:d,handleSubmit:v,handleSelectFiles:function(e){c(sn),i(e.target.files)}})};var dn=function(e){var n=e.state,t=e.cycloneLoading,a=e.onSyncPress;return(0,r.jsxs)(c.Z,{sx:{fontSize:"14px"},children:[(0,r.jsx)(M.Z,{openSnackbar:""!==n.error||""!==n.msg,message:""!==n.error?n.error:n.msg,severity:""!==n.error?"error":"success"}),(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"Tropical Cyclone Bulletin Updater"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:nn.subheader,children:["ACAP's system updates its ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," information by automatically scanning, extracting, and uploading the latest Tropical Cyclone data from PAGASA's ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP's database.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"ACAP's  automatic Special Weather Advisory updates run daily every (2) two hours, starting from midnight PH time, with a lag time of 20 minutes to (1) one and a half hours.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"This panel updates ACAP's ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," content by manually initiating the  process of syncing PAGASA's latest published tropical cyclone data from their ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP."]}),(0,r.jsx)(h.Z,{variant:"body2",sx:nn.subheader,children:"Press the SYNC button below to start the data syncing process."}),(0,r.jsx)(Re,{title:"Current Data Update Summary",children:!t&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",n.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",n.date_updated]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Summary:"}),"\xa0 ",n.summary]})]})}),(0,r.jsx)(w.Z,{variant:"contained",onClick:a,disabled:t||n.loading,children:"Sync"})]})},fn=t(1029),pn=t(9669),hn=t.n(pn),mn=t(9431);function xn(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function bn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function gn(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function jn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){yn(e,n,t[n])}))}return e}function Sn(e,n){return!n||"object"!==On(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function wn(e,n){return wn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},wn(e,n)}var On=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Cn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=vn(e);if(n){var a=vn(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Sn(this,t)}}var Pn={SPECIAL_WEATHER_CYCLONE:"".concat("https://amia-cis.onrender.com/api","/cyclone")},An=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&wn(e,n)}(o,e);var n,t,r,a=Cn(o);function o(){return bn(this,o),a.apply(this,arguments)}return n=o,t=[{key:"updateSpecialWeather",value:function(e){var n,t=this;return(n=b().mark((function n(){var r,a;return b().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,hn()(jn({},r,{url:Pn.SPECIAL_WEATHER_CYCLONE,method:"POST"}));case 5:return a=n.sent,n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){xn(o,r,a,i,l,"next",e)}function l(e){xn(o,r,a,i,l,"throw",e)}i(void 0)}))})()}}],t&&gn(n.prototype,t),r&&gn(n,r),o}(mn.Z),kn=new An,Zn=kn.updateSpecialWeather.bind(kn);function _n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Tn(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,a)}function En(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Dn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){En(e,n,t[n])}))}return e}function In(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return _n(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _n(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Mn=t(7294),Bn=Mn.useEffect,Rn=Mn.useState,Fn=Mn.useRef,Ln={loading:!1,error:"",msg:"",updated_by:"",date_updated:"",summary:""};var Un=function(e){var n=e.getDateToString,t=In((0,Ze.ky)(fn.K.GLOBAL_COLLECTIONS,fn.K.CYCLONE_ADVISORY),3),a=t[0],o=t[1],i=t[2],l=In(Rn(Ln),2),s=l[0],c=l[1],u=Fn(!1);Bn((function(){return u.current=!0,function(){u.current=!1}}),[]),Bn((function(){if(!o){if(!u.current)return;c(i?{error:i}:{loading:!1,error:"",msg:"",updated_by:"system"===a.updated_by?"system":a.email,date_updated:n(a.date_updated),summary:a.summary})}}),[o,a,i,n]);var d=function(){var e,n=(e=b().mark((function e(){var n,t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dn({},s,{loading:!0,error:"",msg:""})),e.next=4,Zn({});case 4:n=e.sent,t=new Date(1e3*n.date_updated._seconds),n.date_updated="".concat(t.toDateString()," ").concat(t.toLocaleTimeString("it-IT",v.W6)),u.current&&c((function(e){return Dn({},e,{loading:!1,msg:"Successfully synced data.",updated_by:"system"===n.updated_by?"system":n.email,date_updated:n.date_updated,summary:n.summary})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),u.current&&c((function(n){return Dn({},n,{loading:!1,error:e.t0.message})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Tn(o,r,a,i,l,"next",e)}function l(e){Tn(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(dn,{state:s,cycloneLoading:o,onSyncPress:d})},Nn={tabsContainer:{marginTop:function(e){return e.spacing(6)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tabsMain:{marginTop:function(e){return e.spacing(4)}}};function Wn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function zn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Wn(e,n,t[n])}))}return e}var Hn=function(){var e=(0,a.useState)(0),n=e[0],t=e[1];return(0,r.jsxs)("div",{children:[(0,r.jsxs)(p.Z,{sx:{border:"none"},children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Weather Services Updater"}),(0,r.jsxs)("p",{children:["Update the site-wide ",(0,r.jsx)("strong",{children:"ACAP Services"})," weather forecast information for the ",(0,r.jsx)("strong",{children:"Seasonal"}),", ",(0,r.jsx)("strong",{children:"10-Day"})," and ",(0,r.jsx)("strong",{children:"Special Weather"})," Forecast sections by providing updated data."]}),(0,r.jsxs)("p",{children:["Please take caution in updating this information because they will be automatically referenced by all site admins when creating crop recommendations bulletins on the ",(0,r.jsx)("strong",{children:"Create Crop Bulletins"})," (10-Day and Seasonal) Admin pages. Global data updates made by admins are also viewable on the site's public ",(0,r.jsx)("strong",{children:"ACAP Services"})," page and used as references on the ",(0,r.jsx)("strong",{children:"Crop Recommendations"})," page."]})]}),(0,r.jsxs)(c.Z,{sx:Nn.tabsContainer,children:[(0,r.jsxs)(d.Z,{value:n,onChange:function(e,n){t(n)},"aria-label":"weather services updater",children:[(0,r.jsx)(u.Z,zn({label:"Seasonal"},(0,f.P)(0))),(0,r.jsx)(u.Z,zn({label:"10-Day"},(0,f.P)(1))),(0,r.jsx)(u.Z,zn({label:"Tropical Cyclone"},(0,f.P)(2)))]}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(f.x,{value:n,index:0,children:(0,r.jsx)(ke,{})}),(0,r.jsx)(f.x,{value:n,index:1,children:(0,r.jsx)(un,{getDateToString:v.Xn})}),(0,r.jsx)(f.x,{value:n,index:2,children:(0,r.jsx)(Un,{getDateToString:v.Xn})})]})]})]})};var Vn=(0,l.Z)((function(e){var n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.provinces.ids}));return(0,a.useEffect)((function(){0===t.length&&n((0,i.Q)())}),[n,t]),(0,r.jsx)(s.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:Fe.DW.ADMIN,children:(0,r.jsx)(Hn,{})})}))}},function(e){e.O(0,[9351,6153,9964,1704,1903,7823,6626,2882,4732,1433,5909,5293,1050,6454,8052,9774,2888,179],(function(){return n=1158,e(e.s=n);var n}));var n=e.O();_N_E=n}]);