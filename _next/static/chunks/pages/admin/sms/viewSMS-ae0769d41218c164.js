(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8226],{3926:function(e,t,n){"use strict";var r=n(7294),o=n(67),i=n(3633),c=n(7094),a=n(5893);function s(e){return e.substring(2).toLowerCase()}t.Z=function(e){const{children:t,disableReactTree:n=!1,mouseEvent:u="onClick",onClickAway:l,touchEvent:d="onTouchEnd"}=e,f=r.useRef(!1),p=r.useRef(null),h=r.useRef(!1),m=r.useRef(!1);r.useEffect((()=>(setTimeout((()=>{h.current=!0}),0),()=>{h.current=!1})),[]);const x=(0,o.Z)(t.ref,p),v=(0,i.Z)((e=>{const t=m.current;m.current=!1;const r=(0,c.Z)(p.current);if(!h.current||!p.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(f.current)return void(f.current=!1);let o;o=e.composedPath?e.composedPath().indexOf(p.current)>-1:!r.documentElement.contains(e.target)||p.current.contains(e.target),o||!n&&t||l(e)})),b=e=>n=>{m.current=!0;const r=t.props[e];r&&r(n)},y={ref:x};return!1!==d&&(y[d]=b(d)),r.useEffect((()=>{if(!1!==d){const e=s(d),t=(0,c.Z)(p.current),n=()=>{f.current=!0};return t.addEventListener(e,v),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,v),t.removeEventListener("touchmove",n)}}}),[v,d]),!1!==u&&(y[u]=b(u)),r.useEffect((()=>{if(!1!==u){const e=s(u),t=(0,c.Z)(p.current);return t.addEventListener(e,v),()=>{t.removeEventListener(e,v)}}}),[v,u]),(0,a.jsx)(r.Fragment,{children:r.cloneElement(t,y)})}},7645:function(e,t,n){"use strict";var r=n(7462),o=n(3366),i=n(7294),c=n(6010),a=n(7192),s=n(5861),u=n(1496),l=n(3616),d=n(4472),f=n(4182),p=n(5893);const h=["className","id"],m=(0,u.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),x=i.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:u}=n,x=(0,o.Z)(n,h),v=n,b=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},d.a,t)})(v),{titleId:y=u}=i.useContext(f.Z);return(0,p.jsx)(m,(0,r.Z)({component:"h2",className:(0,c.Z)(b.root,s),ownerState:v,ref:t,variant:"h6",id:y},x))}));t.Z=x},7070:function(e,t,n){"use strict";n(7294);var r=n(2066),o=n(5893);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},6686:function(e,t,n){"use strict";n(7294);var r=n(2066),o=n(5893);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},5835:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/sms/viewSMS",function(){return n(4114)}])},8554:function(e,t){"use strict";t.Z={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},tabsContainer:{marginTop:function(e){return e.spacing(8)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},customizedButtonLink:{cursor:"pointer",color:"#8BC24A",textDecoration:"underline",fontWeight:600}}},7634:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(5893),o=n(5675),i=n(7357),c=n(5861),a=n(120),s={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(4)}}};var u=function(e){var t=e.message,n=void 0===t?"Failed to load data":t,u=e.style,l=void 0===u?{}:u;return(0,r.jsxs)(i.Z,{sx:s.container,style:l,children:[(0,r.jsx)(o.default,{unoptimized:!0,src:(0,a.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:a.imageLoader,alt:"Empty data"}),(0,r.jsx)(c.Z,{variant:"subtitle1",children:n})]})}},6759:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893),o=n(7357),i=n(7720),c=n(8078),a={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},divider:{marginTop:"32px",marginBottom:"32px"},text:{marginTop:"16px",marginBottom:"16px"}};var s=function(){return(0,r.jsxs)(o.Z,{sx:a.container,children:[(0,r.jsx)(o.Z,{sx:{width:"300px"},children:[1,2,3,4,5,6,7,8].map((function(e){return(0,r.jsx)(c.Z,{variant:"text"},"up-".concat(e))}))}),(0,r.jsx)(i.Z,{sx:a.divider}),(0,r.jsx)(o.Z,{children:[1,2,3,4,5,6,7,8].map((function(e){return(0,r.jsx)(c.Z,{variant:"rectangular",sx:a.text},"down-".concat(e))}))})]})}},9227:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(5893),o=n(7294),i=n(5697),c=n.n(i),a=n(1057),s=n(9536),u=n(8456),l=n(4666),d=n(1425),f=n(7645),p=n(6580),h=n(3946),m={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(e){return e.palette.grey[500]}}};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(s){a=!0,o=s}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){var t=y(o.useState({open:null}),2),n=t[0],i=t[1],c=e.loading,x=void 0!==c&&c,v=e.isOpen,g=void 0!==v&&v,j=e.showButtons,w=void 0===j||j,O=e.maxWidth,C=void 0===O?"sm":O,S=e.IconSVG,T=void 0===S?null:S,Z=e.modalExtraHandlerCB,E=void 0===Z?null:Z,k=e.modalCancelHandlerCB,P=void 0===k?null:k,R=e.modalConfirmHandlerCB,_=void 0===R?null:R,B=e.modalOpenHandlerCB,A=void 0===B?null:B,F=e.isDisabled,N=void 0!==F&&F,D=e.openButtonText,L=void 0===D?"Click":D,M=e.title,W=void 0===M?"Window Title":M,z=e.extraBtnText,I=void 0===z?"":z,H=e.cancelBtnText,q=void 0===H?"Cancel":H,G=e.confirmBtnText,K=void 0===G?"Ok":G,X=e.contentText,U=void 0===X?"":X,Y=e.error,V=void 0===Y?"":Y,$=e.colorTheme,J=void 0===$?"primary":$;(0,o.useEffect)((function(){i((function(e){return b({},e,{open:g})}))}),[g]);var Q=function(){i(b({},n,{open:!1})),P&&P()};return(0,r.jsxs)("div",{children:[L&&(0,r.jsxs)(a.Z,{disabled:N,disableElevation:!0,variant:"contained",color:J,onClick:function(){i(b({},n,{open:!0})),A&&A()},sx:m.button,children:[T&&(0,r.jsx)(T,{sx:m.icon}),L]}),(0,r.jsxs)(l.Z,{maxWidth:C,fullWidth:!0,open:n.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("span",{children:W}),(0,r.jsx)(h.Z,{"aria-label":"close",sx:m.closeButton,onClick:Q,disabled:x,children:(0,r.jsx)(s.Z,{})})]}),(0,r.jsxs)(p.Z,{sx:m.dialogContent,children:[""!==U&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:U}),(0,r.jsx)("div",{className:"error",children:V})]}),e.children]}),w&&(0,r.jsxs)(d.Z,{sx:m.dialogActions,children:[""!==I&&(0,r.jsx)(a.Z,{onClick:E||Q,disabled:x,children:I}),(0,r.jsx)(a.Z,{onClick:P||Q,disabled:x,children:q}),(0,r.jsxs)(a.Z,{variant:"contained",disabled:x,onClick:_||Q,children:[(0,r.jsx)("span",{style:{display:x?"none":"block"},children:K}),(0,r.jsx)(u.Z,{size:24,color:"secondary",sx:{display:x?"block":"none"}})]})]})]})]})}g.propTypes={loading:c().bool,isOpen:c().bool,showButtons:c().bool,maxWidth:c().string,IconSVG:c().elementType,modalCancelHandlerCB:c().func,modalConfirmHandlerCB:c().func,modalOpenHandlerCB:c().func,modalExtraHandlerCB:c().func,openButtonText:c().string,cancelBtnText:c().string,confirmBtnText:c().string,extraBtnText:c().string,title:c().string,contentText:c().string,children:c().node,error:c().string,isDisabled:c().bool,colorTheme:c().string};var j=g},4114:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ae}});var r=n(4051),o=n.n(r),i=n(5893),c=n(7294),a=n(1163),s=n(5243),u=n(8152),l=n(558),d=n(6383),f=n(7426),p=n(7715),h=n(7357),m=n(5861),x=n(6863),v=n(1057),b=n(7720),y=n(6886),g=n(7948),j=n(1903),w=n(3539),O=n(8396),C=n(9669),S=n.n(C),T=n(9431);function Z(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(u){return void n(u)}a.done?t(s):Promise.resolve(s).then(r,o)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}function B(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var F=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}var D={BASE_API_URL:"https://amia-cis.onrender.com/api",SEND_SMS_RECOMMENDATIONS:"".concat("https://amia-cis.onrender.com/api","/send")},L=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(c,e);var t,n,r,i=N(c);function c(){return E(this,c),i.apply(this,arguments)}return t=c,n=[{key:"sendSMS",value:function(e){var t,n=this;return(t=o().mark((function t(){var r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({body:e});case 2:return r=t.sent,t.next=5,S()(_({},r,{url:D.SEND_SMS_RECOMMENDATIONS,method:"POST"}));case 5:return i=t.sent,t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(e){Z(i,r,o,c,a,"next",e)}function a(e){Z(i,r,o,c,a,"throw",e)}c(void 0)}))})()}}],n&&k(t.prototype,n),r&&k(t,r),c}(T.Z),M=new L,W=M.sendSMS.bind(M),z=n(6759),I=n(7634),H=n(9227),q=n(7392),G=n(8554),K=n(6486),X=n.n(K),U=n(5799),Y=n(1927);function V(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(u){return void n(u)}a.done?t(s):Promise.resolve(s).then(r,o)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}var Q=(0,U.Z)();Q.typography.h5=$({fontSize:"1.2rem","@media (min-width:600px)":{fontSize:"1.5rem"}},Q.breakpoints.up("md"),{fontSize:"2rem"});var ee=[{field:"name",headerName:"Name",width:150},{field:"cellnumber",headerName:"Cell Number",width:130}];var te=function(e){var t=e.contacts,n=e.onBackBtnClick,r=e.report,s=e.setReport,u=e.loading,l=(0,c.useState)(t),d=l[0],p=l[1],C=(0,c.useState)([]),S=C[0],T=C[1],Z=(0,a.useRouter)();(0,c.useEffect)((function(){0===d.length&&p(t)}),[t,d.length]);var E=(0,O.Z)(Q.breakpoints.between("xs","md")),k=function(){var e,n=(e=o().mark((function e(){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r.info){e.next=17;break}return s(J({},r,{sending:!0})),n=[],i=[],S.map((function(e){var r=t.find((function(t){return t.id===e}));r&&(n.push(r.cellnumber),i.push(""===r.name?r.cellnumber:r.name))})),e.prev=5,e.next=8,W({docId:r.id,recipientsNumber:n.toString(),message:r.smsRecommendations,currentSmsLogs:(null===r||void 0===r?void 0:r.logs)?r.logs:[],recipientsWithName:i.toString()});case 8:s((function(e){return J({},e,{sending:!1,info:"Crop Recommendation sent."})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),Z.push({pathname:"/admin/sms/",query:{isSent:!1}},"/admin/sms/"),console.error(e.t0.message);case 15:e.next=18;break;case 17:Z.push({pathname:"/admin/sms/"});case 18:case"end":return e.stop()}}),e,null,[[5,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){V(i,r,o,c,a,"next",e)}function a(e){V(i,r,o,c,a,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),P=function(){Z.push({pathname:"/admin/sms/",query:{toAddContact:!0}},"/admin/sms/")};return(0,i.jsx)("div",{children:u||r.loading?(0,i.jsx)(z.Z,{}):void 0!==r.stages?(0,i.jsxs)(h.Z,{container:!0,sx:G.Z.container,children:[(0,i.jsxs)(h.Z,{sx:{marginBottom:"32px",display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(Y.Z,{theme:Q,children:(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(m.Z,{variant:"h5",children:"Send Text-Form Crop Recommendation"}),(0,i.jsx)(m.Z,{variant:"h6",children:q.eT[r.type]})]})}),(0,i.jsxs)(x.Z,{orientation:E?"vertical":"horizontal",children:[(0,i.jsx)(v.Z,{disableElevation:!0,variant:"contained",color:"primary",sx:G.Z.button,onClick:n,children:"Back"})," ","\xa0",(0,i.jsx)(H.Z,{isDisabled:0===S.length||void 0===(null===r||void 0===r?void 0:r.smsRecommendations),isOpen:!1,maxWidth:"sm",openButtonText:"Send",title:"Send Crop Recommendation",contentText:""!==r.info?r.info:"Sending this allows your contacts to receive the Text-Form Crop Recommendation on their cellphone numbers as text.",confirmBtnText:""!==r.info?"Ok":"Send",modalConfirmHandlerCB:k,loading:r.sending})]})]}),(0,i.jsxs)(h.Z,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Province:"})," ",r.province]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Municipality:"})," ",r.municipality]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Crop:"})," ",r.crop]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Report type:"})," ",r.type||"-"]}),r.type===q.Ry.TEN_DAY&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Weather data validity:"})," ",r.date_range]}),r.type===q.Ry.SEASONAL&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Month:"})," \xa0",Object.values(f.re).find((function(e){return e.code===r.month})).format]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Weather Condition:"})," \xa0",r.condition&&Object.values(f.MW).find((function(e){return e.label===r.condition})).sync||"-",r.type===q.Ry.TEN_DAY&&(0,i.jsxs)("span",{children:[" (",r.rainfall,")"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Crop Stage(s):"})," ",r.stages.toString().split(",").join(", ")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Activities:"})," ",r.activities.toString().split(",").join(", ")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Created by:"})," ",r.updated_by]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Date created:"})," ",r.date_created]}),(0,i.jsxs)(m.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"ID:"})," ",r.id]}),(0,i.jsx)(b.Z,{sx:{marginTop:"32px"}})]}),(0,i.jsxs)(y.ZP,{container:!0,style:{paddingTop:"10px"},children:[(0,i.jsxs)(y.ZP,{item:!0,xs:12,md:5,children:[(0,i.jsx)(m.Z,{variant:"h6",children:"Text-Form Crop Recommendation"}),(0,i.jsx)(g.Z,{children:(null===r||void 0===r?void 0:r.smsRecommendations)||(0,i.jsx)("span",{style:{color:"#ff1744"},children:"No SMS Recommendations available."})})]}),(0,i.jsxs)(y.ZP,{item:!0,xs:12,md:7,children:[(0,i.jsx)(m.Z,{variant:"h6",children:"List of Contacts"}),t.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Z,{children:(0,i.jsxs)(m.Z,{variant:"body2",children:["These are your contacts that you can send the recommendation thru SMS.",(0,i.jsx)("br",{}),"Need to change some of your contacts? Click"," ",(0,i.jsx)("span",{onClick:P,style:G.Z.customizedButtonLink,children:"here"}),"."]})}),(0,i.jsxs)("div",{style:{height:"400px",width:"100%",paddingTop:"10px"},children:[(0,i.jsx)(h.Z,{sx:{marginBottom:"10px"},children:(0,i.jsx)(j.Z,{id:"outlined-basic",label:"Search...",variant:"outlined",size:"small",onChange:function(e){var n,r,o=e.target.value;if(""===e.target.value)p(t);else{var i=(n=t,r=o,X().filter(n,X().flow(X().identity,X().values,X().join,X().toLower,X().partialRight(X().includes,r))));p(i)}},style:{width:"100%"}})}),(0,i.jsx)(w._,{style:{maxHeight:"350px"},rows:d,columns:ee,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,onSelectionModelChange:function(e){return T(e)}})]})]}):(0,i.jsx)("div",{children:(0,i.jsxs)(m.Z,{variant:"subtitle1",children:["No contacts yet. Please add contacts first in your Phonebook\xa0",(0,i.jsx)("span",{onClick:P,style:G.Z.customizedButtonLink,children:"here"}),"."]})})]})]})]}):(0,i.jsx)(I.Z,{})})};function ne(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(u){return void n(u)}a.done?t(s):Promise.resolve(s).then(r,o)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){ne(i,r,o,c,a,"next",e)}function a(e){ne(i,r,o,c,a,"throw",e)}c(void 0)}))}}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oe(e,t,n[t])}))}return e}var ce={loading:!0,error:"",info:"",sending:!1};var ae=(0,s.Z)((function(e){var t=(0,c.useState)(ce),n=t[0],r=t[1],s=(0,c.useState)([]),h=s[0],m=s[1],x=(0,a.useRouter)();return(0,c.useEffect)((function(){if(n.loading&&Object.keys(x.query).length>0){var e=function(){var e=re(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.fL)(x.query.docId);case 3:t=e.sent,n=t.date_created.toDate(),t.date_created="".concat(n.toDateString()," ").concat(n.toLocaleTimeString("it-IT",p.W6)),r((function(e){return ie({},e,{loading:!1},t)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(ie({},ce,{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=re(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.K2)();case 3:t=e.sent,m(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(ie({},ce,{loading:!1,error:e.t0.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t()}}),[x,n.loading]),(0,i.jsx)(d.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:f.DW.ADMIN,children:(0,i.jsx)(te,{setReport:r,report:n,loading:e.loading,contacts:h,onBackBtnClick:function(){x.push("/admin/sms/")}})})}))},558:function(e,t,n){"use strict";n.d(t,{rE:function(){return w},GK:function(){return O},mP:function(){return C},K2:function(){return S}});var r=n(4051),o=n.n(r),i=n(9669),c=n.n(i),a=n(9431);function s(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(u){return void n(u)}a.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){s(i,r,o,c,a,"next",e)}function a(e){s(i,r,o,c,a,"throw",e)}c(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function m(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}var v=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}var y={BASE_API_URL:"https://amia-cis.onrender.com/api",CREATE_CONTACT:"".concat("https://amia-cis.onrender.com/api","/contact"),DELETE_CONTACT:"".concat("https://amia-cis.onrender.com/api","/contact"),EDIT_CONTACT:"".concat("https://amia-cis.onrender.com/api","/contact"),GET_CONTACTS:"".concat("https://amia-cis.onrender.com/api","/contacts"),PHONEBOOK:"phonebook"},g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,i=b(a);function a(){return l(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"createContact",value:function(e){var t=this;return u(o().mark((function n(){var r,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,c()(h({},r,{url:y.CREATE_CONTACT,method:"POST"}));case 5:return i=n.sent,n.abrupt("return",i.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"deleteContact",value:function(e){var t=this;return u(o().mark((function n(){var r,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,c()(h({},r,{url:y.DELETE_CONTACT,method:"DELETE"}));case 5:return i=n.sent,n.abrupt("return",i.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"editContact",value:function(e){var t=this;return u(o().mark((function n(){var r,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,c()(h({},r,{url:y.EDIT_CONTACT,method:"PATCH"}));case 5:return i=n.sent,n.abrupt("return",i.data);case 7:case"end":return n.stop()}}),n)})))()}},{key:"getContacts",value:function(){var e=this;return u(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createRequestObject({});case 2:return n=t.sent,t.next=5,c()(h({},n,{url:y.GET_CONTACTS,method:"GET"}));case 5:return r=t.sent,t.abrupt("return",r.data.contacts);case 7:case"end":return t.stop()}}),t)})))()}}])&&d(t.prototype,n),r&&d(t,r),a}(a.Z),j=new g,w=j.createContact.bind(j),O=j.deleteContact.bind(j),C=j.editContact.bind(j),S=j.getContacts.bind(j)}},function(e){e.O(0,[3662,9351,6153,9964,1704,1903,7823,6295,4039,2882,3539,7489,1050,9774,2888,179],(function(){return t=5835,e(e.s=t);var t}));var t=e.O();_N_E=t}]);