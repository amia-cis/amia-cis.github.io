(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8226],{5835:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/sms/viewSMS",function(){return e(7713)}])},8554:function(n,t){"use strict";t.Z={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},tabsContainer:{marginTop:function(n){return n.spacing(8)},border:function(n){return"1px solid ".concat(n.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},customizedButtonLink:{cursor:"pointer",color:"#8BC24A",textDecoration:"underline",fontWeight:600}}},1033:function(n,t,e){"use strict";e.d(t,{Z:function(){return u}});var r=e(5893),o=e(5675),i=e(7357),a=e(5861),c=e(120),s={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(n){return n.spacing(2)},color:function(n){return n.palette.text.secondary},borderStyle:"dashed",padding:function(n){return n.spacing(2)},marginTop:function(n){return n.spacing(4)}}};var u=function(n){var t=n.message,e=void 0===t?"Failed to load data":t;return(0,r.jsxs)(i.Z,{sx:s.container,children:[(0,r.jsx)(o.default,{unoptimized:!0,src:(0,c.assetPrefixer)("images/icons/empty-state-light.svg"),height:120,width:120,loader:c.imageLoader,alt:"Empty data"}),(0,r.jsx)(a.Z,{variant:"subtitle1",children:e})]})}},4884:function(n,t,e){"use strict";e.d(t,{Z:function(){return s}});var r=e(5893),o=e(7357),i=e(7720),a=e(8078),c={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},divider:{marginTop:"32px",marginBottom:"32px"},text:{marginTop:"16px",marginBottom:"16px"}};var s=function(){return(0,r.jsxs)(o.Z,{sx:c.container,children:[(0,r.jsx)(o.Z,{sx:{width:"300px"},children:[1,2,3,4,5,6,7,8].map((function(n){return(0,r.jsx)(a.Z,{variant:"text"},"up-".concat(n))}))}),(0,r.jsx)(i.Z,{sx:c.divider}),(0,r.jsx)(o.Z,{children:[1,2,3,4,5,6,7,8].map((function(n){return(0,r.jsx)(a.Z,{variant:"rectangular",sx:c.text},"down-".concat(n))}))})]})}},3501:function(n,t,e){"use strict";e.d(t,{Z:function(){return j}});var r=e(5893),o=e(7294),i=e(5697),a=e.n(i),c=e(1057),s=e(9536),u=e(8456),l=e(657),d=e(1425),p=e(7645),f=e(6580),h=e(3946),x={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"50px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(n){return n.palette.grey[500]}}};function m(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function v(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function b(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){v(n,t,e[t])}))}return n}function g(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i=[],a=!0,c=!1;try{for(e=e.call(n);!(a=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){c=!0,o=s}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return m(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(n){var t=g(o.useState({open:null}),2),e=t[0],i=t[1],a=n.loading,m=void 0!==a&&a,v=n.isOpen,y=void 0!==v&&v,j=n.maxWidth,C=void 0===j?"sm":j,w=n.IconSVG,O=void 0===w?null:w,k=n.modalExtraHandlerCB,T=void 0===k?null:k,S=n.modalCancelHandlerCB,Z=void 0===S?null:S,E=n.modalConfirmHandlerCB,B=void 0===E?null:E,P=n.modalOpenHandlerCB,F=void 0===P?null:P,_=n.isDisabled,A=void 0!==_&&_,R=n.openButtonText,N=void 0===R?"Click":R,D=n.title,z=void 0===D?"Window Title":D,W=n.extraBtnText,H=void 0===W?"":W,L=n.cancelBtnText,I=void 0===L?"Cancel":L,M=n.confirmBtnText,q=void 0===M?"Ok":M,G=n.contentText,K=void 0===G?"":G,U=n.error,V=void 0===U?"":U;(0,o.useEffect)((function(){i((function(n){return b({},n,{open:y})}))}),[y]);var X=function(){i(b({},e,{open:!1})),Z&&Z()};return(0,r.jsxs)("div",{children:[N&&(0,r.jsxs)(c.Z,{disabled:A,disableElevation:!0,variant:"contained",color:"primary",onClick:function(){i(b({},e,{open:!0})),F&&F()},sx:x.button,children:[O&&(0,r.jsx)(O,{sx:x.icon}),N]}),(0,r.jsxs)(l.Z,{maxWidth:C,fullWidth:!0,open:e.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsxs)(p.Z,{children:[(0,r.jsx)("span",{children:z}),(0,r.jsx)(h.Z,{"aria-label":"close",sx:x.closeButton,onClick:X,children:(0,r.jsx)(s.Z,{})})]}),(0,r.jsxs)(f.Z,{sx:x.dialogContent,children:[""!==K&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:K}),(0,r.jsx)("div",{className:"error",children:V})]}),n.children]}),(0,r.jsxs)(d.Z,{sx:x.dialogActions,children:[""!==H&&(0,r.jsx)(c.Z,{onClick:T||X,disabled:m,children:H}),(0,r.jsx)(c.Z,{onClick:Z||X,disabled:m,children:I}),(0,r.jsxs)(c.Z,{variant:"contained",disabled:m,onClick:B,children:[(0,r.jsx)("span",{style:{display:m?"none":"block"},children:q}),(0,r.jsx)(u.Z,{size:24,color:"secondary",sx:{display:m?"block":"none"}})]})]})]})]})}y.propTypes={loading:a().bool,isOpen:a().bool,maxWidth:a().string,IconSVG:a().elementType,modalCancelHandlerCB:a().func,modalConfirmHandlerCB:a().func,modalOpenHandlerCB:a().func,modalExtraHandlerCB:a().func,openButtonText:a().string,cancelBtnText:a().string,confirmBtnText:a().string,extraBtnText:a().string,title:a().string,contentText:a().string,children:a().node,error:a().string,isDisabled:a().bool};var j=y},7713:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return I}});var r=e(4051),o=e.n(r),i=e(5893),a=e(7294),c=e(1163),s=e(3059),u=e(8152),l=e(558),d=e(2530),p=e(7426),f=e(7357),h=e(5861),x=e(6863),m=e(1057),v=e(7720),b=e(6886),g=e(7948),y=e(1903),j=e(4343),C=e(8396),w=e(4884),O=e(1033),k=e(3501),T=e(8554),S=e(6486),Z=e.n(S),E=e(5799),B=e(1927);var P,F,_,A=(0,E.Z)();A.typography.h5=(P={fontSize:"1.2rem","@media (min-width:600px)":{fontSize:"1.5rem"}},F=A.breakpoints.up("md"),_={fontSize:"2rem"},F in P?Object.defineProperty(P,F,{value:_,enumerable:!0,configurable:!0,writable:!0}):P[F]=_,P);var R=[{field:"name",headerName:"Name",width:150},{field:"cellnumber",headerName:"Cell Number",width:130}];var N=function(n){var t=n.contacts,e=n.onBackBtnClick,r=n.report,o=n.loading,s=(0,a.useState)(t),u=s[0],l=s[1],d=(0,a.useState)([]),p=d[0],S=d[1],E=(0,c.useRouter)();(0,a.useEffect)((function(){0===u.length&&l(t)}),[t,u.length]);var P=(0,C.Z)(A.breakpoints.between("xs","md")),F=function(){E.push({pathname:"/admin/sms/",query:{toAddContact:!0}},"/admin/sms/")};return(0,i.jsx)("div",{children:o||r.loading?(0,i.jsx)(w.Z,{}):void 0!==r.stages?(0,i.jsxs)(f.Z,{container:!0,sx:T.Z.container,children:[(0,i.jsxs)(f.Z,{sx:{marginBottom:"32px",display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(B.Z,{theme:A,children:(0,i.jsx)(h.Z,{variant:"h5",children:"Send Text-Form Crop Recommendation"})}),(0,i.jsxs)(x.Z,{orientation:P?"vertical":"horizontal",children:[(0,i.jsx)(m.Z,{disableElevation:!0,variant:"contained",color:"primary",sx:T.Z.button,onClick:e,children:"Back"})," ","\xa0",(0,i.jsx)(k.Z,{isDisabled:0===p.length||void 0===(null===r||void 0===r?void 0:r.smsRecommendations),isOpen:!1,maxWidth:"sm",openButtonText:"Send",title:"Are you sure you want to send this?",contentText:""!==r.info?r.info:"Sending this allows your contacts to receive the Text-Form Crop Recommendation on their cellphone numbers as text.",confirmBtnText:""!==r.info?"Ok":"Send",modalConfirmHandlerCB:function(){var n=[],e=[];p.map((function(r){var o=t.find((function(n){return n.id===r}));o&&(n.push(o.cellnumber),e.push(""===o.name?o.cellnumber:o.name))}))}})]})]}),(0,i.jsxs)(f.Z,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Province:"})," ",r.province]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Municipality:"})," ",r.municipality]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Crop:"})," ",r.crop]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Month:"})," ",r.month]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Crop Stage(s):"})," ",r.stages.toString().split(",").join(", ")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Activities:"})," ",r.activities.toString().split(",").join(", ")]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Created by:"})," ",r.updated_by]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Date created:"})," ",r.date_created.toDate().toDateString()]}),(0,i.jsxs)(h.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"ID:"})," ",r.id]}),(0,i.jsx)(v.Z,{sx:{marginTop:"32px"}})]}),(0,i.jsxs)(b.ZP,{container:!0,style:{paddingTop:"10px"},children:[(0,i.jsxs)(b.ZP,{item:!0,xs:12,md:5,children:[(0,i.jsx)(h.Z,{variant:"h6",children:"Text-Form Crop Recommendation"}),(0,i.jsx)(g.Z,{children:(null===r||void 0===r?void 0:r.smsRecommendations)||(0,i.jsx)("span",{style:{color:"#ff1744"},children:"No SMS Recommendations available."})})]}),(0,i.jsxs)(b.ZP,{item:!0,xs:12,md:7,children:[(0,i.jsx)(h.Z,{variant:"h6",children:"List of Contacts"}),t.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{children:(0,i.jsxs)(h.Z,{variant:"body2",children:["These are your contacts that you can send the recommendation thru SMS.",(0,i.jsx)("br",{}),"Need to change some of your contacts? Click"," ",(0,i.jsx)("span",{onClick:F,style:T.Z.customizedButtonLink,children:"here"}),"."]})}),(0,i.jsxs)("div",{style:{height:"400px",width:"100%",paddingTop:"10px"},children:[(0,i.jsx)(f.Z,{sx:{marginBottom:"10px"},children:(0,i.jsx)(y.Z,{id:"outlined-basic",label:"Search...",variant:"outlined",size:"small",onChange:function(n){var e,r,o=n.target.value;if(""===n.target.value)l(t);else{var i=(e=t,r=o,Z().filter(e,Z().flow(Z().identity,Z().values,Z().join,Z().toLower,Z().partialRight(Z().includes,r))));l(i)}},style:{width:"100%"}})}),(0,i.jsx)(j._,{style:{maxHeight:"350px"},rows:u,columns:R,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,onSelectionModelChange:function(n){return S(n)}})]})]}):(0,i.jsx)("div",{children:(0,i.jsxs)(h.Z,{variant:"subtitle1",children:["No contacts yet. Please add contacts first in your Phonebook\xa0",(0,i.jsx)("span",{onClick:F,style:T.Z.customizedButtonLink,children:"here"}),"."]})})]})]})]}):(0,i.jsx)(O.Z,{})})};function D(n,t,e,r,o,i,a){try{var c=n[i](a),s=c.value}catch(u){return void e(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function z(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){D(i,r,o,a,c,"next",n)}function c(n){D(i,r,o,a,c,"throw",n)}a(void 0)}))}}function W(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function H(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){W(n,t,e[t])}))}return n}var L={loading:!0,error:"",info:""};var I=(0,s.Z)((function(n){var t=(0,a.useState)(L),e=t[0],r=t[1],s=(0,a.useState)([]),f=s[0],h=s[1],x=(0,c.useRouter)();return(0,a.useEffect)((function(){if(e.loading&&Object.keys(x.query).length>0){var n=function(){var n=z(o().mark((function n(){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,u.fL)(x.query.docId);case 3:t=n.sent,r((function(n){return H({},n,{loading:!1},t)})),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(H({},L,{loading:!1,error:n.t0.message}));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),t=function(){var n=z(o().mark((function n(){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,l.K2)();case 3:t=n.sent,h(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(H({},L,{loading:!1,error:n.t0.message}));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n(),t()}}),[x,e.loading]),(0,i.jsx)(d.Z,{loading:n.loading,user:n.user,onBtnLogoutClick:n.onBtnLogoutClick,accLevel:p.DW.ADMIN,children:(0,i.jsx)(N,{report:e,loading:n.loading,contacts:f,onBackBtnClick:function(){x.push("/admin/sms/")}})})}))},558:function(n,t,e){"use strict";e.d(t,{rE:function(){return C},GK:function(){return w},mP:function(){return O},K2:function(){return k}});var r=e(4051),o=e.n(r),i=e(9669),a=e.n(i),c=e(9431);function s(n,t,e,r,o,i,a){try{var c=n[i](a),s=c.value}catch(u){return void e(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function u(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){s(i,r,o,a,c,"next",n)}function c(n){s(i,r,o,a,c,"throw",n)}a(void 0)}))}}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function d(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function p(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function f(n){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},f(n)}function h(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),r.forEach((function(t){p(n,t,e[t])}))}return n}function x(n,t){return!t||"object"!==v(t)&&"function"!==typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function m(n,t){return m=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},m(n,t)}var v=function(n){return n&&"undefined"!==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};function b(n){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,r=f(n);if(t){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return x(this,e)}}var g={BASE_API_URL:"https://amia-cis.herokuapp.com/api",CREATE_CONTACT:"".concat("https://amia-cis.herokuapp.com/api","/contact"),DELETE_CONTACT:"".concat("https://amia-cis.herokuapp.com/api","/contact"),EDIT_CONTACT:"".concat("https://amia-cis.herokuapp.com/api","/contact"),GET_CONTACTS:"".concat("https://amia-cis.herokuapp.com/api","/contacts"),PHONEBOOK:"phonebook"},y=function(n){!function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&m(n,t)}(c,n);var t,e,r,i=b(c);function c(){return l(this,c),i.apply(this,arguments)}return t=c,(e=[{key:"createContact",value:function(n){var t=this;return u(o().mark((function e(){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createRequestObject({body:n});case 2:return r=e.sent,e.next=5,a()(h({},r,{url:g.CREATE_CONTACT,method:"POST"}));case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})))()}},{key:"deleteContact",value:function(n){var t=this;return u(o().mark((function e(){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createRequestObject({body:n});case 2:return r=e.sent,e.next=5,a()(h({},r,{url:g.DELETE_CONTACT,method:"DELETE"}));case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})))()}},{key:"editContact",value:function(n){var t=this;return u(o().mark((function e(){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createRequestObject({body:n});case 2:return r=e.sent,e.next=5,a()(h({},r,{url:g.EDIT_CONTACT,method:"PATCH"}));case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})))()}},{key:"getContacts",value:function(){var n=this;return u(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.createRequestObject({});case 2:return e=t.sent,t.next=5,a()(h({},e,{url:g.GET_CONTACTS,method:"GET"}));case 5:return r=t.sent,t.abrupt("return",r.data.contacts);case 7:case"end":return t.stop()}}),t)})))()}}])&&d(t.prototype,e),r&&d(t,r),c}(c.Z),j=new y,C=j.createContact.bind(j),w=j.deleteContact.bind(j),O=j.editContact.bind(j),k=j.getContacts.bind(j)}},function(n){n.O(0,[3662,3135,9669,3203,4343,7489,3728,8152,9774,2888,179],(function(){return t=5835,n(n.s=t);var t}));var t=n.O();_N_E=t}]);