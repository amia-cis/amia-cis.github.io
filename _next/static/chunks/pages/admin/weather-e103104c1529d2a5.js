(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3359],{1158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/weather",function(){return t(2792)}])},9227:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(5893),i=t(7294),a=t(5697),o=t.n(a),l=t(1057),s=t(9536),c=t(8456),u=t(4666),d=t(1425),f=t(7645),p=t(6580),h=t(3946),m={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(e){return e.palette.grey[500]}}};function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}function v(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var n=v(i.useState({open:null}),2),t=n[0],a=n[1],o=e.loading,g=void 0!==o&&o,x=e.isOpen,y=void 0!==x&&x,j=e.showButtons,S=void 0===j||j,w=e.maxWidth,C=void 0===w?"sm":w,O=e.IconSVG,P=void 0===O?null:O,A=e.modalButtonStyles,E=void 0===A?{}:A,T=e.modalExtraHandlerCB,k=void 0===T?null:T,Z=e.modalCancelHandlerCB,_=void 0===Z?null:Z,I=e.modalConfirmHandlerCB,M=void 0===I?null:I,D=e.modalOpenHandlerCB,L=void 0===D?null:D,B=e.isDisabled,R=void 0!==B&&B,N=e.openButtonText,F=void 0===N?"Click":N,U=e.title,G=void 0===U?"Window Title":U,W=e.extraBtnText,z=void 0===W?"":W,V=e.cancelBtnText,H=void 0===V?"Cancel":V,Y=e.confirmBtnText,q=void 0===Y?"Ok":Y,J=e.contentText,K=void 0===J?"":J,Q=e.error,X=void 0===Q?"":Q,$=e.colorTheme,ee=void 0===$?"primary":$;(0,i.useEffect)((function(){a((function(e){return b({},e,{open:y})}))}),[y]);var ne=function(){a(b({},t,{open:!1})),_&&_()};return(0,r.jsxs)("div",{children:[F&&(0,r.jsxs)(l.Z,{disabled:R,disableElevation:!0,variant:"contained",color:ee,onClick:function(){a(b({},t,{open:!0})),L&&L()},sx:b({},m.button,E),children:[P&&(0,r.jsx)(P,{sx:m.icon}),F]}),(0,r.jsxs)(u.Z,{maxWidth:C,fullWidth:!0,open:t.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("span",{children:G}),(0,r.jsx)(h.Z,{"aria-label":"close",sx:m.closeButton,onClick:ne,disabled:g,children:(0,r.jsx)(s.Z,{})})]}),(0,r.jsxs)(p.Z,{sx:m.dialogContent,children:[""!==K&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:K}),(0,r.jsx)("div",{className:"error",children:X})]}),e.children]}),S&&(0,r.jsxs)(d.Z,{sx:m.dialogActions,children:[""!==z&&(0,r.jsx)(l.Z,{onClick:k||ne,disabled:g,children:z}),(0,r.jsx)(l.Z,{onClick:_||ne,disabled:g,children:H}),(0,r.jsxs)(l.Z,{variant:"contained",disabled:g,onClick:M||ne,children:[(0,r.jsx)("span",{style:{display:g?"none":"block"},children:q}),(0,r.jsx)(c.Z,{size:24,color:"secondary",sx:{display:g?"block":"none"}})]})]})]})]})}y.propTypes={loading:o().bool,isOpen:o().bool,showButtons:o().bool,maxWidth:o().string,IconSVG:o().elementType,modalButtonStyles:o().object,modalCancelHandlerCB:o().func,modalConfirmHandlerCB:o().func,modalOpenHandlerCB:o().func,modalExtraHandlerCB:o().func,openButtonText:o().string,cancelBtnText:o().string,confirmBtnText:o().string,extraBtnText:o().string,title:o().string,contentText:o().string,children:o().node,error:o().string,isDisabled:o().bool,colorTheme:o().string};var j=y},5688:function(e,n,t){"use strict";var r=t(5893),i=t(7294),a=t(5697),o=t.n(a),l=t(4866),s=t(6901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=i.forwardRef((function(e,n){return(0,r.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,a=e.severity,o=e.closeHandlerCB,s=void 0===o?function(){}:o,c=(0,i.useState)(n),d=c[0],f=c[1];(0,i.useEffect)((function(){f(n)}),[n]);var p=function(){f(!1),s()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:p,children:(0,r.jsx)(u,{onClose:p,severity:a,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:o().bool,message:o().string,severity:o().string},n.Z=d},1338:function(e,n,t){"use strict";t.d(n,{x:function(){return l},P:function(){return s}});var r=t(5893),i=t(7357);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=function(e){var n=e.children,t=e.value,l=e.index,s=o(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({role:"tabpanel",hidden:t!==l,id:"custom-tabpanel-".concat(l),"aria-labelledby":"custom-tab-".concat(l)},s,{children:t===l&&(0,r.jsx)(i.Z,{sx:{p:3},children:n})}))};var s=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},2792:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return mt}});var r=t(5893),i=t(7294),a=t(9473),o=t(4822),l=t(5243),s=t(6383),c=t(7357),u=t(44),d=t(8409),f=t(1338),p=t(9646),h=t(5861),m=t(6399),g=t(4051),x=t.n(g),b=t(512),v=t(9209),y=t(7715),j=t(901),S=t(560),w=t(1057),C=t(6886),O=t(7109),P=t(1903),A=t(265),E=t(5697),T=t.n(E),k=t(1496);function Z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var _=(0,k.ZP)((function(e){return(0,r.jsx)(P.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Z(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{width:"100%",fontSize:"12px",marginTop:n.spacing(1),"& .MuiOutlinedInput-root":{paddingRight:0,paddingLeft:0},"& .MuiOutlinedInput-input":{padding:n.spacing(1)}}})),I=_,M=t(9227),D=t(5688),L=t(7346),B=t(2701);function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var N=(0,k.ZP)((function(e){return(0,r.jsx)(w.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}({},e))}))((function(e){return{width:"150px",height:e.theme.spacing(5)}})),F=N,U={container:{marginTop:"16px",width:"100%"},textfield:{fontSize:"14px"},fileInputContainer:{height:"0px",width:"0px",overflow:"hidden"}},G=t(7840);function W(e){var n=e.file,t=e.state,a=e.name,o=e.label,l=void 0===o?"":o,s=e.textContent,u=void 0===s?"":s,d=e.fileAccepts,f=e.isDisabled,p=void 0!==f&&f,m=e.handleUpload,g=e.onUploadClick,x=e.handleResetMessage,b=e.setSelectedFile,v=e.clearFile,y=(0,i.useRef)();return(0,i.useEffect)((function(){null===n&&(y.current.value=null)}),[n]),(0,r.jsxs)(C.ZP,{container:!0,sx:U.container,children:[t.open&&(0,r.jsx)(M.Z,{isOpen:!0,title:"Upload file",contentText:t.modalMsg,loading:t.loading,openButtonText:null,modalCancelHandlerCB:x,modalConfirmHandlerCB:m}),""!==t.msg&&(0,r.jsx)(D.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:x}),(0,r.jsxs)(C.ZP,{item:!0,xs:12,lg:6,sx:U.wrapper,children:[(0,r.jsx)(h.Z,{variant:"subtitle2",children:l}),(0,r.jsx)(G.Z,{children:u}),(0,r.jsx)(I,{size:"small",disabled:!0,value:null!==n?n[0].name:"",sx:{fontSize:"10px"},InputProps:{style:U.textfield,startAdornment:(0,r.jsxs)(F,{variant:"outlined",disableElevation:!0,component:"label",disabled:t.loading||p,sx:{width:"48px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(e){null!==n&&v(e)},children:[null===n?(0,r.jsx)(B.Z,{}):(0,r.jsx)(L.Z,{}),(0,r.jsx)(c.Z,{sx:U.fileInputContainer,children:(0,r.jsx)("input",{type:"file",multiple:!0,ref:y,accept:d||".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:a||"excelfile",onChange:b,style:{border:"1px solid"}})})]}),endAdornment:(0,r.jsx)(F,{size:"small",component:"span",variant:"contained",disableElevation:!0,disabled:null===n||t.loading,sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:g,children:"Upload"})}})]})]})}W.propTypes={file:T().object,state:T().object,name:T().string,label:T().string,textContent:T().string,fileAccepts:T().string,isDisabled:T().bool,handleUpload:T().func,onUploadClick:T().func,handleResetMessage:T().func,setSelectedFile:T().func,clearFile:T().func};var z=W;function V(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function H(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){V(a,r,i,o,l,"next",e)}function l(e){V(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Y(e,n,t[n])}))}return e}var J="success",K="error",Q={msg:"",type:"",modalMsg:"Upload selected file?",loading:!1,open:!1};function X(e){var n=e.label,t=e.name,a=void 0===t?"somefile":t,o=e.textContent,l=e.fileAccepts,s=e.isDisabled,c=void 0!==s&&s,u=e.fileUploadMethod,d=e.onFileSelectedCB,f=(0,i.useState)(null),p=f[0],h=f[1],m=(0,i.useState)(Q),g=m[0],b=m[1],v=function(){var e=H(x().mark((function e(n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(n.target.files),d&&d(n.target.files);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=H(x().mark((function e(n){var t,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=18;break}return n.preventDefault(),e.prev=2,(t=new FormData).append(a,p[0]),b(q({},g,{loading:!0,modalMsg:"Uploading file..."})),e.next=8,u(t);case 8:b((function(e){return q({},Q,{msg:"Upload success.",type:J})})),h((function(e){return null})),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),r="",void 0!==e.t0.response&&(r=void 0!==e.t0.response.data?e.t0.response.data:""),""===r&&(r=e.t0.message),b((function(e){return q({},Q,{msg:r,type:K})}));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(z,{file:p,state:g,label:n,name:a,textContent:o,fileAccepts:l,isDisabled:c,handleUpload:y,onUploadClick:function(){return b(q({},g,{open:!0}))},handleResetMessage:function(){return b(Q)},setSelectedFile:v,clearFile:function(e){e.preventDefault(),h((function(e){return null})),b((function(e){return Q})),d&&d(null)}})}X.propTypes={name:T().string,label:T().string,textContent:T().string,fileAccepts:T().string,isDisabled:T().bool,fileUploadMethod:T().func,onFileSelectedCB:T().func};var $=X,ee={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"250px"}},ne=t(1908),te=t(8857),re=t(9269);var ie=function(e){var n=e.state,t=e.file,i=e.isDisabled,a=e.handleInputChange,o=e.handleClearClick,l=e.handleFileUpload,s=e.handleFileSelected;return(0,r.jsxs)(C.ZP,{container:!0,sx:ee.container,children:[(0,r.jsx)(C.ZP,{item:!0,xs:12,children:(0,r.jsx)($,{label:"Upload an excel file",name:"excelfile",fileAccepts:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",isDisabled:i,fileUploadMethod:l,onFileSelectedCB:s})}),(0,r.jsxs)(C.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Tropical Cyclone Input"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:ee.text,children:["Select PAGASA's shared seasonal weather forecast excel file on the ",(0,r.jsx)("strong",{children:"Upload an excel file"})," selector to unlock the Tropical Cyclone Input items below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Then, enter the number of tropical cyclones for each month with reference to its picture on the 3rd tab ",(0,r.jsx)("br",{})," from the selected PAGASA-shared seasonal weather forecast excel file."]})]}),(0,r.jsx)(C.ZP,{item:!0,xs:12,lg:7,children:n.map((function(e,n){return(0,r.jsx)(P.Z,{id:"month-".concat(n),size:"small",label:e.full,value:e.value,placeholder:"".concat(e.full," no. of cyclones"),sx:ee.rowItem,disabled:i||null===t,onChange:a,InputProps:{startAdornment:(0,r.jsx)(O.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})})}},n)}))}),(0,r.jsx)(C.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(C.ZP,{item:!0,xs:4,sx:{marginTop:"12px"},children:(0,r.jsx)(w.Z,{variant:"text",onClick:o,disableElevation:!0,children:"Clear All"})})]})};function ae(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function oe(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function le(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){oe(a,r,i,o,l,"next",e)}function l(e){oe(a,r,i,o,l,"throw",e)}o(void 0)}))}}function se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){se(e,n,t[n])}))}return e}function ue(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return ae(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ae(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=["1st month","2nd month","3rd month","4th month","5th month","6th month"];var fe=function(){var e=(0,i.useState)([]),n=e[0],t=e[1],o=(0,i.useState)(null),l=o[0],s=o[1],c=(0,a.I0)(),u=(0,a.v9)((function(e){return e.seasonalweather.status}));(0,i.useEffect)((function(){6===de.length&&t(de.reduce((function(e,n,t){return ue(e).concat([{id:t,full:n,month:n,isValid:!1,value:""}])}),[]))}),[false]);var d=function(){t(n.map((function(e){return ce({},e,{isValid:!1,value:""})})))},f=function(){var e=le(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=le(x().mark((function e(r,i){var a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.filter((function(e){return!e.isValid})).length>=1)){e.next=4;break}i(new Error("Please check your tropical cyclones list input")),e.next=18;break;case 4:return e.prev=4,e.next=7,(0,b.BZ)(t);case 7:return a=e.sent,e.next=10,(0,b.eg)({type:S.M.SUB_SEASONAL_COMMON,body:{data:n.map((function(e){return{id:e.id,value:e.value}})),region:"bicol",type:S.M.COMMON_SEASONAL_REGIONAL_TYPE.CYCLONES_COUNT}});case 10:c((0,v.Mj)(a.map((function(e){return ce({},e,{date_created:(0,y.NK)(e.date_created)})})))),d(),r(!0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),i(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(ie,{state:n,file:l,isDisabled:u===j.G.PENDING,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",i=e.target,a=i.id,o=i.value,l=a.split("-")[1],s=ue(n);s[l]&&("clear"===r?(s[l].value="",s[l].isValid=!1):(s[l].value=o,o.length>=10?s[l].isValid=!1:s[l].isValid=""!==o),t((function(e){return s})))},handleClearClick:d,handleFileUpload:f,handleFileSelected:function(e){s(e),e||d()}})},pe=t(5677),he=t(6863),me={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"parent","& .MuiOutlinedInput-root":{paddingLeft:function(e){return e.spacing(2)}}},btnCancel:{height:function(e){return e.spacing(5)},width:"40px",borderTopLeftRadius:0,borderBottomLeftRadius:0,"& span":{marginRight:0}},btnGroup:{marginTop:"8px","& button":{width:"110px"},display:{sm:"flex",md:"unset"},flexDirection:{sm:"column"}}},ge=t(3343);var xe=function(e){var n=e.state,t=e.message,i=e.log,a=e.isLoading,o=e.handleInputChange,l=e.handleDeleteClick,s=e.handleClearClick,c=e.handleReset,u=e.handleAddClick,d=e.handleSaveClick,f=e.handleCancelSaveClick,p=e.handleResetMsg,m=e.onSaveClick;return(0,r.jsxs)(C.ZP,{container:!0,sx:me.container,children:[t.openLoadingModal&&(0,r.jsx)(M.Z,{isOpen:!0,title:"Save changes",contentText:t.modalMsg,loading:a,openButtonText:null,modalConfirmHandlerCB:m,modalCancelHandlerCB:f}),""!==t.msg&&(0,r.jsx)(D.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:p}),(0,r.jsxs)(C.ZP,{item:!0,xs:12,sx:{marginTop:"24px",marginBottom:"8px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Weather Systems that May Affect the Region"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:me.text,children:["Below is a list of other weather systems that may affect the region. Edit the existing contents or add/delete some items,",(0,r.jsx)("br",{}),"then press the ",(0,r.jsx)("strong",{children:"SAVE"})," button to save your changes. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Press the ",(0,r.jsx)("strong",{children:"RESET"})," button to undo your changes to the last SAVE point. Press the ",(0,r.jsx)("strong",{children:"CLEAR ALL"})," button to remove all items."]}),(0,r.jsx)(G.Z,{children:a?"Loading...":"Updated by ".concat(i.updated_by," on ").concat(i.date_created,".")})]}),(0,r.jsx)(C.ZP,{item:!0,xs:12,lg:6,children:n.map((function(e,n){return(0,r.jsx)(I,{id:"misc-".concat(n),size:"small",label:e.full,value:e.value,placeholder:"Enter a weather system",sx:me.rowItem,disabled:a,onChange:o,InputProps:{startAdornment:(0,r.jsx)(O.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})}),endAdornment:(0,r.jsx)(F,{disableElevation:!0,disabled:a,startIcon:(0,r.jsx)(ge.Z,{fontSize:"small"}),sx:me.btnCancel,onClick:function(){return l(n)}})}},n)}))}),(0,r.jsx)(C.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(C.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,r.jsxs)(he.Z,{variant:"text",disableElevation:!0,size:"small",sx:me.btnGroup,disabled:a,children:[(0,r.jsx)(F,{onClick:s,children:"Clear All"}),(0,r.jsx)(F,{onClick:c,children:"Reset"}),(0,r.jsx)(F,{onClick:u,children:"Add"}),(0,r.jsx)(F,{onClick:d,variant:"contained",children:"Save"})]})})]})};function be(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ve(e,n,t[n])}))}return e}function je(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return be(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return be(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Se="success",we="error",Ce="info",Oe={msg:"",type:"",modalMsg:"Save changes to the weather systems list?",openLoadingModal:!1};var Pe=function(){var e=(0,i.useState)([]),n=e[0],t=e[1],o=(0,i.useState)(Oe),l=o[0],s=o[1],c=(0,i.useState)(!1),u=c[0],d=c[1],f=(0,a.I0)(),p=(0,i.useRef)(!1),h=(0,a.v9)((function(e){return e.seasonalcommon_misc})),m=h.ids,g=h.entities,x=h.status,b=h.updated_by,v=h.date_created;(0,i.useEffect)((function(){return p.current=!0,f((0,pe.h)()).unwrap().then((function(){p.current&&d(!0)})),function(){p.current=!1}}),[f]),(0,i.useEffect)((function(){x===j.G.FULLFILLED&&m.length>0&&u&&y()}),[x,m,u,y]);var y=(0,i.useCallback)((function(){p.current&&(s((function(e){return Oe})),t((function(e){return Object.values(g).map((function(e){return ye({},e,{isValid:!0})}))})))}),[g]);return(0,r.jsx)(xe,{state:n,message:l,log:{updated_by:b,date_created:v},isLoading:x===j.G.PENDING,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",i=e.target,a=i.id,o=i.value,l=a.split("-")[1],s=je(n);s[l]&&("clear"===r?(s[l].value="",s[l].isValid=!1):(s[l].value=o,o.length>=30?s[l].isValid=!1:s[l].isValid=""!==o),p.current&&t((function(e){return s})))},handleClearClick:function(){return t([])},handleDeleteClick:function(e){p.current&&t((function(t){return n.reduce((function(n,t,r){return r!==e&&(n=je(n).concat([t])),n}),[]).map((function(e,n){return ye({},e,{id:n})}))}))},handleReset:y,handleAddClick:function(){if(25!==n.length&&p.current){var e=je(n);e.push({id:e.length,value:""}),t(e)}},handleSaveClick:function(){return s(ye({},l,{openLoadingModal:!0}))},handleCancelSaveClick:function(){return s(ye({},l,{openLoadingModal:!1}))},handleResetMsg:function(){return s(Oe)},onSaveClick:function(){p.current&&(void 0===n.find((function(e){return""===e.value}))?(s(ye({},l,{modalMsg:"Saving..."})),f((0,pe.O)(n)).unwrap().then((function(){p.current&&s((function(e){return ye({},Oe,{msg:"Successfully saved changes.",type:Se})}))})).catch((function(e){p.current&&s((function(n){return ye({},Oe,{msg:e,type:we})}))}))):s((function(e){return ye({},e,{msg:"Please check your input",type:Ce,openLoadingModal:!1})})))}})},Ae=t(9132);var Ee=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:function(e){return e.spacing(1)}},children:(0,r.jsx)(h.Z,{variant:"h6",children:"Seasonal Weather Forecast Updater"})}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{variant:"h7",children:(0,r.jsx)("strong",{children:"Upload an Excel File"})}),(0,r.jsxs)(h.Z,{variant:"body2",sx:Ae.Z.subheader,children:["Update ACAP's seasonal weather forecast rainfall, tropical cyclones, and weather systems affecting the region data by uploading the updated seasonal weather forecast raw data in the excel file provided by PAGASA by clicking the SEARCH button, followed by clicking the UPLOAD button under the ",(0,r.jsx)("strong",{children:"Upload an Excel File"})," option below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"You can use the attached seasonal weather forecast excel file from PAGASA as an example when uploading an excel file. The excel file should follow the format and structure of the attached sample.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://firebasestorage.googleapis.com/v0/b/climate-webservices.appspot.com/o/files%2Fseasonal_forecast_example_v2.xlsx?alt=media&token=4835bc36-3e63-4200-b83b-a00616c14cda",target:"__blank",children:"[example excel file]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{withBorder:!0}),(0,r.jsx)(fe,{}),(0,r.jsx)(Pe,{})]})]})},Te=t(7682),ke=t(1234),Ze=t(7918),_e=t(8456),Ie=t(6901);function Me(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var De=(0,k.ZP)((function(e){return(0,r.jsx)(c.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Me(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:n.spacing(1),marginBottom:n.spacing(3),"& ul":{listStyle:"none",paddingLeft:n.spacing(3)}}})),Le=De;var Be=function(e){return(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(4)}},variant:"h6",children:e.title}),(0,r.jsx)(Le,{children:e.children})]})},Re=t(7426),Ne=t(5675),Fe=t(6660);var Ue=function(e){var n=e.text,t=e.label,i=e.imagePath;return(0,r.jsx)(c.Z,{sx:{borderRadius:"4px",margin:"4px",padding:"8.5px 14px 8.5px 8.5px",fontSize:"1rem",lineHeight:"1.4375em","& span":{marginLeft:"8px"}},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(Ne.default,{unoptimized:!0,src:(0,Fe.assetPrefixer)(i),height:20,width:20,loader:Fe.imageLoader,alt:"moon phase"}),(0,r.jsxs)("span",{children:[t,":"]}),(0,r.jsx)("span",{children:n})]})})},Ge={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"16px",maxWidth:{xs:"100%",sm:"300px"}},btnGroup:{"& button":{width:"110px"},display:{sm:"flex",md:"unset"},flexDirection:{sm:"column"}}};var We=function(e){var n=e.state,t=e.message,i=e.log,a=e.isDisabled,o=e.isViewInfo,l=e.handleInputChange,s=e.handleClearClick,u=e.handleSaveClick,d=e.handleCancelSaveClick,f=e.handleSwitchClick,p=e.onSaveClick;return(0,r.jsxs)(C.ZP,{container:!0,sx:Ge.container,children:[t.openLoadingModal&&(0,r.jsx)(M.Z,{isOpen:!0,title:"Save changes",contentText:t.modalMsg,loading:a,openButtonText:null,modalConfirmHandlerCB:p,modalCancelHandlerCB:d}),""!==t.msg&&(0,r.jsx)(D.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:d}),(0,r.jsxs)(C.ZP,{item:!0,xs:12,sx:{marginTop:"32px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Moon Phases Input"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:Ge.text,children:["Listed below are the moon phases data for the 10-Day weather outlook PDF moon phases section.",(0,r.jsx)("br",{}),"Click the ",(0,r.jsx)("strong",{children:"EDIT"})," button to start editing it's content."]}),(0,r.jsxs)(G.Z,{children:["Updated by ",i.updated_by," on ",i.date_created,"."]})]}),(0,r.jsxs)(C.ZP,{item:!0,xs:12,lg:7,sx:{marginTop:"8px"},children:[o?n.map((function(e,n){return(0,r.jsx)(Ue,{text:e.value,label:e.label,imagePath:e.image},n)})):n.map((function(e,n){return(0,r.jsx)(P.Z,{id:"month-".concat(n),size:"small",label:e.label,value:e.value,placeholder:"".concat(e.label," date i.e., 29-Jun-22"),sx:Ge.rowItem,disabled:a,onChange:l,InputProps:{startAdornment:(0,r.jsx)(O.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})})}},n)})),(0,r.jsx)(c.Z,{sx:{marginTop:"24px",marginLeft:"8px"},children:(0,r.jsx)(he.Z,{variant:"text",size:"small",disabled:a,disableElevation:!0,sx:Ge.btnGroup,children:o?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(F,{variant:"contained",onClick:f,children:"Edit"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{onClick:s,children:"Clear All"}),(0,r.jsx)(F,{onClick:f,children:"Cancel"}),(0,r.jsx)(F,{variant:"contained",onClick:u,disabled:a,children:"Save"})]})})})]})]})};function ze(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ve(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function He(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){He(e,n,t[n])}))}return e}function qe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||Ke(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,n){if(e){if("string"===typeof e)return ze(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ze(e,n):void 0}}var Qe={NEW_MOON:{code:"new_moon",label:"New Moon"},FIRST_QUARTER:{code:"first_quarter",label:"First Quarter"},FULL_MOON:{code:"full_moon",label:"Full Moon"},LAST_QUARTER:{code:"last_quarter",label:"Last Quarter"}},Xe={msg:"",type:"",action:"view",loading:!1,modalMsg:"Save changes to the moon phases list?",openLoadingModal:!1},$e={updated_by:"",date_created:""};var en=function(){var e=(0,i.useState)([]),n=e[0],t=e[1],a=(0,i.useState)(Xe),o=a[0],l=a[1],s=(0,i.useState)($e),c=s[0],u=s[1],d=(0,i.useState)(!0),f=d[0],p=d[1],h=(0,i.useRef)(!1),m=qe((0,Te.ky)(S.M.WEATHER_FORECASTS,"bicol/".concat(S.M.SUB_TENDAY_COMMON,"/").concat(S.M.COMMON_TENDAY_TYPE.MOON_PHASES)),3),g=m[0],v=m[1],j=m[2];(0,i.useEffect)((function(){return h.current=!0,t(Object.values(Qe).reduce((function(e,n,t){return Je(e).concat([{id:t,value:"-",phase:n.code,label:n.label,image:"images/icons/moon/".concat(n.code,".svg"),isValid:!1}])}),[])),function(){h.current=!1}}),[]),(0,i.useEffect)((function(){!v&&h.current&&g&&(w(g),u((function(e){return Ye({},e,{updated_by:g.updated_by,date_created:(0,y.Xn)(g.date_created)})}))),""!==j&&h.current&&l(Ye({},Xe,{msg:j,type:Re.C7.ERROR}))}),[g,v,j,w]);var w=(0,i.useCallback)((function(e){if(e){var r=Je(n);e.data.forEach((function(e,n){r[n].value=e.value,r[n].isValid=""!==e.value})),t((function(e){return r}))}}),[n]),C=function(e){f||w(e||g),p((function(e){return!e}))},O=function(){var e,t=(e=x().mark((function e(){var t,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.current){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,l(Ye({},Xe,{loading:!0,openLoadingModal:!0,modalMsg:"Saving changes..."})),e.next=6,(0,b.eg)({type:S.M.SUB_TENDAY_COMMON,body:{region:"bicol",type:S.M.COMMON_TENDAY_TYPE.MOON_PHASES,data:n.map((function(e,n){return{id:n,value:e.value,phase:e.phase}}))}});case 6:t=e.sent,h.current&&(l((function(e){return Ye({},Xe,{msg:"Successfully saved changes",type:Re.C7.SUCCESS})})),u((function(e){return Ye({},e,{updated_by:t.updated_by,date_created:(0,y.NK)(t.date_created)})})),C(t)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),h.current&&(r="",void 0!==e.t0.response&&(r=void 0!==e.t0.response.data?e.t0.response.data:""),""===r&&(r=e.t0.message),l(Ye({},Xe,{msg:r,type:Re.C7.ERROR})));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Ve(a,r,i,o,l,"next",e)}function l(e){Ve(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,r.jsx)(We,{state:n,message:o,log:c,isDisabled:o.loading,isViewInfo:f,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",i=e.target,a=i.id,o=i.value,l=a.split("-")[1],s=Je(n);s[l]&&("clear"===r?(s[l].value="",s[l].isValid=!1):(s[l].value=o,o.length>=10?s[l].isValid=!1:s[l].isValid=""!==o),t((function(e){return s})))},handleClearClick:function(){t(n.map((function(e){return Ye({},e,{isValid:!1,value:""})})))},handleSaveClick:function(){void 0===n.find((function(e){return""===e.value}))?l(Ye({},o,{openLoadingModal:!0})):l((function(e){return Ye({},e,{msg:"Please check your input",type:Re.C7.INFO,openLoadingModal:!1})}))},handleCancelSaveClick:function(){return l(Xe)},handleSwitchClick:function(){return C(null)},onSaveClick:O})},nn={subheader:function(e){return{marginBottom:e.spacing(2),color:"gray",marginTop:e.spacing(1),"& a":{color:e.palette.green.dark,textDecoration:"none"},"& a:visited":{color:e.palette.green.dark},"& a:hover, span:hover":{textDecoration:"underline"}}},summary:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(3)},"& ul":{listStyle:"none"}},upload:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"90px",border:"1px solid gray",borderRadius:"8px",fontSize:"14px",color:function(e){return e.palette.text.secondary},padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(1)}},notification:{maxWidth:"500px",marginBottom:function(e){return e.spacing(2)}}},tn=(0,k.ZP)("input")({display:"none"});var rn=function(e){var n=e.files,t=void 0===n?[]:n,i=e.status,a=e.logs,o=e.handleSubmit,l=e.handleSelectFiles;return(0,r.jsxs)(c.Z,{sx:{"& li":{fontSize:"14px"}},children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"10-Day Weather Forecast Updater"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:nn.subheader,children:["ACAP's system updates its internal 10-Day Weather Forecast data by automatically downloading, parsing, and uploading the 10-day weather forecast excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10-Day Climate Forecast"})," web page to ACAP's database.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"ACAP's daily automatic 10-Day Weather Forecast updating runs daily between 9:00 AM to 12:00 PM PH time.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"This panel updates the site's 10-Day Weather Forecast data by allowing admins to manually upload the excel files downloaded from PAGASA's web page. Follow the steps to update the site's 10-Day Weather Forecast data:"]}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:["Download all (10) excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10 Day Climate Forecast"})," web page."]}),(0,r.jsx)("li",{children:"Press the SELECT FILES button and select all the excel files."}),(0,r.jsx)("li",{children:"Press the SUBMIT button."}),(0,r.jsx)("li",{children:"Wait for the upload process to finish."})]}),(0,r.jsx)(Be,{title:"Current Data Update Summary",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",a.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",a.date_valid]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",a.date_forecast]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",a.date_synced]})]})}),(0,r.jsx)(c.Z,{sx:nn.upload,children:0===t.length?(0,r.jsx)("span",{children:"Select excel files."}):(0,r.jsx)(c.Z,{sx:{"& div":{margin:"2px"}},children:Array.from(t).map((function(e,n){return(0,r.jsx)(Ze.Z,{label:e.name,size:"small"},"excel-".concat(n))}))})}),(0,r.jsxs)(c.Z,{sx:nn.notification,children:[!i.loading&&""!==i.error&&(0,r.jsx)(Ie.Z,{severity:"error",children:i.error}),!i.loading&&""!==i.msg&&(0,r.jsx)(Ie.Z,{severity:"success",children:i.msg})]}),(0,r.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,r.jsx)(tn,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!0,type:"file",name:"excel-files",onChange:l,disabled:i.loading}),(0,r.jsxs)(F,{variant:"text",component:"span",size:"small",disabled:i.loading,disableElevation:!0,sx:{width:"110px"},children:["Select Files",(0,r.jsx)(_e.Z,{size:20,color:"secondary",sx:{display:i.loading?"block":"none"}})]}),(0,r.jsx)(F,{type:"submit",variant:"contained",size:"small",onClick:o,disabled:i.loading,disableElevation:!0,sx:{width:"110px"},children:"Submit"})]}),(0,r.jsx)(en,{})]})};function an(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function on(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ln(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){on(e,n,t[n])}))}return e}var sn={loading:!1,error:"",msg:""},cn={updated_by:"",date_forecast:"",date_synced:"",date_valid:""};var un=function(e){var n=e.getDateToString,t=(0,i.useState)([]),a=t[0],o=t[1],l=(0,i.useState)(sn),s=l[0],c=l[1],u=(0,i.useState)(cn),d=u[0],f=u[1],p=(0,Te.tl)(S.M.WEATHER_FORECASTS,"bicol","ten_day","name",1),h=p.documents,m=p.loading,g=p.error;(0,i.useEffect)((function(){!m&&""===g&&h.length>0&&v(h)}),[m,g,h,v]);var v=(0,i.useCallback)((function(e){var t=Object.values(e[0].municipalities)[0][0],r={updated_by:e[0].updated_by,date_synced:n(e[0].date_created)};r.date_forecast=t.date_forecast,r.date_valid=t.date_range,f(r)}),[n]),y=function(){var e,n=(e=x().mark((function e(){var n,t,r,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new FormData,t=0;t<a.length;t+=1)n.append("excel-files",a[t]);return e.prev=2,c(ln({},sn,{loading:!0})),e.next=6,(0,b.pc)(n);case 6:c((function(e){return ln({},sn,{loading:!1,msg:"Upload success."})})),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),r=e.t0.response?e.t0.response.data:e.t0.message,c(ln({},sn,{loading:!1,error:r})),e.abrupt("return");case 14:return e.prev=14,e.next=17,(0,ke.vx)();case 17:i=e.sent,v(i),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error(e.t1.message);case 24:case"end":return e.stop()}}),e,null,[[2,9],[14,21]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){an(a,r,i,o,l,"next",e)}function l(e){an(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(rn,{files:a,status:s,logs:d,handleSubmit:y,handleSelectFiles:function(e){c(sn),o(e.target.files)}})},dn=t(5635),fn=t(7392),pn=t(6295),hn={container:{minHeight:"420px",margin:"8px","& .windsignalrow":{margin:"24px 0 24px 0"}}};function mn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){mn(e,n,t[n])}))}return e}var xn=function(e){var n=e.item,t=e.signalNum,i=void 0===t?"":t,o=e.onItemChange,l=(0,a.v9)((function(e){return e.provinces})),s=l.ids,u=l.entities,d=l.status,f=(0,a.v9)((function(e){return e.municipalities})),p=f.ids,m=f.entities,g=f.status;return(0,r.jsxs)(c.Z,{sx:hn.container,children:[(0,r.jsxs)(c.Z,{className:"windsignalrow",children:[(0,r.jsx)(h.Z,{variant:"h5",color:"primary",children:(0,r.jsx)("strong",{children:"Wind Signal # ".concat(i)})}),(0,r.jsxs)(h.Z,{variant:"body2",sx:{marginTop:"8px"},children:["Select affected ",(0,r.jsx)("strong",{children:"provinces"})," and ",(0,r.jsx)("strong",{children:"municipalities"}),". Press the ",(0,r.jsx)("strong",{children:"OK"})," button to confirm your selection."]})]}),(0,r.jsx)(c.Z,{className:"windsignalrow",children:(0,r.jsx)(pn.Z,{disablePortal:!0,id:"province",value:n[0],disabled:0===s.length||d===j.G.PENDING||g===j.G.PENDING,options:s.map((function(e){return u[e]})),renderInput:function(e){return(0,r.jsx)(P.Z,gn({},e,{variant:"standard",label:0===s.length?"Loading...":"Select a province"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){o({target:{id:"province",value:n,signal:i}})}})}),(0,r.jsx)(c.Z,{className:"windsignalrow",children:(0,r.jsx)(pn.Z,{multiple:!0,id:"municipalities",value:n.municipalities,options:p.map((function(e){return m[e]})),ListboxProps:{style:{maxHeight:"200px"}},sx:{".inputRoot":{color:"res"}},disabled:null===n.province||0===s.length||0===p.length||d===j.G.PENDING||g===j.G.PENDING,renderInput:function(e){return(0,r.jsx)(P.Z,gn({},e,{variant:"standard",label:0===s.length?"Loading...":"Select municipalities"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},onChange:function(e,n){o({target:{id:"municipalities",value:n,signal:i}})}})})]})},bn=t(1427),vn=t(7634),yn={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"24px",maxWidth:"parent","& .MuiOutlinedInput-root":{paddingLeft:function(e){return e.spacing(2)}}},btnCancel:{height:function(e){return e.spacing(5)},width:"40px",borderTopLeftRadius:0,borderBottomLeftRadius:0,"& span":{marginRight:0}},btnGroup:{marginTop:"8px","& button":{width:"110px"},display:{sm:"flex",md:"unset"},flexDirection:{sm:"column"}},listContainer:{marginTop:"8px",padding:"16px",display:"flex",justifyContent:"space-between"}},jn=t(8364);var Sn=function(e){var n=e.state,t=e.appstate,o=e.message,l=e.windsignalitems,s=e.updateinfo,u=e.onConfirmClick,d=e.onCancelClick,f=e.onLocationItemChange,m=e.handleInputChange,g=e.handleAddClick,x=e.handleClearClick,b=e.handleDeleteClick,v=e.handleDeleteProvince,y=e.handleReset,S=e.handleSaveClick,w=e.handleAppState,P=e.currentItem,E=(0,a.v9)((function(e){return e.provinces.status})),T=(0,a.v9)((function(e){return e.municipalities.status})),k=(0,i.useState)(!0),Z=k[0],_=k[1],L=(0,i.useState)(0),B=L[0],R=L[1],N=(0,i.useState)(!1),U=N[0],W=N[1];return(0,i.useEffect)((function(){var e=E===j.G.PENDING||T===j.G.PENDING||o.saving;_(e)}),[E,T,o.saving]),(0,r.jsxs)(c.Z,{sx:{minWidth:"300px",width:"100%",marginTop:"40px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Wind Speed List Editor"}),""!==o.MSG&&(0,r.jsx)(D.Z,{openSnackbar:!0,message:o.MSG,severity:o.TYPE}),(0,r.jsx)(M.Z,{openButtonText:null,maxWidth:"sm",title:o.TITLE,loading:o.saving,contentText:t!==fn.yf.EDIT?o.MODAL_MSG:null,modalConfirmHandlerCB:function(){switch(t){case fn.yf.EDIT:W((function(e){return!e})),u(B);break;case fn.yf.SAVE:S()}},modalCancelHandlerCB:function(){W((function(e){return!e})),d()},isOpen:t===fn.yf.EDIT?U&&o.openLoadingModal:o.openLoadingModal,children:t===fn.yf.EDIT&&(0,r.jsx)(xn,{item:P,signalNum:B,onItemChange:f})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,md:4,children:(0,r.jsxs)(C.ZP,{container:!0,spacing:3,children:[0===n.length?(0,r.jsx)(C.ZP,{item:!0,xs:12,lg:7,children:(0,r.jsx)(vn.Z,{message:"There are no wind signal data. Encode wind signal data now for future viewing.",style:{marginTop:"16px"}})}):(0,r.jsx)(C.ZP,{item:!0,xs:12,lg:7,children:n.map((function(e,n){return(0,r.jsxs)(bn.Z,{sx:{marginTop:"16px"},children:[(0,r.jsx)(I,{id:"wsignal-".concat(n),size:"small",label:e.full,value:e.value,disabled:Z,placeholder:"Enter a wind signal number",sx:yn.rowItem,onChange:m,InputProps:{startAdornment:(0,r.jsx)(O.Z,{position:"start",children:""===e.value?(0,r.jsx)(ne.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(te.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(re.Z,{fontSize:"small",sx:{color:A.Z[500]}})}),endAdornment:(0,r.jsxs)(he.Z,{disableElevation:!0,children:[(0,r.jsx)(F,{size:"small",disabled:""===e.value||!e.isValid||Z,sx:{width:"80px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px"},onClick:function(){!function(e){W((function(e){return!e})),R(e)}(e.value),w(fn.yf.EDIT,n)},children:"Edit"}),(0,r.jsx)(F,{startIcon:(0,r.jsx)(ge.Z,{fontSize:"small"}),sx:yn.btnCancel,onClick:function(){return b(n,e.value)},disabled:Z})]})}},n),l.map((function(n,t){if(n.signal===parseInt(e.value))return(0,r.jsxs)(p.Z,{sx:yn.listContainer,children:[(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(h.Z,{variant:"body1",children:(0,r.jsx)("strong",{children:n.province.label})}),(0,r.jsxs)(h.Z,{variant:"body2",children:["(",n.municipalities.map((function(e){return e.label})).toString().split(",").join(", "),")"]})]}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(F,{sx:yn.btnCancel,startIcon:(0,r.jsx)(jn.Z,{fontSize:"small"}),disabled:Z,onClick:function(){v(parseInt(e.value),n.province.label)}})})]},"itm-".concat(t))}))]},n)}))}),(0,r.jsxs)(C.ZP,{item:!0,xs:12,lg:5,children:[(0,r.jsx)(p.Z,{sx:{width:"parent",marginTop:"16px"},children:(0,r.jsx)(G.Z,{sx:{fontWeight:400,fontSize:"0.875rem",lineHeight:"1.43",letterSpacing:"0.01071em",color:"rgba(0, 0, 0, 0.6)"},children:'Encode wind speed for hand-picked Bicol provinces and municipalities here. This data will be display on ACAP"s Special Weather Forecast section and used as reference on the Tropical Cyclone bulletins, if a typhoon will be detected from PAGASA"s web page.'})}),(0,r.jsx)(p.Z,{sx:{width:"parent",marginTop:"16px"},children:(0,r.jsx)(G.Z,{children:s})})]})]})}),(0,r.jsx)(C.ZP,{item:!0,xs:12,sx:{marginTop:"40px"},children:(0,r.jsxs)(he.Z,{variant:"text",disableElevation:!0,size:"small",sx:yn.btnGroup,disabled:Z,children:[(0,r.jsx)(F,{onClick:x,children:"Clear All"}),(0,r.jsx)(F,{onClick:y,children:"Reset"}),(0,r.jsx)(F,{onClick:g,children:"Add"}),(0,r.jsx)(F,{onClick:function(){W((function(e){return!e})),w(fn.yf.SAVE)},variant:"contained",children:"Save"})]})})]})};function wn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Cn(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function On(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Pn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){On(e,n,t[n])}))}return e}function An(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||Tn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e){return function(e){if(Array.isArray(e))return wn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e,n){if(e){if("string"===typeof e)return wn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wn(e,n):void 0}}var kn,Zn={id:-1,signal:-1,province:null,municipalities:[]},_n={MSG:"",TITLE:"",TYPE:"",MODAL_MSG:"",openLoadingModal:!1,saving:!1},In=(On(kn={},fn.yf.SAVE,{TITLE:"Save changes",MSG:"Save changes to the wind speed list?",SUCCESS:"Changes saved."}),On(kn,fn.yf.SAVING,{TITLE:"Save changes",MSG:"Saving data...",SUCCESS:"Changes saved."}),On(kn,fn.yf.EDIT,{TITLE:"Affected Provinces and Municipalities Form",MSG:"",SUCCESS:"Changes saved."}),kn);var Mn=function(){var e=(0,a.v9)((function(e){return e.provinces})),n=e.ids,t=e.entities,l=e.status,s=(0,i.useState)([]),c=s[0],u=s[1],d=(0,i.useState)(_n),f=d[0],p=d[1],h=(0,i.useState)([]),m=h[0],g=h[1],v=(0,i.useState)(Zn),w=v[0],C=v[1],O=(0,i.useState)(fn.yf.VIEW),P=O[0],A=O[1],E=(0,i.useState)(""),T=E[0],k=E[1],Z=(0,i.useState)(-1),_=(Z[0],Z[1]),I=(0,a.I0)(),M=(0,i.useRef)(!1),D=An((0,Te.ky)(S.M.WEATHER_FORECASTS,"bicol/".concat(S.M.SUB_SPECIAL_COMMON,"/").concat(S.M.COMMON_SPECIAL_TYPE.WIND_SPEED)),3),L=D[0],B=D[1],R=D[2];(0,i.useEffect)((function(){return M.current=!0,function(){M.current=!1}}),[]),(0,i.useEffect)((function(){B||l!==j.G.FULLFILLED||N()}),[n,B,l,R,N]),(0,i.useEffect)((function(){0===n.length&&I((0,o.Q)())}),[I,n.length]);var N=(0,i.useCallback)((function(){var e=L.data.map((function(e){return e.value})).filter((function(e,n,t){return t.indexOf(e)===n})).map((function(e,n){return{id:n,value:e.toString(),isValid:!0,full:"Wind Signal"}})),n=L.data.map((function(e,n){return{id:n,signal:e.value,province:Object.values(t).find((function(n){return n.label===e.province})),municipalities:e.municipalities.map((function(e,n){return{id:n,label:e}}))}}));M.current&&(u(n),g(e),k("Updated by ".concat(L.updated_by," on ").concat((0,y.Xn)(L.date_created))))}),[L,t]),F=function(e,n){if(M.current){for(var t=En(c),r=0;r<t.length;r+=1)if(t[r].signal===parseInt(n)){for(var i=0;i<t[r].municipalities.length;i+=1)t[r].municipalities[i]=null;t[r].province=null,t[r]=null}u((function(e){return t.filter((function(e){return null!==e})).map((function(e,n){return Pn({},e,{id:n})}))}));var a=En(m);a[e]=null,a.splice(e,1),g((function(e){return a.map((function(e,n){return Pn({},e,{id:n})}))}))}},U=function(){var e,n=(e=x().mark((function e(){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===m.find((function(e){return""===e.value}))&&void 0===m.find((function(e){return!1===e.isValid}))){e.next=3;break}return p((function(e){return Pn({},_n,{MSG:"Please check your input",TYPE:fn.J3.INFO,openLoadingModal:!e.openLoadingModal})})),e.abrupt("return");case 3:if(!(c.filter((function(e){return 0===e.municipalities.length})).length>0||c.map((function(e){return e.signal})).filter((function(e,n,t){return t.indexOf(e)===n})).length!==m.length)){e.next=6;break}return p((function(e){return Pn({},_n,{MSG:"Please check your input",TYPE:fn.J3.INFO,openLoadingModal:!e.openLoadingModal})})),e.abrupt("return");case 6:return e.prev=6,p((function(e){return Pn({},e,{MODAL_MSG:"Saving data...",saving:!0})})),e.next=10,(0,b.eg)({type:S.M.SUB_SPECIAL_COMMON,body:{data:c.map((function(e){return Pn({},e,{value:e.signal,province:e.province.label,municipalities:e.municipalities.map((function(e){return e.label}))})})),region:"bicol",type:S.M.COMMON_SPECIAL_TYPE.WIND_SPEED}});case 10:n=e.sent,M.current&&(p((function(e){return Pn({},_n,{MSG:"Data successfully saved.",TYPE:fn.J3.SUCCESS,openLoadingModal:!e.openLoadingModal,saving:!1})})),k((function(e){return"Updated by ".concat(n.updated_by," on ").concat((0,y.NK)(n.date_created))}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),M.current&&p(Pn({},_n,{MSG:e.t0.message,TYPE:fn.J3.ERROR,openLoadingModal:!1,saving:!1}));case 17:case"end":return e.stop()}}),e,null,[[6,14]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Cn(a,r,i,o,l,"next",e)}function l(e){Cn(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(Sn,{state:m,appstate:P,message:f,windsignalitems:c,updateinfo:T,onConfirmClick:function(e){var n=En(c);if(null!==w.province){if(function(e){for(var n=function(e){if(c[e].province.label===w.province.label&&c[e].signal!==w.signal){var n=c[e].municipalities.map((function(e){return e.label}));if(w.municipalities.map((function(e){return e.label})).some((function(e){return n.indexOf(e)>=0})))return t=!0,"break"}},t=!1,r=0;r<c.length&&"break"!==n(r);r+=1);return t}())return p((function(e){return Pn({},_n,{MSG:"One or more of your selected municipalities have duplicates.",TYPE:fn.J3.INFO,openLoadingModal:!0})})),void C(Zn);var t=c.findIndex((function(n){return n.signal===parseInt(e)&&n.province.label===w.province.label}));if(-1===t){var r={id:c.length,signal:parseInt(e),province:w.province,municipalities:En(w.municipalities)};n.push(r);var i=[Pn({},r,{municipalities:r.municipalities})];u((function(e){return En(e).concat(En(i))}))}else n[t].municipalities=En(w.municipalities),u((function(e){return n}));C(Zn)}},onCancelClick:function(){C(Zn),p((function(e){return Pn({},e,{openLoadingModal:!1})}))},onLocationItemChange:function(e){var n=e.target,t=n.id,r=n.value,i=n.signal;if(void 0!==r&&null!==r){if("province"===t){var a=r.label,o=c.filter((function(e){return e.province.label===a&&e.signal===parseInt(i)}));1===o.length?C(o[0]):C(Pn({},Zn,{id:c.length,signal:parseInt(i),province:Pn({},r)})),I((0,dn.q)(a))}"municipalities"===t&&C((function(e){return Pn({},e,{municipalities:r})}))}else if("province"===t)C(Zn)},handleInputChange:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",t=e.target,r=t.id,i=t.value,a=r.split("-")[1],o=En(m);if(o[a]){if("clear"===n)o[a].value="",o[a].isValid=!1;else{if(""!==i&&void 0!==m.find((function(e){return e.value===i})))return void(o[a].isValid=!1);var l=Pn({},o[a]);o[a].value=i,i.length>2||isNaN(i)||i>10?o[a].isValid=!1:(o[a].isValid=""!==i,""===i&&F(r,l.value))}M.current&&g((function(e){return o}))}},handleAddClick:function(){if(5!==m.length&&M.current){var e=En(m);e.push({id:e.length,value:"",full:"Wind Signal"}),g(e)}},handleClearClick:function(){g([]),u([])},handleDeleteClick:F,handleDeleteProvince:function(e,n){for(var t=En(c),r=0;r<t.length;r+=1)if(t[r].signal===parseInt(e)&&t[r].province.label===n){for(var i=0;i<t[r].municipalities.length;i+=1)t[r].municipalities[i]=null;t[r].province=null,t[r]=null}u((function(e){return t.filter((function(e){return null!==e})).map((function(e,n){return Pn({},e,{id:n})}))}))},handleReset:function(){M.current&&N()},handleSaveClick:U,handleAppState:function(e,n){_((function(e){return null!==n&&void 0!==n?n:-1})),A((function(n){return e})),p((function(n){return Pn({},n,{MSG:"",MODAL_MSG:In[e].MSG,TITLE:In[e].TITLE,openLoadingModal:!0})}))},currentItem:w})};var Dn=function(e){var n=e.state,t=e.cycloneLoading,i=e.onSyncPress;return(0,r.jsxs)(c.Z,{sx:{fontSize:"14px"},children:[(0,r.jsx)(D.Z,{openSnackbar:""!==n.error||""!==n.msg,message:""!==n.error?n.error:n.msg,severity:""!==n.error?"error":"success"}),(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"Tropical Cyclone Bulletin Updater"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:nn.subheader,children:["ACAP's system updates its ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," information by automatically scanning, extracting, and uploading the latest Tropical Cyclone data from PAGASA's ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP's database.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"ACAP's  automatic Special Weather Advisory updates run daily every (2) two hours, starting from midnight PH time, with a lag time of 20 minutes to (1) one and a half hours.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"This panel updates ACAP's ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," content by manually initiating the  process of syncing PAGASA's latest published tropical cyclone data from their ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP."]}),(0,r.jsx)(h.Z,{variant:"body2",sx:nn.subheader,children:"Press the SYNC button below to start the data syncing process."}),(0,r.jsx)(Be,{title:"Current Data Update Summary",children:!t&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",n.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",n.date_updated]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Summary:"}),"\xa0 ",n.summary]})]})}),(0,r.jsx)(w.Z,{variant:"contained",onClick:i,disabled:t||n.loading,children:"Sync"}),(0,r.jsx)("hr",{}),(0,r.jsx)(Mn,{})]})},Ln=t(1029),Bn=t(9669),Rn=t.n(Bn),Nn=t(9431);function Fn(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Un(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Gn(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function zn(e){return zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zn(e)}function Vn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Wn(e,n,t[n])}))}return e}function Hn(e,n){return!n||"object"!==qn(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Yn(e,n){return Yn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},Yn(e,n)}var qn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Jn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=zn(e);if(n){var i=zn(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Hn(this,t)}}var Kn={SPECIAL_WEATHER_CYCLONE:"".concat("https://amia-cis.onrender.com/api","/cyclone")},Qn=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Yn(e,n)}(a,e);var n,t,r,i=Jn(a);function a(){return Un(this,a),i.apply(this,arguments)}return n=a,t=[{key:"updateSpecialWeather",value:function(e){var n,t=this;return(n=x().mark((function n(){var r,i;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,Rn()(Vn({},r,{url:Kn.SPECIAL_WEATHER_CYCLONE,method:"POST"}));case 5:return i=n.sent,n.abrupt("return",i.data);case 7:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(e){Fn(a,r,i,o,l,"next",e)}function l(e){Fn(a,r,i,o,l,"throw",e)}o(void 0)}))})()}}],t&&Gn(n.prototype,t),r&&Gn(n,r),a}(Nn.Z),Xn=new Qn,$n=Xn.updateSpecialWeather.bind(Xn);function et(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function nt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function tt(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function rt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){tt(e,n,t[n])}))}return e}function it(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return et(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return et(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var at=t(7294),ot=at.useEffect,lt=at.useState,st=at.useRef,ct={loading:!1,error:"",msg:"",updated_by:"",date_updated:"",summary:""};var ut=function(e){var n=e.getDateToString,t=it((0,Te.ky)(Ln.K.GLOBAL_COLLECTIONS,Ln.K.CYCLONE_ADVISORY),3),i=t[0],a=t[1],o=t[2],l=it(lt(ct),2),s=l[0],c=l[1],u=st(!1);ot((function(){return u.current=!0,function(){u.current=!1}}),[]),ot((function(){if(!a){if(!u.current)return;c(o?{error:o}:{loading:!1,error:"",msg:"",updated_by:"system"===i.updated_by?"system":i.email,date_updated:n(i.date_updated),summary:i.summary})}}),[a,i,o,n]);var d=function(){var e,n=(e=x().mark((function e(){var n,t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(rt({},s,{loading:!0,error:"",msg:""})),e.next=4,$n({});case 4:n=e.sent,t=new Date(1e3*n.date_updated._seconds),n.date_updated="".concat(t.toDateString()," ").concat(t.toLocaleTimeString("it-IT",y.W6)),u.current&&c((function(e){return rt({},e,{loading:!1,msg:"Successfully synced data.",updated_by:"system"===n.updated_by?"system":n.email,date_updated:n.date_updated,summary:n.summary})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),u.current&&c((function(n){return rt({},n,{loading:!1,error:e.t0.message})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){nt(a,r,i,o,l,"next",e)}function l(e){nt(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(Dn,{state:s,cycloneLoading:a,onSyncPress:d})},dt={tabsContainer:{marginTop:function(e){return e.spacing(6)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tabsMain:{marginTop:function(e){return e.spacing(4)}}};function ft(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function pt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ft(e,n,t[n])}))}return e}var ht=function(){var e=(0,i.useState)(0),n=e[0],t=e[1];return(0,r.jsxs)("div",{children:[(0,r.jsxs)(p.Z,{sx:{border:"none"},children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Weather Services Updater"}),(0,r.jsxs)("p",{children:["Update the site-wide ",(0,r.jsx)("strong",{children:"ACAP Services"})," weather forecast information for the ",(0,r.jsx)("strong",{children:"Seasonal"}),", ",(0,r.jsx)("strong",{children:"10-Day"})," and ",(0,r.jsx)("strong",{children:"Special Weather"})," Forecast sections by providing updated data."]}),(0,r.jsxs)("p",{children:["Please take caution in updating this information because they will be automatically referenced by all site admins when creating crop recommendations bulletins on the ",(0,r.jsx)("strong",{children:"Create Crop Bulletins"})," (10-Day and Seasonal) Admin pages. Global data updates made by admins are also viewable on the site's public ",(0,r.jsx)("strong",{children:"ACAP Services"})," page and used as references on the ",(0,r.jsx)("strong",{children:"Crop Recommendations"})," page."]})]}),(0,r.jsxs)(c.Z,{sx:dt.tabsContainer,children:[(0,r.jsxs)(d.Z,{value:n,onChange:function(e,n){t(n)},"aria-label":"weather services updater",children:[(0,r.jsx)(u.Z,pt({label:"Seasonal"},(0,f.P)(0))),(0,r.jsx)(u.Z,pt({label:"10-Day"},(0,f.P)(1))),(0,r.jsx)(u.Z,pt({label:"Tropical Cyclone"},(0,f.P)(2)))]}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(f.x,{value:n,index:0,children:(0,r.jsx)(Ee,{})}),(0,r.jsx)(f.x,{value:n,index:1,children:(0,r.jsx)(un,{getDateToString:y.Xn})}),(0,r.jsx)(f.x,{value:n,index:2,children:(0,r.jsx)(ut,{getDateToString:y.Xn})})]})]})]})};var mt=(0,l.Z)((function(e){var n=(0,a.I0)(),t=(0,a.v9)((function(e){return e.provinces.ids}));return(0,i.useEffect)((function(){0===t.length&&n((0,o.Q)())}),[n,t]),(0,r.jsx)(s.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:Re.DW.ADMIN,children:(0,r.jsx)(ht,{})})}))}},function(e){e.O(0,[9351,6153,9964,1704,1903,7823,6295,4039,2882,7092,6572,5909,7409,1050,6454,4007,9774,2888,179],(function(){return n=1158,e(e.s=n);var n}));var n=e.O();_N_E=n}]);