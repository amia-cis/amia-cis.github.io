(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3359],{1158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/weather",function(){return t(5380)}])},3501:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(5893),a=t(7294),o=t(5697),i=t.n(o),l=t(1057),c=t(9536),s=t(8456),u=t(4666),d=t(1425),f=t(7645),p=t(6580),h=t(3946),b={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",height:{xs:"40px",sm:"48px"},"& .text":{display:{xs:"block",sm:"none"}},"& .shortText":{display:{xs:"inline-block",sm:"none"},fontSize:"24px"}},icon:{display:{xs:"block",sm:"none"}},dialogContent:{"& .error":{fontSize:"12px",color:"red"}},dialogActions:{"& button":{minWidth:"100px"}},closeButton:{position:"absolute",right:"8px",top:"8px",color:function(e){return e.palette.grey[500]}}};function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){g(e,n,t[n])}))}return e}function v(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var n=v(a.useState({open:null}),2),t=n[0],o=n[1],i=e.loading,m=void 0!==i&&i,g=e.isOpen,y=void 0!==g&&g,j=e.showButtons,w=void 0===j||j,S=e.maxWidth,O=void 0===S?"sm":S,C=e.IconSVG,P=void 0===C?null:C,k=e.modalExtraHandlerCB,Z=void 0===k?null:k,A=e.modalCancelHandlerCB,E=void 0===A?null:A,_=e.modalConfirmHandlerCB,T=void 0===_?null:_,D=e.modalOpenHandlerCB,I=void 0===D?null:D,B=e.isDisabled,F=void 0!==B&&B,R=e.openButtonText,M=void 0===R?"Click":R,U=e.title,L=void 0===U?"Window Title":U,N=e.extraBtnText,W=void 0===N?"":N,z=e.cancelBtnText,H=void 0===z?"Cancel":z,G=e.confirmBtnText,V=void 0===G?"Ok":G,Y=e.contentText,$=void 0===Y?"":Y,K=e.error,X=void 0===K?"":K,J=e.colorTheme,q=void 0===J?"primary":J;(0,a.useEffect)((function(){o((function(e){return x({},e,{open:y})}))}),[y]);var Q=function(){o(x({},t,{open:!1})),E&&E()};return(0,r.jsxs)("div",{children:[M&&(0,r.jsxs)(l.Z,{disabled:F,disableElevation:!0,variant:"contained",color:q,onClick:function(){o(x({},t,{open:!0})),I&&I()},sx:b.button,children:[P&&(0,r.jsx)(P,{sx:b.icon}),M]}),(0,r.jsxs)(u.Z,{maxWidth:O,fullWidth:!0,open:t.open||!1,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("span",{children:L}),(0,r.jsx)(h.Z,{"aria-label":"close",sx:b.closeButton,onClick:Q,disabled:m,children:(0,r.jsx)(c.Z,{})})]}),(0,r.jsxs)(p.Z,{sx:b.dialogContent,children:[""!==$&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:$}),(0,r.jsx)("div",{className:"error",children:X})]}),e.children]}),w&&(0,r.jsxs)(d.Z,{sx:b.dialogActions,children:[""!==W&&(0,r.jsx)(l.Z,{onClick:Z||Q,disabled:m,children:W}),(0,r.jsx)(l.Z,{onClick:E||Q,disabled:m,children:H}),(0,r.jsxs)(l.Z,{variant:"contained",disabled:m,onClick:T||Q,children:[(0,r.jsx)("span",{style:{display:m?"none":"block"},children:V}),(0,r.jsx)(s.Z,{size:24,color:"secondary",sx:{display:m?"block":"none"}})]})]})]})]})}y.propTypes={loading:i().bool,isOpen:i().bool,showButtons:i().bool,maxWidth:i().string,IconSVG:i().elementType,modalCancelHandlerCB:i().func,modalConfirmHandlerCB:i().func,modalOpenHandlerCB:i().func,modalExtraHandlerCB:i().func,openButtonText:i().string,cancelBtnText:i().string,confirmBtnText:i().string,extraBtnText:i().string,title:i().string,contentText:i().string,children:i().node,error:i().string,isDisabled:i().bool,colorTheme:i().string};var j=y},5322:function(e,n,t){"use strict";var r=t(5893),a=t(7294),o=t(5697),i=t.n(o),l=t(4866),c=t(6901);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=a.forwardRef((function(e,n){return(0,r.jsx)(c.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,o=e.severity,i=e.closeHandlerCB,c=void 0===i?function(){}:i,s=(0,a.useState)(n),d=s[0],f=s[1];(0,a.useEffect)((function(){f(n)}),[n]);var p=function(){f(!1),c()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:p,children:(0,r.jsx)(u,{onClose:p,severity:o,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:i().bool,message:i().string,severity:i().string},n.Z=d},6601:function(e,n,t){"use strict";t.d(n,{x:function(){return l},P:function(){return c}});var r=t(5893),a=t(7357);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=function(e){var n=e.children,t=e.value,l=e.index,c=i(e,["children","value","index"]);return(0,r.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({role:"tabpanel",hidden:t!==l,id:"custom-tabpanel-".concat(l),"aria-labelledby":"custom-tab-".concat(l)},c,{children:t===l&&(0,r.jsx)(a.Z,{sx:{p:3},children:n})}))};var c=function(e){return{id:"custom-tab-".concat(e),"aria-controls":"custom-tabpanel-".concat(e)}}},5380:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Vn}});var r=t(5893),a=t(7294),o=t(9473),i=t(4822),l=t(3059),c=t(2530),s=t(7357),u=t(44),d=t(8409),f=t(6601),p=t(4010),h=t(5861),b=t(1163),m=t(1057),g=t(6863),x=t(4666),v=t(1425),y=t(6580),j=t(8951),w=t(7645),S=t(4051),O=t.n(S),C=t(3539),P=t(512),k=t(6901),Z=t(8456),A={datagrid:{borderRadius:2,"& .MuiDataGrid-main":{borderRadius:2},"& .MuiDataGrid-virtualScrollerRenderZone":{"& .MuiDataGrid-row":{"&:nth-of-type(2n)":{backgroundColor:"rgba(235, 235, 235, .7)"}}},"& .MuiDataGrid-columnHeader:focus-within":{outline:"none !important"},"& .MuiDataGrid-columnHeaders":{color:function(e){return e.palette.primary.dark},fontSize:16,"& select":{width:"100px",height:"32px",border:"none !important",outline:"none !important",fontSize:16}}},gridContainer:{height:500,"& .wb_normal":{backgroundColor:"red",color:"#fff"},"& .b_normal":{backgroundColor:"yellow"},"& .near_normal":{backgroundColor:"#00c300"},"& .above_normal":{backgroundColor:"blue",color:"#fff"}}},E=t(7426);function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n,t,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,a)}function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){D(e,n,t[n])}))}return e}function B(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F={loading:!1,show:!1,error:"",msg:"",saveDisabled:!1};var R=function(e){var n=e.onCancelClick,t=e.onAsyncFinish,i=(0,o.v9)((function(e){return e.provinces})),l=i.ids,c=i.entities,u=(0,a.useState)([]),d=u[0],f=u[1],p=(0,a.useState)([]),h=p[0],b=p[1],x=(0,a.useState)([]),v=x[0],y=x[1],j=(0,a.useState)(F),w=j[0],S=j[1],_=(0,o.v9)((function(e){return e.seasonalweather})),D=_.ids,R=_.entities,M=[{id:0,label:"Jan"},{id:1,label:"Feb"},{id:2,label:"Mar"},{id:3,label:"Apr"},{id:4,label:"May"},{id:5,label:"Jun"},{id:6,label:"Jul"},{id:7,label:"Aug"},{id:8,label:"Sep"},{id:9,label:"Oct"},{id:10,label:"Nov"},{id:11,label:"Dec"}];(0,a.useEffect)((function(){D.length>0&&G()}),[D.length,G]);var U=function(){var e,n=(e=O().mark((function e(){var n,r,a,o,i,l,c,s,u;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=document.getElementsByTagName("select"),r=[],a=!0,o=0;o<n.length;o+=1)i=document.getElementById("select-mo-".concat(o)),r.push(H(i.value));if(N(r)&&6===d.length){e.next=7;break}return S(I({},F,{show:!0,loading:!1,error:"Invalid months sequence."})),e.abrupt("return");case 7:l=0;case 8:if(!(l<d.length)){e.next=20;break}c=0;case 10:if(!(c<d[l].length)){e.next=17;break}if(L(d[l][c])){e.next=14;break}return a=!1,e.abrupt("break",17);case 14:c+=1,e.next=10;break;case 17:l+=1,e.next=8;break;case 20:if(a){e.next=23;break}return S(I({},F,{show:!0,error:"Invalid cell values."})),e.abrupt("return");case 23:return e.prev=23,S(I({},F,{loading:!0})),e.next=27,(0,P.Vt)(z(r));case 27:t(),e.next=37;break;case 30:e.prev=30,e.t0=e.catch(23),s="",void 0!==e.t0.response&&(s=void 0!==e.t0.response.data?e.t0.response.data:""),""===s&&(s=e.t0.message),u=s.replaceAll(/Firebase/g,""),S((function(e){return I({},e,{show:!0,loading:!1,error:u})}));case 37:case"end":return e.stop()}}),e,null,[[23,30]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){T(o,r,a,i,l,"next",e)}function l(e){T(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),L=function(e){return isNaN(e)||""===e?(S(I({},F,{show:!0,error:"Not a number"})),!1):(S(F),!0)},N=function(e){for(var n=e.map((function(e){return e+1})),t=!0,r=0;r<n.length-1&&(!(1!==Math.abs(n[r+1]-n[r])||n[r+1]<n[r])||(t=!1,12===n[r]&&1===n[r+1]&&(t=!0),t));)r+=1;return t},W=function(e){var n=e.props.value,t=L(n)?n:"ERROR",r=e.id,a=(D.length>0?R[D[0]].mos:[]).indexOf(e.field),o=B(d),i=o[r];i[a]=t,o[r]=i,f((function(e){return o}))},z=function(e){for(var n={region:Object.values(c).length>0?Object.values(c)[0].region:"",provinces:[]},t=0;t<d.length;t+=1){for(var r={name:c[l[t]].label,months:[]},a=0;a<e.length;a+=1)r.months.push({mo:M[e[a]].label.toLowerCase(),val:d[t][a],con:(0,P.O9)(d[t][a])});n.provinces.push(r)}return n},H=function(e){for(var n=0,t=0;t<M.length;t+=1)if(M[t].label.toLowerCase()===e.toLowerCase()){n=t;break}return n},G=function(){var e=function(e){var n=R[D[0]].mos[e];a.push({field:n,headerName:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1)),width:110,editable:!0,sortable:!1,disableColumnMenu:!0,renderHeader:function(t){return(0,r.jsxs)("select",{onChange:function(n){return function(e,n){var t=e.target.value;document.getElementById("select-mo-".concat(n)).setAttribute("value",H(t))}(n,e)},id:"select-mo-".concat(e),defaultValue:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1)),children:[(0,r.jsx)("option",{children:"Month"}),M.map((function(e,n){return(0,r.jsx)("option",{children:e.label},"mo-".concat(n))}))]})}})},n=function(e){var n=function(n){var t=R[D[e]],o=t.months.filter((function(e){return e.mo===t.mos[n]}));1===o.length?(r[t.mos[n]]=o[0].val,a.push(o[0].val)):(r[t.mos[n]]="n/a",a.push("n/a"))},r={},a=[],l=function(e){var n="";if(0===Object.values(c).length)return"n/a";try{n=Object.values(c).find((function(n){return n.name===e})).label}catch(t){n="n/a"}return n}(R[D[e]].name);i[l]=R[D[e]].name,r.id=e,r.rowId=e,r.province=l,r.editable=!0;for(var s=0;s<R[D[e]].mos.length;s+=1)n(s);t.push(r),o.push(a)},t=[],a=[],o=[],i={};a.push({field:"province",headerName:"Province",width:180,sortable:!1,disableColumnMenu:!0});for(var l=0;l<R[D[0]].mos.length;l+=1)e(l);for(var s=0;s<D.length;s+=1)n(s);y(a),b(t),f(o)};return(0,r.jsxs)("div",{style:{height:500,width:"100%"},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"baseline",marginBottom:"24px"},children:[(0,r.jsx)("div",{style:{minWidth:"40%"},children:(0,r.jsx)(k.Z,{severity:""!==w.error?"error":"success",sx:{fontSize:"12px",minHeight:"32px",width:"100%",visibility:w.show?"initial":"hidden"},children:""!==w.error?w.error:w.msg})}),(0,r.jsxs)(g.Z,{variant:"outlined","aria-label":"outlined button controls group",sx:{float:"right",marginTop:"24px","& button":{width:"50%"}},children:[(0,r.jsx)(m.Z,{id:"cancel",onClick:n,disabled:w.loading,children:"Cancel"}),(0,r.jsxs)(m.Z,{onClick:function(){var e=function(){return document.getElementsByTagName("select").length};if(S(I({},F,{loading:!0})),e()<6){var n=document.getElementsByClassName("MuiDataGrid-virtualScroller");if(n.length>0)var t=n[0].scrollWidth,r=setInterval((function(){t<=0&&(clearInterval(r),6===e()?U():S(I({},F,{show:!0,loading:!1,error:"Please edit the table cells on a larger screen."}))),n[0].scrollLeft+=3,t-=3}))}else U()},disabled:w.loading||w.saveDisabled,variant:"contained",children:[(0,r.jsx)("span",{style:{display:w.loading?"none":"block"},children:"Save"})," \xa0",(0,r.jsx)(Z.Z,{size:20,color:"secondary",sx:{display:w.loading?"block":"none"}})]})]})]}),(0,r.jsx)(s.Z,{sx:A.gridContainer,children:(0,r.jsx)(C._,{rows:h,columns:v,sx:A.datagrid,customH:!0,editMode:"row",rowsPerPageOptions:[],getCellClassName:function(e){return void 0!==E.re[e.field.toUpperCase()]?(0,P.O9)(e.value):""},isCellEditable:function(){return!w.loading},onEditCellPropsChange:function(e){S(F),W(e)},initialState:{columns:{columnVisibilityModel:{rowId:!1}}}})})]})},M=t(6399),U=t(9209),L=t(7715),N=t(901),W=t(6886),z=t(7109),H=t(1903),G=t(265),V=t(5697),Y=t.n(V),$=t(1496);function K(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var X=(0,$.ZP)((function(e){return(0,r.jsx)(H.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){K(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{width:"100%",fontSize:"12px",marginTop:n.spacing(1),"& .MuiOutlinedInput-root":{paddingRight:0,paddingLeft:0},"& .MuiOutlinedInput-input":{padding:n.spacing(1)}}})),J=X,q=t(3501),Q=t(5322),ee=t(7346),ne=t(2701);function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var re=(0,$.ZP)((function(e){return(0,r.jsx)(m.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){te(e,n,t[n])}))}return e}({},e))}))((function(e){return{width:"150px",height:e.theme.spacing(5)}})),ae=re,oe={container:{marginTop:"16px",width:"100%"},textfield:{fontSize:"14px"},fileInputContainer:{height:"0px",width:"0px",overflow:"hidden"}},ie=t(213);function le(e){var n=e.file,t=e.state,o=e.name,i=e.label,l=void 0===i?"":i,c=e.textContent,u=void 0===c?"":c,d=e.fileAccepts,f=e.isDisabled,p=void 0!==f&&f,b=e.handleUpload,m=e.onUploadClick,g=e.handleResetMessage,x=e.setSelectedFile,v=e.clearFile,y=(0,a.useRef)();return(0,a.useEffect)((function(){null===n&&(y.current.value=null)}),[n]),(0,r.jsxs)(W.ZP,{container:!0,sx:oe.container,children:[t.open&&(0,r.jsx)(q.Z,{isOpen:!0,title:"Upload file",contentText:t.modalMsg,loading:t.loading,openButtonText:null,modalCancelHandlerCB:g,modalConfirmHandlerCB:b}),""!==t.msg&&(0,r.jsx)(Q.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:g}),(0,r.jsxs)(W.ZP,{item:!0,xs:12,lg:6,sx:oe.wrapper,children:[(0,r.jsx)(h.Z,{variant:"subtitle2",children:l}),(0,r.jsx)(ie.Z,{children:u}),(0,r.jsx)(J,{size:"small",disabled:!0,value:null!==n?n[0].name:"",sx:{fontSize:"10px"},InputProps:{style:oe.textfield,startAdornment:(0,r.jsxs)(ae,{variant:"outlined",disableElevation:!0,component:"label",disabled:t.loading||p,sx:{width:"48px",borderTopRightRadius:0,borderBottomRightRadius:0},onClick:function(e){null!==n&&v(e)},children:[null===n?(0,r.jsx)(ne.Z,{}):(0,r.jsx)(ee.Z,{}),(0,r.jsx)(s.Z,{sx:oe.fileInputContainer,children:(0,r.jsx)("input",{type:"file",multiple:!0,ref:y,accept:d||".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",name:o||"excelfile",onChange:x,style:{border:"1px solid"}})})]}),endAdornment:(0,r.jsx)(ae,{size:"small",component:"span",variant:"contained",disableElevation:!0,disabled:null===n||t.loading,sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:m,children:"Upload"})}})]})]})}le.propTypes={file:Y().object,state:Y().object,name:Y().string,label:Y().string,textContent:Y().string,fileAccepts:Y().string,isDisabled:Y().bool,handleUpload:Y().func,onUploadClick:Y().func,handleResetMessage:Y().func,setSelectedFile:Y().func,clearFile:Y().func};var ce=le;function se(e,n,t,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,a)}function ue(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){se(o,r,a,i,l,"next",e)}function l(e){se(o,r,a,i,l,"throw",e)}i(void 0)}))}}function de(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){de(e,n,t[n])}))}return e}var pe="success",he="error",be={msg:"",type:"",modalMsg:"Upload selected file?",loading:!1,open:!1};function me(e){var n=e.label,t=e.name,o=void 0===t?"somefile":t,i=e.textContent,l=e.fileAccepts,c=e.isDisabled,s=void 0!==c&&c,u=e.fileUploadMethod,d=e.onFileSelectedCB,f=(0,a.useState)(null),p=f[0],h=f[1],b=(0,a.useState)(be),m=b[0],g=b[1],x=function(){var e=ue(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(n.target.files),d&&d(n.target.files);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=ue(O().mark((function e(n){var t,r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length>0)){e.next=18;break}return n.preventDefault(),e.prev=2,(t=new FormData).append(o,p[0]),g(fe({},m,{loading:!0,modalMsg:"Uploading file..."})),e.next=8,u(t);case 8:g((function(e){return fe({},be,{msg:"Upload success.",type:pe})})),h((function(e){return null})),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),r="",void 0!==e.t0.response&&(r=void 0!==e.t0.response.data?e.t0.response.data:""),""===r&&(r=e.t0.message),g((function(e){return fe({},be,{msg:r,type:he})}));case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(ce,{file:p,state:m,label:n,name:o,textContent:i,fileAccepts:l,isDisabled:s,handleUpload:v,onUploadClick:function(){return g(fe({},m,{open:!0}))},handleResetMessage:function(){return g(be)},setSelectedFile:x,clearFile:function(e){e.preventDefault(),h((function(e){return null})),g((function(e){return be})),d&&d(null)}})}me.propTypes={name:Y().string,label:Y().string,textContent:Y().string,fileAccepts:Y().string,isDisabled:Y().bool,fileUploadMethod:Y().func,onFileSelectedCB:Y().func};var ge=me,xe={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"250px"}},ve=t(1908),ye=t(8857),je=t(9269);var we=function(e){var n=e.state,t=e.file,a=e.isDisabled,o=e.handleInputChange,i=e.handleClearClick,l=e.handleFileUpload,c=e.handleFileSelected;return(0,r.jsxs)(W.ZP,{container:!0,sx:xe.container,children:[(0,r.jsx)(W.ZP,{item:!0,xs:12,children:(0,r.jsx)(ge,{label:"Upload an excel file",name:"excelfile",fileAccepts:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",isDisabled:a,fileUploadMethod:l,onFileSelectedCB:c})}),(0,r.jsxs)(W.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Tropical Cyclone Input"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:xe.text,children:["Select PAGASA's shared seasonal weather forecast excel file on the ",(0,r.jsx)("strong",{children:"Upload an excel file"})," selector to unlock the Tropical Cyclone Input items below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Then, enter the number of tropical cyclones for each month with reference to its picture on the 3rd tab ",(0,r.jsx)("br",{})," from the selected PAGASA-shared seasonal weather forecast excel file."]})]}),(0,r.jsx)(W.ZP,{item:!0,xs:12,lg:7,children:n.map((function(e,n){return(0,r.jsx)(H.Z,{id:"month-".concat(n),size:"small",label:e.full,value:e.value,placeholder:"".concat(e.full," no. of cyclones"),sx:xe.rowItem,disabled:a||null===t,onChange:o,InputProps:{startAdornment:(0,r.jsx)(z.Z,{position:"start",children:""===e.value?(0,r.jsx)(ve.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(ye.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(je.Z,{fontSize:"small",sx:{color:G.Z[500]}})})}},n)}))}),(0,r.jsx)(W.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(W.ZP,{item:!0,xs:4,sx:{marginTop:"12px"},children:(0,r.jsx)(m.Z,{variant:"text",onClick:i,disableElevation:!0,children:"Clear All"})})]})};function Se(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Oe(e,n,t,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,a)}function Ce(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Oe(o,r,a,i,l,"next",e)}function l(e){Oe(o,r,a,i,l,"throw",e)}i(void 0)}))}}function Pe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Pe(e,n,t[n])}))}return e}function Ze(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Se(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Se(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae=["1st month","2nd month","3rd month","4th month","5th month","6th month"];var Ee=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=(0,a.useState)(null),l=i[0],c=i[1],s=(0,o.I0)(),u=(0,o.v9)((function(e){return e.seasonalweather.status}));(0,a.useEffect)((function(){6===Ae.length&&t(Ae.reduce((function(e,n,t){return Ze(e).concat([{id:t,full:n,month:n,isValid:!1,value:""}])}),[]))}),[false]);var d=function(){t(n.map((function(e){return ke({},e,{isValid:!1,value:""})})))},f=function(){var e=Ce(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Ce(O().mark((function e(r,a){var o;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.filter((function(e){return!e.isValid})).length>=1)){e.next=4;break}a(new Error("Please check your tropical cyclones list input")),e.next=18;break;case 4:return e.prev=4,e.next=7,(0,P.BZ)(t);case 7:return o=e.sent,e.next=10,(0,P.Yx)({data:n.map((function(e){return{id:e.id,value:e.value}})),region:"bicol",type:E.Uh.CYCLONES_COUNT});case 10:s((0,U.Mj)(o.map((function(e){return ke({},e,{date_created:(0,L.NK)(e.date_created)})})))),d(),r(!0),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),a(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsx)(we,{state:n,file:l,isDisabled:u===N.G.PENDING,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",a=e.target,o=a.id,i=a.value,l=o.split("-")[1],c=Ze(n);c[l]&&("clear"===r?(c[l].value="",c[l].isValid=!1):(c[l].value=i,i.length>=10?c[l].isValid=!1:c[l].isValid=""!==i),t((function(e){return c})))},handleClearClick:d,handleFileUpload:f,handleFileSelected:function(e){c(e),e||d()}})},_e=t(5677),Te={container:{marginTop:function(e){return e.spacing(3)}},text:{color:"gray",marginBottom:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)}},rowItem:{display:"flex",marginTop:"12px",maxWidth:"parent","& .MuiOutlinedInput-root":{paddingLeft:function(e){return e.spacing(2)}}},btnCancel:{height:function(e){return e.spacing(5)},width:"40px",borderTopLeftRadius:0,borderBottomLeftRadius:0,"& span":{marginRight:0}},btnGroup:{marginTop:"8px","& button":{width:"110px"},display:{sm:"flex",md:"unset"},flexDirection:{sm:"column"}}},De=t(3343);var Ie=function(e){var n=e.state,t=e.message,a=e.log,o=e.isLoading,i=e.handleInputChange,l=e.handleDeleteClick,c=e.handleClearClick,s=e.handleReset,u=e.handleAddClick,d=e.handleSaveClick,f=e.handleCancelSaveClick,p=e.handleResetMsg,b=e.onSaveClick;return(0,r.jsxs)(W.ZP,{container:!0,sx:Te.container,children:[t.openLoadingModal&&(0,r.jsx)(q.Z,{isOpen:!0,title:"Save changes",contentText:t.modalMsg,loading:o,openButtonText:null,modalConfirmHandlerCB:b,modalCancelHandlerCB:f}),""!==t.msg&&(0,r.jsx)(Q.Z,{openSnackbar:!0,message:t.msg,severity:t.type,closeHandlerCB:p}),(0,r.jsxs)(W.ZP,{item:!0,xs:12,sx:{marginTop:"24px",marginBottom:"8px"},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Weather Systems that May Affect the Region"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:Te.text,children:["Below is a list of other weather systems that may affect the region. Edit the existing contents or add/delete some items,",(0,r.jsx)("br",{}),"then press the ",(0,r.jsx)("strong",{children:"SAVE"})," button to save your changes. ",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"Press the ",(0,r.jsx)("strong",{children:"RESET"})," button to undo your changes to the last SAVE point. Press the ",(0,r.jsx)("strong",{children:"CLEAR ALL"})," button to remove all items."]}),(0,r.jsx)(ie.Z,{children:o?"Loading...":"Updated by ".concat(a.updated_by," on ").concat(a.date_created,".")})]}),(0,r.jsx)(W.ZP,{item:!0,xs:12,lg:6,children:n.map((function(e,n){return(0,r.jsx)(J,{id:"misc-".concat(n),size:"small",label:e.full,value:e.value,placeholder:"Enter a weather system",sx:Te.rowItem,disabled:o,onChange:i,InputProps:{startAdornment:(0,r.jsx)(z.Z,{position:"start",children:""===e.value?(0,r.jsx)(ve.Z,{fontSize:"small",color:"primary"}):e.isValid?(0,r.jsx)(ye.Z,{fontSize:"small",color:"secondary"}):(0,r.jsx)(je.Z,{fontSize:"small",sx:{color:G.Z[500]}})}),endAdornment:(0,r.jsx)(ae,{disableElevation:!0,disabled:o,startIcon:(0,r.jsx)(De.Z,{fontSize:"small"}),sx:Te.btnCancel,onClick:function(){return l(n)}})}},n)}))}),(0,r.jsx)(W.ZP,{item:!0,xs:12,lg:5,children:"\xa0"}),(0,r.jsx)(W.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,r.jsxs)(g.Z,{variant:"text",disableElevation:!0,size:"small",sx:Te.btnGroup,disabled:o,children:[(0,r.jsx)(ae,{onClick:c,children:"Clear All"}),(0,r.jsx)(ae,{onClick:s,children:"Reset"}),(0,r.jsx)(ae,{onClick:u,children:"Add"}),(0,r.jsx)(ae,{onClick:d,variant:"contained",children:"Save"})]})})]})};function Be(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Fe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Fe(e,n,t[n])}))}return e}function Me(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return Be(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Be(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ue="success",Le="error",Ne="info",We={msg:"",type:"",modalMsg:"Save changes?",openLoadingModal:!1};var ze=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=(0,a.useState)(We),l=i[0],c=i[1],s=(0,a.useState)(!1),u=s[0],d=s[1],f=(0,o.I0)(),p=(0,a.useRef)(!1),h=(0,o.v9)((function(e){return e.seasonalcommon_misc})),b=h.ids,m=h.entities,g=h.status,x=h.updated_by,v=h.date_created;(0,a.useEffect)((function(){return p.current=!0,f((0,_e.h)()).unwrap().then((function(){p.current&&d(!0)})),function(){p.current=!1}}),[f]),(0,a.useEffect)((function(){g===N.G.FULLFILLED&&b.length>0&&u&&y()}),[g,b,u,y]);var y=(0,a.useCallback)((function(){p.current&&(c((function(e){return We})),t((function(e){return Object.values(m).map((function(e){return Re({},e,{isValid:!0})}))})))}),[m]);return(0,r.jsx)(Ie,{state:n,message:l,log:{updated_by:x,date_created:v},isLoading:g===N.G.PENDING,handleInputChange:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"update",a=e.target,o=a.id,i=a.value,l=o.split("-")[1],c=Me(n);c[l]&&("clear"===r?(c[l].value="",c[l].isValid=!1):(c[l].value=i,i.length>=30?c[l].isValid=!1:c[l].isValid=""!==i),p.current&&t((function(e){return c})))},handleClearClick:function(){return t([])},handleDeleteClick:function(e){p.current&&t((function(t){return n.reduce((function(n,t,r){return r!==e&&(n=Me(n).concat([t])),n}),[]).map((function(e,n){return Re({},e,{id:n})}))}))},handleReset:y,handleAddClick:function(){if(25!==n.length&&p.current){var e=Me(n);e.push({id:e.length,value:""}),t(e)}},handleSaveClick:function(){return c(Re({},l,{openLoadingModal:!0}))},handleCancelSaveClick:function(){return c(Re({},l,{openLoadingModal:!1}))},handleResetMsg:function(){return c(We)},onSaveClick:function(){p.current&&(void 0===n.find((function(e){return""===e.value}))?(c(Re({},l,{modalMsg:"Saving..."})),f((0,_e.O)(n)).unwrap().then((function(){p.current&&c((function(e){return Re({},We,{msg:"Successfully saved changes.",type:Ue})}))})).catch((function(e){p.current&&c((function(n){return Re({},We,{msg:e,type:Le})}))}))):c((function(e){return Re({},e,{msg:"Please check your input",type:Ne,openLoadingModal:!1})})))}})},He=t(9132);function Ge(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Ve={seasonal_update:!1,tenday_update:!1};var Ye=function(){var e=(0,a.useState)(Ve),n=e[0],t=e[1],i=(0,a.useState)(!1),l=i[0],c=i[1],u=(0,o.v9)((function(e){return e.seasonalweather.status})),d=(0,b.useRouter)(),f=function(e){var r=e.target.id;t("cancel"===r?Ve:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Ge(e,n,t[n])}))}return e}({},n,Ge({},r,!0)))};return(0,r.jsxs)("div",{children:[(0,r.jsxs)(x.Z,{open:l,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(w.Z,{id:"data-saved-success",children:"Success"}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(j.Z,{id:"alert-dialog-description",children:"The seasonal weather data are saved successfully."})}),(0,r.jsx)(v.Z,{children:(0,r.jsx)(m.Z,{onClick:function(){d.push("/weather-services")},autoFocus:!0,children:"OK"})})]}),(0,r.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:function(e){return e.spacing(1)}},children:[(0,r.jsx)(h.Z,{variant:"h6",children:"Seasonal Weather Forecast Updater"}),(0,r.jsx)(g.Z,{variant:"outlined","aria-label":"outlined button controls group",children:!n.seasonal_update&&!n.tenday_update&&(0,r.jsx)(m.Z,{id:"seasonal_update",disabled:u===N.G.PENDING,onClick:f,children:"Edit"})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{variant:"h7",children:(0,r.jsx)("strong",{children:"Manual Update"})}),(0,r.jsxs)(h.Z,{variant:"body2",sx:He.Z.subheader,children:["Copy the Bicol Region's ",(0,r.jsx)("strong",{children:"Rainfall Analysis Forecast"})," from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/seasonal-forecast",target:"_blank",rel:"noreferrer",children:"Seasonal Forecast"})," page for each province. Press the ",(0,r.jsx)("strong",{children:"Edit"})," button and double click a cell to start editing."]}),(0,r.jsx)(h.Z,{variant:"h7",children:(0,r.jsx)("strong",{children:"Upload an Excel File"})}),(0,r.jsxs)(h.Z,{variant:"body2",sx:He.Z.subheader,children:["Alternatively, you can opt to upload the updated seasonal weather forecast raw data in the excel file provided by PAGASA by clicking the SEARCH button, followed by clicking the UPLOAD button under the ",(0,r.jsx)("strong",{children:"Upload an Excel File"})," option below.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),"You can use the attached seasonal weather forecast excel file from PAGASA as an example when uploading an excel file. The excel file should follow the format and structure of the attached example.",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://firebasestorage.googleapis.com/v0/b/climate-webservices.appspot.com/o/files%2Fseasonal_forecast_example_v2.xlsx?alt=media&token=4835bc36-3e63-4200-b83b-a00616c14cda",target:"__blank",children:"[example excel file]"})]}),!n.seasonal_update&&(0,r.jsxs)("div",{children:[(0,r.jsx)(M.Z,{withBorder:!0}),(0,r.jsx)(Ee,{}),(0,r.jsx)(ze,{})]}),n.seasonal_update&&(0,r.jsx)(R,{onCancelClick:f,onAsyncFinish:function(){return c((function(e){return!e}))}})]})},$e=t(7682),Ke=t(1234),Xe=t(560),Je=t(7918);function qe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var Qe=(0,$.ZP)((function(e){return(0,r.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){qe(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:n.spacing(1),marginBottom:n.spacing(3),"& ul":{listStyle:"none",paddingLeft:n.spacing(3)}}})),en=Qe;var nn=function(e){return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(4)}},variant:"h6",children:e.title}),(0,r.jsx)(en,{children:e.children})]})},tn={subheader:function(e){return{marginBottom:e.spacing(2),color:"gray",marginTop:e.spacing(1),"& a":{color:e.palette.green.dark,textDecoration:"none"},"& a:visited":{color:e.palette.green.dark},"& a:hover, span:hover":{textDecoration:"underline"}}},summary:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"100px",border:"1px solid gray",borderRadius:"8px",marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(3)},"& ul":{listStyle:"none"}},upload:{display:"flex",alignItems:"center",maxWidth:"500px",minHeight:"90px",border:"1px solid gray",borderRadius:"8px",fontSize:"14px",color:function(e){return e.palette.text.secondary},padding:function(e){return e.spacing(2)},marginTop:function(e){return e.spacing(1)},marginBottom:function(e){return e.spacing(1)}},notification:{maxWidth:"500px",marginBottom:function(e){return e.spacing(2)}}},rn=(0,$.ZP)("input")({display:"none"});var an=function(e){var n=e.files,t=void 0===n?[]:n,a=e.status,o=e.logs,i=e.handleSubmit,l=e.handleSelectFiles;return(0,r.jsxs)(s.Z,{sx:{"& li":{fontSize:"14px"}},children:[(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"10-Day Weather Forecast Updater"}),(0,r.jsx)(h.Z,{variant:"body2",sx:tn.subheader,children:"This panel updates the site's 10-Day Weather Forecast data by manually uploading the excel files from PAGASA. Follow the steps to update the site's 10-Day Weather Forecast data:"}),(0,r.jsxs)("ol",{children:[(0,r.jsxs)("li",{children:["Download all (10) excel files from PAGASA's ",(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/climate/climate-prediction/10-day-climate-forecast",target:"_blank",rel:"noreferrer",children:"10 Day Climate Forecast"})," web page."]}),(0,r.jsx)("li",{children:"Press the SELECT FILES button and select all the excel files."}),(0,r.jsx)("li",{children:"Press the SUBMIT button."}),(0,r.jsx)("li",{children:"Wait for the upload process to finish."})]}),(0,r.jsx)(nn,{title:"Current Data Update Summary",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",o.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Valid Until:"}),"\xa0 ",o.date_valid]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date of Forecast:"}),"\xa0 ",o.date_forecast]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",o.date_synced]})]})}),(0,r.jsx)(s.Z,{sx:tn.upload,children:0===t.length?(0,r.jsx)("span",{children:"Select excel files."}):(0,r.jsx)(s.Z,{sx:{"& div":{margin:"2px"}},children:Array.from(t).map((function(e,n){return(0,r.jsx)(Je.Z,{label:e.name,size:"small"},"excel-".concat(n))}))})}),(0,r.jsxs)(s.Z,{sx:tn.notification,children:[!a.loading&&""!==a.error&&(0,r.jsx)(k.Z,{severity:"error",children:a.error}),!a.loading&&""!==a.msg&&(0,r.jsx)(k.Z,{severity:"success",children:a.msg})]}),(0,r.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,r.jsx)(rn,{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",id:"contained-button-file",multiple:!0,type:"file",name:"excel-files",onChange:l,disabled:a.loading}),(0,r.jsxs)(m.Z,{variant:"contained",component:"span",disabled:a.loading,children:["Select Files",(0,r.jsx)(Z.Z,{size:20,color:"secondary",sx:{display:a.loading?"block":"none"}})]}),(0,r.jsx)(m.Z,{type:"submit",onClick:i,disabled:a.loading,children:"Submit"})]})]})};function on(e,n,t,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,a)}function ln(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function cn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ln(e,n,t[n])}))}return e}var sn={loading:!1,error:"",msg:""},un={updated_by:"",date_forecast:"",date_synced:"",date_valid:""};var dn=function(e){var n=e.getDateToString,t=(0,a.useState)([]),o=t[0],i=t[1],l=(0,a.useState)(sn),c=l[0],s=l[1],u=(0,a.useState)(un),d=u[0],f=u[1],p=(0,$e.tl)(Xe.M.WEATHER_FORECASTS,"bicol","ten_day","name",1),h=p.documents,b=p.loading,m=p.error;(0,a.useEffect)((function(){b||""!==m||g(h)}),[b,m,h,g]);var g=(0,a.useCallback)((function(e){var t=Object.values(e[0].municipalities)[0][0],r={updated_by:e[0].updated_by,date_synced:n(e[0].date_created)};r.date_forecast=t.date_forecast,r.date_valid=t.date_range,f(r)}),[n]),x=function(){var e,n=(e=O().mark((function e(){var n,t,r,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new FormData,t=0;t<o.length;t+=1)n.append("excel-files",o[t]);return e.prev=2,s(cn({},sn,{loading:!0})),e.next=6,(0,P.pc)(n);case 6:s((function(e){return cn({},sn,{loading:!1,msg:"Upload success."})})),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),r=e.t0.response?e.t0.response.data:e.t0.message,s(cn({},sn,{loading:!1,error:r})),e.abrupt("return");case 14:return e.prev=14,e.next=17,(0,Ke.vx)();case 17:a=e.sent,g(a),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(14),console.error(e.t1.message);case 24:case"end":return e.stop()}}),e,null,[[2,9],[14,21]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){on(o,r,a,i,l,"next",e)}function l(e){on(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(an,{files:o,status:c,logs:d,handleSubmit:x,handleSelectFiles:function(e){s(sn),i(e.target.files)}})};var fn=function(e){var n=e.state,t=e.cycloneLoading,a=e.onSyncPress;return(0,r.jsxs)(s.Z,{sx:{fontSize:"14px"},children:[(0,r.jsx)(Q.Z,{openSnackbar:""!==n.error||""!==n.msg,message:""!==n.error?n.error:n.msg,severity:""!==n.error?"error":"success"}),(0,r.jsx)(h.Z,{sx:{marginTop:function(e){return e.spacing(1)}},variant:"h6",children:"Tropical Cyclone Bulletin Updater"}),(0,r.jsxs)(h.Z,{variant:"body2",sx:tn.subheader,children:["This panel updates ACAP's ",(0,r.jsx)("strong",{children:"Special Weather Advisory"})," content by manually initiating the  process of syncing PAGASA's latest published tropical cyclone data from their ",(0,r.jsx)("strong",{children:(0,r.jsx)("a",{href:"https://www.pagasa.dost.gov.ph/tropical-cyclone/severe-weather-bulletin",target:"_blank",rel:"noreferrer",children:"Tropical Cyclone Bulletin"})})," web page to ACAP."]}),(0,r.jsx)(h.Z,{variant:"body2",sx:tn.subheader,children:"Press the SYNC button below to start the data syncing process."}),(0,r.jsx)(nn,{title:"Current Data Update Summary",children:!t&&(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Updated by:"}),"\xa0 ",n.updated_by]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Date synced:"}),"\xa0 ",n.date_updated]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Summary:"}),"\xa0 ",n.summary]})]})}),(0,r.jsx)(m.Z,{variant:"contained",onClick:a,disabled:t||n.loading,children:"Sync"})]})},pn=t(1029),hn=t(9669),bn=t.n(hn),mn=t(9431);function gn(e,n,t,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,a)}function xn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function vn(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function jn(e){return jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jn(e)}function wn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){yn(e,n,t[n])}))}return e}function Sn(e,n){return!n||"object"!==Cn(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function On(e,n){return On=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},On(e,n)}var Cn=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Pn(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=jn(e);if(n){var a=jn(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Sn(this,t)}}var kn={SPECIAL_WEATHER_CYCLONE:"".concat("https://amia-cis-temp.herokuapp.com/api","/cyclone")},Zn=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&On(e,n)}(o,e);var n,t,r,a=Pn(o);function o(){return xn(this,o),a.apply(this,arguments)}return n=o,t=[{key:"updateSpecialWeather",value:function(e){var n,t=this;return(n=O().mark((function n(){var r,a;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createRequestObject({body:e});case 2:return r=n.sent,n.next=5,bn()(wn({},r,{url:kn.SPECIAL_WEATHER_CYCLONE,method:"POST"}));case 5:return a=n.sent,n.abrupt("return",a.data);case 7:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){gn(o,r,a,i,l,"next",e)}function l(e){gn(o,r,a,i,l,"throw",e)}i(void 0)}))})()}}],t&&vn(n.prototype,t),r&&vn(n,r),o}(mn.Z),An=new Zn,En=An.updateSpecialWeather.bind(An);function _n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Tn(e,n,t,r,a,o,i){try{var l=e[o](i),c=l.value}catch(s){return void t(s)}l.done?n(c):Promise.resolve(c).then(r,a)}function Dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function In(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Dn(e,n,t[n])}))}return e}function Bn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return _n(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _n(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fn=t(7294),Rn=Fn.useEffect,Mn=Fn.useState,Un=Fn.useRef,Ln={loading:!1,error:"",msg:"",updated_by:"",date_updated:"",summary:""};var Nn=function(e){var n=e.getDateToString,t=Bn((0,$e.ky)(pn.K.GLOBAL_COLLECTIONS,pn.K.CYCLONE_ADVISORY),3),a=t[0],o=t[1],i=t[2],l=Bn(Mn(Ln),2),c=l[0],s=l[1],u=Un(!1);Rn((function(){return u.current=!0,function(){u.current=!1}}),[]),Rn((function(){if(!o){if(!u.current)return;s(i?{error:i}:{loading:!1,error:"",msg:"",updated_by:"system"===a.updated_by?"system":a.email,date_updated:n(a.date_updated),summary:a.summary})}}),[o,a,i,n]);var d=function(){var e,n=(e=O().mark((function e(){var n,t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(In({},c,{loading:!0,error:"",msg:""})),e.next=4,En({});case 4:n=e.sent,t=new Date(1e3*n.date_updated._seconds),n.date_updated="".concat(t.toDateString()," ").concat(t.toLocaleTimeString("it-IT",L.W6)),u.current&&s((function(e){return In({},e,{loading:!1,msg:"Successfully synced data.",updated_by:"system"===n.updated_by?"system":n.email,date_updated:n.date_updated,summary:n.summary})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),u.current&&s((function(n){return In({},n,{loading:!1,error:e.t0.message})}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Tn(o,r,a,i,l,"next",e)}function l(e){Tn(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(fn,{state:c,cycloneLoading:o,onSyncPress:d})},Wn={tabsContainer:{marginTop:function(e){return e.spacing(6)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},tabsMain:{marginTop:function(e){return e.spacing(4)}}};function zn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Hn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){zn(e,n,t[n])}))}return e}var Gn=function(){var e=(0,a.useState)(0),n=e[0],t=e[1];return(0,r.jsxs)("div",{children:[(0,r.jsxs)(p.Z,{sx:{border:"none"},children:[(0,r.jsx)(h.Z,{variant:"h5",children:"Weather Services Updater"}),(0,r.jsxs)("p",{children:["Update the site-wide ",(0,r.jsx)("strong",{children:"ACAP Services"})," weather forecast information for the ",(0,r.jsx)("strong",{children:"Seasonal"}),", ",(0,r.jsx)("strong",{children:"10-Day"})," and ",(0,r.jsx)("strong",{children:"Special Weather"})," Forecast sections by providing updated data."]}),(0,r.jsxs)("p",{children:["Please take caution in updating this information because they will be automatically referenced by all site admins when creating crop recommendations bulletins on the ",(0,r.jsx)("strong",{children:"Create Crop Bulletins"})," (10-Day and Seasonal) Admin pages. Global data updates made by admins are also viewable on the site's public ",(0,r.jsx)("strong",{children:"ACAP Services"})," and used as references on the ",(0,r.jsx)("strong",{children:"Crop Recommendations"})," pages."]})]}),(0,r.jsxs)(s.Z,{sx:Wn.tabsContainer,children:[(0,r.jsxs)(d.Z,{value:n,onChange:function(e,n){t(n)},"aria-label":"weather services updater",children:[(0,r.jsx)(u.Z,Hn({label:"Seasonal"},(0,f.P)(0))),(0,r.jsx)(u.Z,Hn({label:"10-Day"},(0,f.P)(1))),(0,r.jsx)(u.Z,Hn({label:"Tropical Cyclone"},(0,f.P)(2)))]}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(f.x,{value:n,index:0,children:(0,r.jsx)(Ye,{})}),(0,r.jsx)(f.x,{value:n,index:1,children:(0,r.jsx)(dn,{getDateToString:L.Xn})}),(0,r.jsx)(f.x,{value:n,index:2,children:(0,r.jsx)(Nn,{getDateToString:L.Xn})})]})]})]})};var Vn=(0,l.Z)((function(e){var n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.provinces.ids}));return(0,a.useEffect)((function(){0===t.length&&n((0,i.Q)())}),[n,t]),(0,r.jsx)(c.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:E.DW.ADMIN,children:(0,r.jsx)(Gn,{})})}))}},function(e){e.O(0,[9351,6153,9964,1704,1903,7823,6295,4039,2882,9576,6572,1433,9958,949,3728,6454,8305,9774,2888,179],(function(){return n=1158,e(e.s=n);var n}));var n=e.O();_N_E=n}]);