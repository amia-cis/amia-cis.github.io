"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6249],{5688:function(e,n,r){var t=r(5893),i=r(7294),o=r(5697),s=r.n(o),a=r(4866),l=r(6901);function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var d=i.forwardRef((function(e,n){return(0,t.jsx)(l.Z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){c(e,n,r[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function u(e){var n=e.openSnackbar,r=e.message,o=e.severity,s=e.closeHandlerCB,l=void 0===s?function(){}:s,c=(0,i.useState)(n),u=c[0],p=c[1];(0,i.useEffect)((function(){p(n)}),[n]);var x=function(){p(!1),l()};return(0,t.jsx)(a.Z,{open:u,autoHideDuration:3e3,onClose:x,children:(0,t.jsx)(d,{onClose:x,severity:o,sx:{width:"100%"},children:r})})}u.propTypes={openSnackbar:s().bool,message:s().string,severity:s().string},n.Z=u},7517:function(e,n,r){r.d(n,{Z:function(){return Z}});var t=r(5893),i=r(7294),o=r(9473),s=r(1664),a=r(7357),l=r(8456),c=r(1057),d=r(6863),u=r(7720),p=r(6886),x=r(44),f=r(8409),b=r(5861),h=r(7426),g=r(901),m={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}}};function j(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){j(e,n,r[n])}))}return e}function v(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Z=function(e){var n=function(e){var n=e.children,r=e.value,i=e.index,o=v(e,["children","value","index"]);return(0,t.jsx)("div",y({role:"tabpanel",hidden:r!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i)},o,{children:r===i&&(0,t.jsx)(a.Z,{sx:{p:3,whiteSpace:e.smsstyle},children:n})}))},r=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},Z=e.options,w=e.smstext,O=e.isCreateDisabled,S=void 0!==O&&O,k=e.handleSave,C=e.handlePreview,E=(0,o.v9)((function(e){return e.recommendations})),P=E.status,F=E.filtered_recommendations,_=(0,o.v9)((function(e){return e.reports})),D=_.error,N=_.status,R=(0,o.v9)((function(e){return e.cropcalendar.status})),G=(0,o.v9)((function(e){return e.tendayweather.status})),T=(0,i.useState)({}),W=T[0],A=T[1],I=(0,i.useState)([]),L=I[0],M=I[1],z=(0,i.useState)(0),B=z[0],H=z[1],V=(0,i.useState)(!1),Y=V[0],q=V[1];return(0,i.useEffect)((function(){F.length>0&&(A(F.reduce((function(e,n){return void 0===e?e=j({},n.crop,[n]):void 0===e[n.crop]?e[n.crop]=[n]:e[n.crop].push(n),e}),{})),M(F.map((function(e){return e.crop})).filter((function(e,n,r){return r.indexOf(e)===n}))))}),[F]),(0,i.useEffect)((function(){q(Z.loading||N===g.G.PENDING)}),[Z.loading,N]),(0,t.jsxs)(p.ZP,{container:!0,sx:m.container,gap:3,style:{marginTop:"24px"},children:[(0,t.jsxs)(p.ZP,{item:!0,sx:m.item,xs:12,lg:12,children:[(0,t.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(b.Z,{variant:"h6",children:"Crop Recommendations"}),(0,t.jsx)(l.Z,{size:24,color:"primary",sx:{display:P===g.G.PENDING||R===g.G.PENDING||G===g.G.PENDING?"block":"none"}})]}),F.length>0&&(0,t.jsxs)(a.Z,{children:[(0,t.jsxs)(a.Z,{sx:{display:{md:"block",lg:"flex"}},children:[(0,t.jsx)(b.Z,{variant:"h5",sx:{display:0===Z.sel_activity.length?"none":"block",flexGrow:{xs:12,sm:3}},children:"10-Day Farm Weather Outlook and Advisory"}),(0,t.jsx)(a.Z,{sx:{flexGrow:{xs:12,sm:1}},children:null!==Z.sel_month&&(0,t.jsxs)(a.Z,{sx:m.conditionLegend,style:{color:[h.MW.ABOVE_NORMAL.label,h.MW.WAY_BELOW_NORMAL.label].includes(Z.sel_condition.label)?"#fff":"#000",backgroundColor:h.tN[Z.sel_condition.label]},children:[(0,t.jsx)(b.Z,{variant:"subtitle2",children:"Rainfall Intensity"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:Z.sel_condition.current_date})," \xa0",(0,t.jsxs)("span",{children:[Z.sel_condition.format," ","(",Z.sel_condition.tenday,")"]})]})]})})]}),(0,t.jsxs)(a.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"}},children:[(0,t.jsx)(a.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,t.jsxs)(f.Z,{value:B,onChange:function(e,n){H(n)},"aria-label":"basic tabs example",children:[(0,t.jsx)(x.Z,y({label:"PDF FORM"},r(0))),(0,t.jsx)(x.Z,y({label:"SMS FORM"},r(1)))]})}),(0,t.jsx)(n,{value:B,index:0,smsstyle:"normal",children:L.map((function(e,n){return(0,t.jsxs)(a.Z,{sx:m.recSeasonal,children:[(0,t.jsx)(b.Z,{variant:"h5",children:e}),W[e].map((function(e,n){return(0,t.jsxs)(a.Z,{sx:m.recSeasonal,children:[(0,t.jsxs)(b.Z,{variant:"h6",children:[e.stage," - ",e.activity]}),e.recommendations.map((function(e,r){return e.ul?(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:e.id}),e.subs.length>0&&(0,t.jsx)("ul",{children:e.subs.map((function(e,r){return(0,t.jsx)("li",{children:e},"sub-".concat(n,"-").concat(r))}))})]},"main-".concat(n,"-").concat(r)):(0,t.jsx)("p",{children:e.id},"main-".concat(n,"-").concat(r))}))]},"rec-".concat(n))})),n<L.length-1&&(0,t.jsx)(u.Z,{sx:{margin:"48px 0 48px 0"}})]},"rec-".concat(n))}))}),(0,t.jsx)(n,{value:B,index:1,smsstyle:"pre-wrap",children:w})]})]})]}),(0,t.jsxs)(a.Z,{sx:{marginBottom:"16px",width:"100%",display:F.length>0?"block":"none"},children:[(0,t.jsx)("br",{}),(0,t.jsx)(u.Z,{}),(0,t.jsx)("br",{}),""!==D&&(0,t.jsxs)(b.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",D]}),(0,t.jsxs)(d.Z,{size:"large","aria-label":"large button group",sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,t.jsx)(s.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,t.jsx)(c.Z,{disabled:Y,children:"Cancel"})}),(0,t.jsxs)(c.Z,{onClick:C,disabled:Y,children:[(0,t.jsx)("span",{style:{display:Y?"none":"block"},children:"Preview"})," ","\xa0",(0,t.jsx)(l.Z,{size:20,color:"secondary",sx:{display:Y?"block":"none"}})]}),(0,t.jsx)(c.Z,{variant:"contained",onClick:k,disableElevation:!0,disabled:Y||S,children:"Save"})]})]})]})}}}]);